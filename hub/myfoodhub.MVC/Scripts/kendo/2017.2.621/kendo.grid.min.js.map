{"version":3,"sources":["kendo.grid.js"],"names":["f","define","$","objectKey","object","key","parts","push","sort","join","hashKey","str","i","hash","length","charCodeAt","zeroSize","width","height","baseline","measureText","text","style","measureBox","TextMetrics","current","measure","LRUCache","DEFAULT_OPTIONS","defaultMeasureBox","window","kendo","util","Class","extend","init","size","this","_size","_length","_map","put","value","map","entry","_head","_tail","newer","older","get","baselineMarkerSize","document","createElement","cssText","options","_cache","box","styleKey","cacheKey","cachedResult","baselineMarker","_baselineMarker","cloneNode","textContent","appendChild","body","String","offsetWidth","offsetHeight","offsetTop","parentNode","removeChild","marker","deepExtend","jQuery","amd","a1","a2","a3","undefined","groupCells","count","Array","stringifyAttributes","attributes","attr","result","STRING","cursor","context","add","css","reorder","selector","source","dest","before","idx","sourceIndex","eq","appendTo","elements","lockedContent","content","filter","find","attachCustomCommandEvent","container","commands","command","commandName","isArray","isPlainObject","click","name","on","CLICK","NS","replace","proxy","normalizeColumns","columns","encoded","hide","column","hidden","uid","field","isVisible","addHiddenStyle","footerAttributes","headerAttributes","guid","id","columnParent","parents","columnParents","inserted","splice","setColumnVisibility","visible","method","removeHiddenStyle","isCellVisible","display","visibleColumns","grep","toJQuery","toArray","updateCellRowSpan","cell","sourceLockedColumnsCount","lockedColumnDepth","depth","lockedColumns","nonLockedColumnDepth","nonLockedColumns","rowSpan","moveCellsBetweenContainers","sources","target","leafs","destination","groups","rows","sourcesDepth","targetDepth","children","insertAfter","last","addRowSpanValue","moveCells","updateCellIndex","thead","offset","position","allColumns","cells","leafColumns","el","hasClass","columnPosition","row","temp","max","sourcePosition","columnVisiblePosition","ths","t","append","concat","cellCounts","findParentColumnWithChildren","index","rtl","locked","findReorderTarget","parent","parentColumns","inArray","flatColumnsInDomOrder","flatColumns","hiddenLeafColumnsCount","counter","columnsWidth","cols","colWidth","indexOf","parseInt","removeRowSpanValue","removeEmptyRows","emptyRowsCount","remove","mapColumnToCellRows","rowIndex","visibleNonLockedColumns","visibleLockedColumns","visibleLeafColumns","leafDataCells","indexAttr","a","b","indexA","indexB","parentColumnsCells","parentCellsWithChildren","prevCells","parentCell","closest","headerRows","level","prevAll","colSpan","Math","childColumnsCells","child","colSpanAttr","next","appendContent","tbody","table","html","empty","placeholder","tmp","tbodySupportsInnerHtml","innerHTML","firstChild","replaceChild","normalizeCols","hasDetails","colgroup","format","is","prepend","browser","msie","version","setTimeout","normalizeHeaderCells","len","lastIndex","th","insertBefore","convertToObject","array","item","formatGroupValue","columnValues","isForeignKey","groupValue","htmlEncode","setCellVisibility","state","pad","nonDataCellsRegExp","test","className","hideColumnCells","columnIndex","groupRows","data","hasSubgroups","items","groupFooters","aggregates","showColumnCells","updateColspan","toAdd","toRemove","num","tableWidth","syncTableHeight","table1","table2","lockedHeigth","tableHeigth","diff","filterRowRegExp","adjustRowHeight","row1","row2","offsetHeight1","offsetHeight2","getCommand","focusTable","direct","scrollTop","scrollLeft","edge","setActive","e","focus","one","preventDefault","isColumnEditable","model","selectable","editable","isInputElement","element","tableClick","currentTarget","isHeader","lockedTable","headerTable","lockedHeader","isInput","currentTable","support","touch","roleSelector","_setCurrent","navigatable","isIE8","_activeElement","isInEdit","groupRowBuilder","colspan","ARIALABEL","COLLAPSE","groupRowLockedContentBuilder","ui","DataSource","tbodyInnerHtml","activeElement","Widget","outerWidth","_outerWidth","outerHeight","_outerHeight","keys","prototype","isFunction","isEmptyObject","math","PROGRESS","ERROR","DATA_CELL","SELECTION_CELL_SELECTOR","NAVROW","NAVCELL","ITEMROW","FIRSTNAVITEM","HEADERCELLS","EDIT","BEFOREEDIT","SAVE","REMOVE","DETAILINIT","FILTERMENUINIT","COLUMNMENUINIT","FILTERMENUOPEN","COLUMNMENUOPEN","CELLCLOSE","CHANGE","COLUMNHIDE","COLUMNSHOW","SAVECHANGES","DATABOUND","DETAILEXPAND","DETAILCOLLAPSE","FOCUSED","SELECTED","CHECKBOX","CHECKBOXINPUT","NORECORDSCLASS","COLUMNRESIZE","COLUMNREORDER","COLUMNLOCK","COLUMNUNLOCK","NAVIGATE","HEIGHT","TABINDEX","FUNCTION","DELETECONFIRM","NORECORDS","CONFIRMDELETE","CANCELDELETE","EXPAND","formatRegExp","templateHashRegExp","whitespaceRegExp","RegExp","COMMANDBUTTONTMPL","SELECTCOLUMNTMPL","SELECTCOLUMNHEADERTMPL","isRtl","isIE7","VirtualScrollable","that","fn","call","_refreshHandler","refresh","setDataSource","dataSource","wrap","unbind","bind","itemHeight","noop","prefetch","destroy","wrapper","verticalScrollbar","off","drag","scrollbar","overflow","first","_wheelScroll","kineticScrollNeeded","UserEvents","global","start","sender","capture","move","y","delta","x","_scroll","ctrlKey","wheelDeltaY","clientHeight","scrollHeight","delayLoading","rowHeight","skip","_rangeStart","innerHeight","isScrollingUp","_scrollbarTop","firstItemIndex","floor","lastItemIndex","_scrollTop","_scrolling","_fetch","_scrollingTimeout","clearTimeout","_page","take","itemIndex","rangeStart","pageSize","scrollIntoView","containerHeight","containerScroll","elementOffset","elementHeight","scrollingUp","currentSkip","fetching","prefetchAt","_fetching","_timeout","inRange","range","progress","repaintScrollbar","maxHeight","wrapperElement","addScrollBarHeight","scrollWidth","totalHeight","total","cancel","page","defaultCommands","create","imageClass","iconClass","save","edit","update","canceledit","excel","pdf","Grid","DataBoundWidget","events","_events","_element","_aria","_columns","_dataSource","_tbody","_pageable","_thead","_groupable","_toolbar","_setContentHeight","_templates","_navigatable","_selectable","_clipboard","_details","_editable","_attachCustomCommandsEvent","_minScreenSupport","autoBind","fetch","_group","_groups","_footer","addClass","_resizeHandler","resize","notify","scrollable","virtual","groupable","virtualScrollable","toolbar","filterable","sortable","allowCopy","pageable","persistSelection","rowTemplate","altRowTemplate","noRecords","resizable","reorderable","columnMenu","detailTemplate","columnResizeHandleWidth","mobile","messages","cancelDelete","confirmation","confirmDelete","expandCollapseColumnHeader","_angularItems","_destroyColumnAttachments","_navigatableTables","pager","kendoGroupable","clearArea","_selectedIds","copyHandler","updateClipBoardState","clearAreaHandler","_resizeUserEvents","_resizeHandleDocumentClickHandler","_destroyEditable","_progressHandler","_errorHandler","_removeLockedContainers","pane","minScreenResizeHandler","_draggableInstance","lockedRowTemplate","lockedAltRowTemplate","footerTemplate","groupFooterTemplate","lockedGroupFooterTemplate","noRecordsTemplate","scrollables","footer","lockedFooter","_groupableClickHandler","_setContentWidthHandler","getOptions","initialData","_data","group","aggregate","transport","$angular","setOptions","mobileWrapper","currentOptions","_isMobile","after","removeClass","_setEvents","_items","tr","dataItems","n","resizeHandle","angular","each","filterMenu","_cellId","_hasDetails","_wrapper","_createResizeHandle","left","headerWrap","ieCorrection","webkitCorrection","firefoxCorrection","indicatorWidth","webkit","mozilla","top","show","_autoFitLeafColumn","_positionColumnResizeHandle","lockedHead","getPageZoomStyle","bodyZoom","docZoom","parseFloat","documentElement","isNaN","clientX","winScrollLeft","_resizeHandleDocumentClick","_hideResizeHandle","_positionColumnResizeHandleTouch","threshold","hold","_resizable","columnStart","columnWidth","columnMinWidth","gridWidth","isLocked","col","isMobile","mobileOS","Resizable","handle","hint","header","contentTable","location","minResizableWidth","constrain","totalWidth","rtlMultiplier","currentWidth","_footerWidth","resizeend","newWidth","trigger","oldWidth","_applyLockedContainersWidth","_syncLockedContentHeight","_syncLockedHeaderHeight","_draggable","kendoDraggable","autoScroll","dragstart","not","dragend","title","paddingLeft","paddingRight","lineHeight","paddingTop","paddingBottom","_reorderable","targetParentContainerIndex","targetIndex","kendoReorderable","draggable","dragOverContainers","lockable","inSameContainer","change","oldIndex","newIndex","reorderColumn","_reorderHeader","sourceLockedColumns","targetLockedColumns","destPosition","_reorderContent","footerCol","lockedRows","visibleSources","destIndex","colSourceIndex","colDest","lockedCount","headerCol","prev","_hasFilterRow","leafIndex","autoFitColumn","contentDiv","footerTable","j","tables","oldColumnWidth","newColumnWidth","visibleLocked","notGroupOrHierarchyCol","notGroupOrHierarchyVisibleCell","ceil","lockChanged","sourceColumns","destColumn","_updateColumnCellIndex","_updateTablesWidth","_updateFirstColumnClass","lockColumn","unlockColumn","cellIndex","td","lockedColumnOffset","contains","_modelForContainer","_editMode","getByUid","mode","multiple","handler","_editContainer","end","closeCell","isLockedCell","has","blur","editCell","timer","editRow","stopPropagation","removeRow","_confirmation","_attachModelChange","kendoEditable","fields","editor","values","_relatedRow","_adjustLockedHorizontalScrollBar","clientWidth","touchScroller","_adjustRowsHeight","_syncLockedFooterHeight","editView","_editCancelClickHandler","_editUpdateClickHandler","_detachModelChange","_destroyEditView","close","_actionSheet","purge","navigate","_modelChangeHandler","_modelChange","isCancel","type","_displayCell","prependTo","ns","dataItem","storage","settings","Template","templateSettings","tmpl","template","_cellTmpl","_removeRow","cancelRow","sync","ObservableObject","_createPopupEditor","_createInlineEditor","_editCancelClick","_editUpdateClick","saveRow","currentIndex","updateText","cancelText","tempCommand","unescape","_createButton","kendoWindow","modal","userTriggered","clearContainer","_openPopUpEditor","_editAnimation","center","open","Editable","cancelChanges","_displayRow","deferred","Deferred","reject","promise","resolve","related","newRow","nextRow","angularElements","angularData","isSelected","isAlt","replaceWith","select","_showMessage","actionSheet","view","ActionSheet","cancelTemplate","popup","_actionSheetPopupOptions","confirm","saveChanges","addRow","createAt","toLowerCase","serverPaging","totalPages","insert","_firstEditableColumnIndex","_toolbarTmpl","saveAsExcel","saveAsPDF","attributeClassMatch","Error","split","match","_hasFooters","collapseGroup","expandGroup","_isLocked","_attachGroupable","draggables","enabled","Groupable","groupContainer","draggableElements","allowDrag","_continuousItems","lockedItems","nonLockedItems","apply","slice","multi","notString","dataSourceOptions","schema","Selectable","parseOptions","aria","_persistSelectedRows","useAllItems","relatedTarget","continuousItems","keyCode","SPACEBAR","shiftKey","clear","_lastActive","LEFT","RIGHT","UP","DOWN","selectRange","_firstSelectee","grid","stopImmediatePropagation","copySelection","areaClipBoard","val","getTSV","Event","metaKey","getSelection","selection","createRange","opacity","cellsOffset","lockedCols","inLockedArea","rowsOffset","selected","delimeter","onlyVisible","cellText","any","hideMinScreenCols","screenWidth","innerWidth","screen","_iterateMinScreenCols","minWidth","minScreenWidth","hideColumn","showColumn","clearSelection","_deselectCheckRows","prop","_toggleHeaderCheckState","checked","allRows","modelId","selectedViewIds","selectedKeyNames","property","ids","_updateCurrentAttr","headerId","removeAttr","_current","_scrollCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","addBack","_rowVirtualIndex","_scrollTo","preventTrigger","_removeCurrent","elementToLowercase","tagName","isHorizontal","elementOffsetDir","containerOffsetDir","bottomDistance","offsetLeft","abs","dataTables","headerTables","_openHeaderMenu","_tableFocus","_tableBlur","_tableKeyDown","altKey","_setTabIndex","handled","requestInProgress","canHandle","isDefaultPrevented","_moveUp","_moveDown","_moveRight","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","TAB","_handleTabKey","collapseRow","_prevHorizontalCell","_tabNext","_horizontalContainer","expandRow","_nextHorizontalCell","nextAll","_prevVerticalCell","_verticalContainer","_nextVerticalCell","isInCell","_handleEditing","active","_toggleCurrent","focusable","originalIndex","_currentDataIndex","lockedColumnsCount","up","step","right","back","switchRow","isEdited","isIE","oldIE","editContainer","opera","triggerHandler","_initMobile","Pane","align","effect","_scrollable","hasVirtualScroll","_averageRowHeight","movable","_renderNoRecordsContent","noRecordsElement","_setContentWidth","expander","hiddenDivClass","hiddenDiv","footerWrap","contentWidth","nonLockedCols","nonLockedColsWidth","isGridHeightSet","initialHeight","newHeight","currentRowHeight","itemsCount","_rowHeight","_sum","_measures","_requestStart","_error","_progress","relatedRow","selectableRow","childCells","originalCells","Pager","_wrapFooter","_appendLockedColumnFooter","footerRow","_appendCols","_columnMenu","menu","menuOptions","hasMultiColumnHeaders","initCallback","openCallback","closeCallback","sortHandler","filterHandler","compare","forceUnique","checkSource","owner","filtering","kendoColumnMenu","_headerCells","_filterable","columnFilterable","filterInit","filterOpen","kendoFilterMultiCheck","kendoFilterMenu","_filterRow","rowheader","suggestDataSource","operators","customDataSource","cellOptions","_updateHeader","delay","inputWidth","suggestionOperator","minLength","dataTextField","operator","showOperators","kendoFilterCell","_sortable","sorterInstance","kendoColumnSorter","initialColumns","_checkboxClick","_headerCheckboxClick","checkBox","parentGrid","getKendoGrid","isSelecting","_tmpl","alt","skipGroupCells","expr","paramName","_headerCellText","headerTemplate","stringify","useWithBlock","columnLeafs","columnsLocked","_detailTmpl","_footerTmpl","g","_noRecordsTmpl","defaultTemplate","scrollableNoGridHeightStyles","templateName","rowClass","scope","fieldsMap","_emptyAggregates","templateFunctionStorage","templateFunctionCount","hasFiltering","columnsWithoutFiltering","detailRow","button","expanding","masterRow","ariaLabelText","toggleClass","detailCell","toggle","correctIdx","classesRegEx","sectionRowIndex","_createHeaderCells","_appendLockedColumnContent","spanIdx","skipHiddenCount","colOffset","detach","lockedCells","_appendLockedColumnHeader","trFilter","hasFilterRow","filterCellOffset","filterCells","leafColumnsCount","filtercellCells","filterRow","existingFilterRow","syncHeight","hasLockedColumns","hasTHead","_prepareColumns","_updateCols","_retrieveFirstColumn","parentRow","childRow","totalColSpan","_updateHeaderCols","_updateLockedCols","_autoColumns","toJSON","_rowsHtml","templates","_groupRowHtml","groupHeaderBuilder","skipColspan","footerData","groupHeaderTemplate","footerDefaults","_groupAggregatesDefaultObject","groupItems","headerData","showFooter","footerCount","relatedGroup","toHide","footersVisibility","groupsCount","pop","_firstDataItem","grouped","headerCellIndex","_setParentsVisibility","predicate","p","_resize","force","_isActiveInTable","isCurrentInHeader","hasCheckBoxColumn","action","_renderContent","_renderLockedContent","_restoreCurrent","contentResized","resetTouchEvents","_muteAngularRebind","_restoreSelection","selectedRows","dataItemKey","cmd","_cleanupDetailItems","_angularGroupItems","_angularGroupFooterItems","rows2","containers","containersLength","heights","ExcelMixin","PDFMixin","_drawPDF_autoPageBreak","allPages","startingPage","draw","cont","_destructive","pageNumber","pageNum","drawing","drawDOM","clone","always","then","fail","err","renderPage","origBody","_initPDFProgress","_drawPDF","exportPage","doc","_drawPDFShadow","avoidLinks","done","args","paperSize","Group","pb","loading","kendoProgressBar","chunkCount","min","plugin"],"mappings":"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","file":"kendo.grid.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/text-metrics', ['kendo.core'], f);\n}(function () {\n    (function ($) {\n        window.kendo.util = window.kendo.util || {};\n        var LRUCache = kendo.Class.extend({\n            init: function (size) {\n                this._size = size;\n                this._length = 0;\n                this._map = {};\n            },\n            put: function (key, value) {\n                var map = this._map;\n                var entry = {\n                    key: key,\n                    value: value\n                };\n                map[key] = entry;\n                if (!this._head) {\n                    this._head = this._tail = entry;\n                } else {\n                    this._tail.newer = entry;\n                    entry.older = this._tail;\n                    this._tail = entry;\n                }\n                if (this._length >= this._size) {\n                    map[this._head.key] = null;\n                    this._head = this._head.newer;\n                    this._head.older = null;\n                } else {\n                    this._length++;\n                }\n            },\n            get: function (key) {\n                var entry = this._map[key];\n                if (entry) {\n                    if (entry === this._head && entry !== this._tail) {\n                        this._head = entry.newer;\n                        this._head.older = null;\n                    }\n                    if (entry !== this._tail) {\n                        if (entry.older) {\n                            entry.older.newer = entry.newer;\n                            entry.newer.older = entry.older;\n                        }\n                        entry.older = this._tail;\n                        entry.newer = null;\n                        this._tail.newer = entry;\n                        this._tail = entry;\n                    }\n                    return entry.value;\n                }\n            }\n        });\n        function objectKey(object) {\n            var parts = [];\n            for (var key in object) {\n                parts.push(key + object[key]);\n            }\n            return parts.sort().join('');\n        }\n        function hashKey(str) {\n            var hash = 2166136261;\n            for (var i = 0; i < str.length; ++i) {\n                hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n                hash ^= str.charCodeAt(i);\n            }\n            return hash >>> 0;\n        }\n        function zeroSize() {\n            return {\n                width: 0,\n                height: 0,\n                baseline: 0\n            };\n        }\n        var DEFAULT_OPTIONS = { baselineMarkerSize: 1 };\n        var defaultMeasureBox;\n        if (typeof document !== 'undefined') {\n            defaultMeasureBox = document.createElement('div');\n            defaultMeasureBox.style.cssText = 'position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;' + 'padding: 0 !important; margin: 0 !important; border: 0 !important;' + 'line-height: normal !important; visibility: hidden !important; white-space: nowrap!important;';\n        }\n        var TextMetrics = kendo.Class.extend({\n            init: function (options) {\n                this._cache = new LRUCache(1000);\n                this.options = $.extend({}, DEFAULT_OPTIONS, options);\n            },\n            measure: function (text, style, box) {\n                if (!text) {\n                    return zeroSize();\n                }\n                var styleKey = objectKey(style);\n                var cacheKey = hashKey(text + styleKey);\n                var cachedResult = this._cache.get(cacheKey);\n                if (cachedResult) {\n                    return cachedResult;\n                }\n                var size = zeroSize();\n                var measureBox = box || defaultMeasureBox;\n                var baselineMarker = this._baselineMarker().cloneNode(false);\n                for (var key in style) {\n                    var value = style[key];\n                    if (typeof value !== 'undefined') {\n                        measureBox.style[key] = value;\n                    }\n                }\n                measureBox.textContent = text;\n                measureBox.appendChild(baselineMarker);\n                document.body.appendChild(measureBox);\n                if (String(text).length) {\n                    size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\n                    size.height = measureBox.offsetHeight;\n                    size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\n                }\n                if (size.width > 0 && size.height > 0) {\n                    this._cache.put(cacheKey, size);\n                }\n                measureBox.parentNode.removeChild(measureBox);\n                return size;\n            },\n            _baselineMarker: function () {\n                var marker = document.createElement('div');\n                marker.style.cssText = 'display: inline-block; vertical-align: baseline;width: ' + this.options.baselineMarkerSize + 'px; height: ' + this.options.baselineMarkerSize + 'px;overflow: hidden;';\n                return marker;\n            }\n        });\n        TextMetrics.current = new TextMetrics();\n        function measureText(text, style, measureBox) {\n            return TextMetrics.current.measure(text, style, measureBox);\n        }\n        kendo.deepExtend(kendo.util, {\n            LRUCache: LRUCache,\n            TextMetrics: TextMetrics,\n            measureText: measureText,\n            objectKey: objectKey,\n            hashKey: hashKey\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.grid', [\n        'kendo.data',\n        'kendo.columnsorter',\n        'kendo.editable',\n        'kendo.window',\n        'kendo.filtermenu',\n        'kendo.columnmenu',\n        'kendo.groupable',\n        'kendo.pager',\n        'kendo.selectable',\n        'kendo.sortable',\n        'kendo.reorderable',\n        'kendo.resizable',\n        'kendo.mobile.actionsheet',\n        'kendo.mobile.pane',\n        'kendo.ooxml',\n        'kendo.excel',\n        'kendo.progressbar',\n        'kendo.pdf'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'grid',\n        name: 'Grid',\n        category: 'web',\n        description: 'The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.',\n        depends: [\n            'data',\n            'columnsorter'\n        ],\n        features: [\n            {\n                id: 'grid-editing',\n                name: 'Editing',\n                description: 'Support for record editing',\n                depends: [\n                    'editable',\n                    'window'\n                ]\n            },\n            {\n                id: 'grid-filtering',\n                name: 'Filtering',\n                description: 'Support for record filtering',\n                depends: ['filtermenu']\n            },\n            {\n                id: 'grid-columnmenu',\n                name: 'Column menu',\n                description: 'Support for header column menu',\n                depends: ['columnmenu']\n            },\n            {\n                id: 'grid-grouping',\n                name: 'Grouping',\n                description: 'Support for grid grouping',\n                depends: ['groupable']\n            },\n            {\n                id: 'grid-filtercell',\n                name: 'Row filter',\n                description: 'Support for grid header filtering',\n                depends: ['filtercell']\n            },\n            {\n                id: 'grid-paging',\n                name: 'Paging',\n                description: 'Support for grid paging',\n                depends: ['pager']\n            },\n            {\n                id: 'grid-selection',\n                name: 'Selection',\n                description: 'Support for row selection',\n                depends: ['selectable']\n            },\n            {\n                id: 'grid-column-reorder',\n                name: 'Column reordering',\n                description: 'Support for column reordering',\n                depends: ['reorderable']\n            },\n            {\n                id: 'grid-column-resize',\n                name: 'Column resizing',\n                description: 'Support for column resizing',\n                depends: ['resizable']\n            },\n            {\n                id: 'grid-mobile',\n                name: 'Grid adaptive rendering',\n                description: 'Support for adaptive rendering',\n                depends: [\n                    'mobile.actionsheet',\n                    'mobile.pane'\n                ]\n            },\n            {\n                id: 'grid-excel-export',\n                name: 'Excel export',\n                description: 'Export grid data as Excel spreadsheet',\n                depends: ['excel']\n            },\n            {\n                id: 'grid-pdf-export',\n                name: 'PDF export',\n                description: 'Export grid data as PDF',\n                depends: [\n                    'pdf',\n                    'drawing',\n                    'progressbar'\n                ]\n            }\n        ]\n    };\n    (function ($, undefined) {\n        var kendo = window.kendo, ui = kendo.ui, DataSource = kendo.data.DataSource, tbodySupportsInnerHtml = kendo.support.tbodyInnerHtml, activeElement = kendo._activeElement, Widget = ui.Widget, outerWidth = kendo._outerWidth, outerHeight = kendo._outerHeight, keys = kendo.keys, isPlainObject = $.isPlainObject, extend = $.extend, map = $.map, grep = $.grep, isArray = $.isArray, inArray = $.inArray, push = Array.prototype.push, proxy = $.proxy, isFunction = kendo.isFunction, isEmptyObject = $.isEmptyObject, math = Math, PROGRESS = 'progress', ERROR = 'error', DATA_CELL = ':not(.k-group-cell):not(.k-hierarchy-cell):visible', SELECTION_CELL_SELECTOR = 'tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)', NAVROW = 'tr:not(.k-footer-template):visible', NAVCELL = ':not(.k-group-cell):not(.k-hierarchy-cell):visible', ITEMROW = 'tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible', FIRSTNAVITEM = NAVROW + ':first>' + NAVCELL + ':first', HEADERCELLS = 'th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)', NS = '.kendoGrid', EDIT = 'edit', BEFOREEDIT = 'beforeEdit', SAVE = 'save', REMOVE = 'remove', DETAILINIT = 'detailInit', FILTERMENUINIT = 'filterMenuInit', COLUMNMENUINIT = 'columnMenuInit', FILTERMENUOPEN = 'filterMenuOpen', COLUMNMENUOPEN = 'columnMenuOpen', CELLCLOSE = 'cellClose', CHANGE = 'change', COLUMNHIDE = 'columnHide', COLUMNSHOW = 'columnShow', SAVECHANGES = 'saveChanges', DATABOUND = 'dataBound', DETAILEXPAND = 'detailExpand', DETAILCOLLAPSE = 'detailCollapse', FOCUSED = 'k-state-focused', SELECTED = 'k-state-selected', CHECKBOX = 'k-checkbox', CHECKBOXINPUT = 'input[data-role=\\'checkbox\\'].' + CHECKBOX, NORECORDSCLASS = 'k-grid-norecords', COLUMNRESIZE = 'columnResize', COLUMNREORDER = 'columnReorder', COLUMNLOCK = 'columnLock', COLUMNUNLOCK = 'columnUnlock', NAVIGATE = 'navigate', CLICK = 'click', HEIGHT = 'height', TABINDEX = 'tabIndex', FUNCTION = 'function', STRING = 'string', DELETECONFIRM = 'Are you sure you want to delete this record?', NORECORDS = 'No records available.', CONFIRMDELETE = 'Delete', CANCELDELETE = 'Cancel', COLLAPSE = 'Collapse', EXPAND = 'Expand', ARIALABEL = 'aria-label', formatRegExp = /(\\}|\\#)/gi, templateHashRegExp = /#/gi, whitespaceRegExp = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', nonDataCellsRegExp = new RegExp('(^|' + whitespaceRegExp + ')' + '(k-group-cell|k-hierarchy-cell)' + '(' + whitespaceRegExp + '|$)'), filterRowRegExp = new RegExp('(^|' + whitespaceRegExp + ')' + '(k-filter-row)' + '(' + whitespaceRegExp + '|$)'), COMMANDBUTTONTMPL = '# if (iconClass) {#' + '<a role=\"button\" class=\"k-button k-button-icontext #=className#\" #=attr# href=\"\\\\#\"><span class=\"#=iconClass# #=imageClass#\"></span>#=text#</a>' + '# } else { #' + '<a role=\"button\" class=\"k-button k-button-icontext #=className#\" #=attr# href=\"\\\\#\">#=text#</a>' + '# } #', SELECTCOLUMNTMPL = '<input class=\"' + CHECKBOX + '\" data-role=\"checkbox\" aria-label=\"Select row\" aria-checked=\"false\" type=\"checkbox\"><label class=\"k-checkbox-label k-no-text\">&\\\\#8203;</label>', SELECTCOLUMNHEADERTMPL = '<input class=\"' + CHECKBOX + '\" data-role=\"checkbox\" aria-label=\"Select all rows\" aria-checked=\"false\" type=\"checkbox\"><label class=\"k-checkbox-label k-no-text\">&#8203;</label>', isRtl = false, browser = kendo.support.browser, isIE7 = browser.msie && browser.version == 7, isIE8 = browser.msie && browser.version == 8;\n        var VirtualScrollable = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n                that._refreshHandler = proxy(that.refresh, that);\n                that.setDataSource(options.dataSource);\n                that.wrap();\n            },\n            setDataSource: function (dataSource) {\n                var that = this;\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler);\n                }\n                that.dataSource = dataSource;\n                that.dataSource.bind(CHANGE, that._refreshHandler);\n            },\n            options: {\n                name: 'VirtualScrollable',\n                itemHeight: $.noop,\n                prefetch: true\n            },\n            destroy: function () {\n                var that = this;\n                Widget.fn.destroy.call(that);\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n                that.wrapper.add(that.verticalScrollbar).off(NS);\n                if (that.drag) {\n                    that.drag.destroy();\n                    that.drag = null;\n                }\n                that.wrapper = that.element = that.verticalScrollbar = null;\n                that._refreshHandler = null;\n            },\n            wrap: function () {\n                var that = this, scrollbar = kendo.support.scrollbar() + 1, element = that.element, wrapper;\n                element.css({\n                    width: 'auto',\n                    overflow: 'hidden'\n                }).css(isRtl ? 'padding-left' : 'padding-right', scrollbar);\n                that.content = element.children().first();\n                wrapper = that.wrapper = that.content.wrap('<div class=\"k-virtual-scrollable-wrap\"/>').parent().bind('DOMMouseScroll' + NS + ' mousewheel' + NS, proxy(that._wheelScroll, that));\n                if (kendo.support.kineticScrollNeeded) {\n                    that.drag = new kendo.UserEvents(that.wrapper, {\n                        global: true,\n                        start: function (e) {\n                            e.sender.capture();\n                        },\n                        move: function (e) {\n                            that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop() - e.y.delta);\n                            wrapper.scrollLeft(wrapper.scrollLeft() - e.x.delta);\n                            e.preventDefault();\n                        }\n                    });\n                }\n                that.verticalScrollbar = $('<div class=\"k-scrollbar k-scrollbar-vertical\" />').css({ width: scrollbar }).appendTo(element).bind('scroll' + NS, proxy(that._scroll, that));\n            },\n            _wheelScroll: function (e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n                var scrollbar = this.verticalScrollbar, scrollTop = scrollbar.scrollTop(), delta = kendo.wheelDeltaY(e);\n                if (delta && !(delta > 0 && scrollTop === 0) && !(delta < 0 && scrollTop + scrollbar[0].clientHeight == scrollbar[0].scrollHeight)) {\n                    e.preventDefault();\n                    this.verticalScrollbar.scrollTop(scrollTop + -delta);\n                }\n            },\n            _scroll: function (e) {\n                var that = this, delayLoading = !that.options.prefetch, scrollTop = e.currentTarget.scrollTop, dataSource = that.dataSource, rowHeight = that.itemHeight, skip = dataSource.skip() || 0, start = that._rangeStart || skip, height = that.element.innerHeight(), isScrollingUp = !!(that._scrollbarTop && that._scrollbarTop > scrollTop), firstItemIndex = math.max(math.floor(scrollTop / rowHeight), 0), lastItemIndex = math.max(firstItemIndex + math.floor(height / rowHeight), 0);\n                that._scrollTop = scrollTop - start * rowHeight;\n                that._scrollbarTop = scrollTop;\n                that._scrolling = delayLoading;\n                if (!that._fetch(firstItemIndex, lastItemIndex, isScrollingUp)) {\n                    that.wrapper[0].scrollTop = that._scrollTop;\n                }\n                if (delayLoading) {\n                    if (that._scrollingTimeout) {\n                        clearTimeout(that._scrollingTimeout);\n                    }\n                    that._scrollingTimeout = setTimeout(function () {\n                        that._scrolling = false;\n                        that._page(that._rangeStart, that.dataSource.take());\n                    }, 100);\n                }\n            },\n            itemIndex: function (rowIndex) {\n                var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n                return rangeStart + rowIndex;\n            },\n            position: function (index) {\n                var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n                var pageSize = this.dataSource.pageSize();\n                var result;\n                if (index > rangeStart) {\n                    result = index - rangeStart + 1;\n                } else {\n                    result = rangeStart - index - 1;\n                }\n                return result > pageSize ? pageSize : result;\n            },\n            scrollIntoView: function (row) {\n                var container = this.wrapper[0];\n                var containerHeight = container.clientHeight;\n                var containerScroll = this._scrollTop || container.scrollTop;\n                var elementOffset = row[0].offsetTop;\n                var elementHeight = row[0].offsetHeight;\n                if (containerScroll > elementOffset) {\n                    this.verticalScrollbar[0].scrollTop -= containerHeight / 2;\n                } else if (elementOffset + elementHeight >= containerScroll + containerHeight) {\n                    this.verticalScrollbar[0].scrollTop += containerHeight / 2;\n                }\n            },\n            _fetch: function (firstItemIndex, lastItemIndex, scrollingUp) {\n                var that = this, dataSource = that.dataSource, itemHeight = that.itemHeight, take = dataSource.take(), rangeStart = that._rangeStart || dataSource.skip() || 0, currentSkip = math.floor(firstItemIndex / take) * take, fetching = false, prefetchAt = 0.33;\n                if (firstItemIndex < rangeStart) {\n                    fetching = true;\n                    rangeStart = math.max(0, lastItemIndex - take);\n                    that._scrollTop = (firstItemIndex - rangeStart) * itemHeight;\n                    that._page(rangeStart, take);\n                } else if (lastItemIndex >= rangeStart + take && !scrollingUp) {\n                    fetching = true;\n                    rangeStart = firstItemIndex;\n                    that._scrollTop = itemHeight;\n                    that._page(rangeStart, take);\n                } else if (!that._fetching && that.options.prefetch) {\n                    if (firstItemIndex < currentSkip + take - take * prefetchAt && firstItemIndex > take) {\n                        dataSource.prefetch(currentSkip - take, take, $.noop);\n                    }\n                    if (lastItemIndex > currentSkip + take * prefetchAt) {\n                        dataSource.prefetch(currentSkip + take, take, $.noop);\n                    }\n                }\n                return fetching;\n            },\n            fetching: function () {\n                return this._fetching;\n            },\n            _page: function (skip, take) {\n                var that = this, delayLoading = !that.options.prefetch, dataSource = that.dataSource;\n                clearTimeout(that._timeout);\n                that._fetching = true;\n                that._rangeStart = skip;\n                if (dataSource.inRange(skip, take)) {\n                    dataSource.range(skip, take);\n                } else {\n                    if (!delayLoading) {\n                        kendo.ui.progress(that.wrapper.parent(), true);\n                    }\n                    that._timeout = setTimeout(function () {\n                        if (!that._scrolling) {\n                            if (delayLoading) {\n                                kendo.ui.progress(that.wrapper.parent(), true);\n                            }\n                            dataSource.range(skip, take);\n                        }\n                    }, 100);\n                }\n            },\n            repaintScrollbar: function () {\n                var that = this, html = '', maxHeight = 250000, dataSource = that.dataSource, scrollbar = !kendo.support.kineticScrollNeeded ? kendo.support.scrollbar() : 0, wrapperElement = that.wrapper[0], totalHeight, idx, itemHeight;\n                itemHeight = that.itemHeight = that.options.itemHeight() || 0;\n                var addScrollBarHeight = wrapperElement.scrollWidth > wrapperElement.offsetWidth ? scrollbar : 0;\n                totalHeight = dataSource.total() * itemHeight + addScrollBarHeight;\n                for (idx = 0; idx < math.floor(totalHeight / maxHeight); idx++) {\n                    html += '<div style=\"width:1px;height:' + maxHeight + 'px\"></div>';\n                }\n                if (totalHeight % maxHeight) {\n                    html += '<div style=\"width:1px;height:' + totalHeight % maxHeight + 'px\"></div>';\n                }\n                that.verticalScrollbar.html(html);\n                wrapperElement.scrollTop = that._scrollTop;\n            },\n            refresh: function () {\n                var that = this, dataSource = that.dataSource, rangeStart = that._rangeStart;\n                kendo.ui.progress(that.wrapper.parent(), false);\n                clearTimeout(that._timeout);\n                that.repaintScrollbar();\n                if (that.drag) {\n                    that.drag.cancel();\n                }\n                if (rangeStart && !that._fetching) {\n                    that._rangeStart = dataSource.skip();\n                    if (dataSource.page() === 1) {\n                        that.verticalScrollbar[0].scrollTop = 0;\n                    }\n                }\n                that._fetching = false;\n            }\n        });\n        function groupCells(count) {\n            return new Array(count + 1).join('<td class=\"k-group-cell\">&nbsp;</td>');\n        }\n        function stringifyAttributes(attributes) {\n            var attr, result = ' ';\n            if (attributes) {\n                if (typeof attributes === STRING) {\n                    return attributes;\n                }\n                for (attr in attributes) {\n                    result += attr + '=\"' + attributes[attr] + '\"';\n                }\n            }\n            return result;\n        }\n        var defaultCommands = {\n            create: {\n                text: 'Add new record',\n                imageClass: 'k-i-plus',\n                className: 'k-grid-add',\n                iconClass: 'k-icon'\n            },\n            cancel: {\n                text: 'Cancel changes',\n                imageClass: 'k-i-cancel',\n                className: 'k-grid-cancel-changes',\n                iconClass: 'k-icon'\n            },\n            save: {\n                text: 'Save changes',\n                imageClass: 'k-i-check',\n                className: 'k-grid-save-changes',\n                iconClass: 'k-icon'\n            },\n            destroy: {\n                text: 'Delete',\n                imageClass: 'k-i-close',\n                className: 'k-grid-delete',\n                iconClass: 'k-icon'\n            },\n            edit: {\n                text: 'Edit',\n                imageClass: 'k-i-edit',\n                className: 'k-grid-edit',\n                iconClass: 'k-icon'\n            },\n            update: {\n                text: 'Update',\n                imageClass: 'k-i-check',\n                className: 'k-primary k-grid-update',\n                iconClass: 'k-icon'\n            },\n            canceledit: {\n                text: 'Cancel',\n                imageClass: 'k-i-cancel',\n                className: 'k-grid-cancel',\n                iconClass: 'k-icon'\n            },\n            excel: {\n                text: 'Export to Excel',\n                imageClass: 'k-i-file-excel',\n                className: 'k-grid-excel',\n                iconClass: 'k-icon'\n            },\n            pdf: {\n                text: 'Export to PDF',\n                imageClass: 'k-i-file-pdf',\n                className: 'k-grid-pdf',\n                iconClass: 'k-icon'\n            }\n        };\n        function cursor(context, value) {\n            $('th, th .k-grid-filter, th .k-link', context).add(document.body).css('cursor', value);\n        }\n        function reorder(selector, source, dest, before, count) {\n            var sourceIndex = source;\n            source = $();\n            count = count || 1;\n            for (var idx = 0; idx < count; idx++) {\n                source = source.add(selector.eq(sourceIndex + idx));\n            }\n            if (typeof dest == 'number') {\n                source[before ? 'insertBefore' : 'insertAfter'](selector.eq(dest));\n            } else {\n                source.appendTo(dest);\n            }\n        }\n        function elements(lockedContent, content, filter) {\n            return $(lockedContent).add(content).find(filter);\n        }\n        function attachCustomCommandEvent(context, container, commands) {\n            var idx, length, command, commandName;\n            commands = !isArray(commands) ? [commands] : commands;\n            for (idx = 0, length = commands.length; idx < length; idx++) {\n                command = commands[idx];\n                if (isPlainObject(command) && command.click) {\n                    commandName = command.name || command.text;\n                    container.on(CLICK + NS, 'a.k-grid-' + (commandName || '').replace(/\\s/g, ''), { commandName: commandName }, proxy(command.click, context));\n                }\n            }\n        }\n        function normalizeColumns(columns, encoded, hide) {\n            return map(columns, function (column) {\n                column = typeof column === STRING ? { field: column } : column;\n                var hidden;\n                if (!isVisible(column) || hide) {\n                    column.attributes = addHiddenStyle(column.attributes);\n                    column.footerAttributes = addHiddenStyle(column.footerAttributes);\n                    column.headerAttributes = addHiddenStyle(column.headerAttributes);\n                    hidden = true;\n                }\n                if (column.columns) {\n                    column.columns = normalizeColumns(column.columns, encoded, hidden);\n                }\n                var uid = kendo.guid();\n                column.headerAttributes = extend({ id: uid }, column.headerAttributes);\n                return extend({\n                    encoded: encoded,\n                    hidden: hidden\n                }, column);\n            });\n        }\n        function columnParent(column, columns) {\n            var parents = [];\n            columnParents(column, columns, parents);\n            return parents[parents.length - 1];\n        }\n        function columnParents(column, columns, parents) {\n            parents = parents || [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (column === columns[idx]) {\n                    return true;\n                } else if (columns[idx].columns) {\n                    var inserted = parents.length;\n                    parents.push(columns[idx]);\n                    if (!columnParents(column, columns[idx].columns, parents)) {\n                        parents.splice(inserted, parents.length - inserted);\n                    } else {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        }\n        function setColumnVisibility(column, visible) {\n            var method = visible ? removeHiddenStyle : addHiddenStyle;\n            column.hidden = !visible;\n            column.attributes = method(column.attributes);\n            column.footerAttributes = method(column.footerAttributes);\n            column.headerAttributes = method(column.headerAttributes);\n        }\n        function isCellVisible() {\n            return this.style.display !== 'none';\n        }\n        function isVisible(column) {\n            return visibleColumns([column]).length > 0;\n        }\n        function visibleColumns(columns) {\n            return grep(columns, function (column) {\n                var result = !column.hidden;\n                if (result && column.columns) {\n                    result = visibleColumns(column.columns).length > 0;\n                }\n                return result;\n            });\n        }\n        function toJQuery(elements) {\n            return $(elements).map(function () {\n                return this.toArray();\n            });\n        }\n        function updateCellRowSpan(cell, columns, sourceLockedColumnsCount) {\n            var lockedColumnDepth = depth(lockedColumns(columns));\n            var nonLockedColumnDepth = depth(nonLockedColumns(columns));\n            var rowSpan = cell.rowSpan;\n            if (sourceLockedColumnsCount) {\n                if (lockedColumnDepth > nonLockedColumnDepth) {\n                    cell.rowSpan = rowSpan - (lockedColumnDepth - nonLockedColumnDepth) || 1;\n                } else {\n                    cell.rowSpan = rowSpan + (nonLockedColumnDepth - lockedColumnDepth);\n                }\n            } else {\n                if (lockedColumnDepth > nonLockedColumnDepth) {\n                    cell.rowSpan = rowSpan + (lockedColumnDepth - nonLockedColumnDepth);\n                } else {\n                    cell.rowSpan = rowSpan - (nonLockedColumnDepth - lockedColumnDepth) || 1;\n                }\n            }\n        }\n        function moveCellsBetweenContainers(sources, target, leafs, columns, container, destination, groups) {\n            var sourcesDepth = depth(sources);\n            var targetDepth = depth([target]);\n            if (sourcesDepth > targetDepth) {\n                var groupCells = new Array(groups + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">&nbsp;</th>');\n                var rows = destination.children(':not(.k-filter-row)');\n                $(new Array(sourcesDepth - targetDepth + 1).join('<tr>' + groupCells + '</tr>')).insertAfter(rows.last());\n            }\n            addRowSpanValue(destination, sourcesDepth - targetDepth);\n            moveCells(leafs, columns, container, destination);\n        }\n        function updateCellIndex(thead, columns, offset) {\n            offset = offset || 0;\n            var position;\n            var cell;\n            var allColumns = columns;\n            columns = leafColumns(columns);\n            var cells = {};\n            var rows = thead.find('>tr:not(.k-filter-row)');\n            var filter = function () {\n                var el = $(this);\n                return !el.hasClass('k-group-cell') && !el.hasClass('k-hierarchy-cell');\n            };\n            for (var idx = 0, length = columns.length; idx < length; idx++) {\n                position = columnPosition(columns[idx], allColumns);\n                if (!cells[position.row]) {\n                    cells[position.row] = rows.eq(position.row).find('.k-header').filter(filter);\n                }\n                cell = cells[position.row].eq(position.cell);\n                cell.attr(kendo.attr('index'), offset + idx);\n            }\n            return columns.length;\n        }\n        function depth(columns) {\n            var result = 1;\n            var max = 0;\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].columns) {\n                    var temp = depth(columns[idx].columns);\n                    if (temp > max) {\n                        max = temp;\n                    }\n                }\n            }\n            return result + max;\n        }\n        function moveCells(leafs, columns, container, destination) {\n            var sourcePosition = columnVisiblePosition(leafs[0], columns);\n            var ths = container.find('>tr:not(.k-filter-row):eq(' + sourcePosition.row + ')>th.k-header');\n            var t = $();\n            var sourceIndex = sourcePosition.cell;\n            var idx;\n            for (idx = 0; idx < leafs.length; idx++) {\n                t = t.add(ths.eq(sourceIndex + idx));\n            }\n            destination.find('>tr:not(.k-filter-row)').eq(sourcePosition.row).append(t);\n            var children = [];\n            for (idx = 0; idx < leafs.length; idx++) {\n                if (leafs[idx].columns) {\n                    children = children.concat(leafs[idx].columns);\n                }\n            }\n            if (children.length) {\n                moveCells(children, columns, container, destination);\n            }\n        }\n        function columnPosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n            for (idx = 0; idx < columns.length; idx++) {\n                if (columns[idx] == column) {\n                    result = {\n                        cell: cellCounts[row],\n                        row: row\n                    };\n                    break;\n                } else if (columns[idx].columns) {\n                    result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n                    if (result) {\n                        break;\n                    }\n                }\n                cellCounts[row]++;\n            }\n            return result;\n        }\n        function findParentColumnWithChildren(columns, index, source, rtl) {\n            var target;\n            var locked = source.locked;\n            do {\n                target = columns[index];\n                index += rtl ? 1 : -1;\n            } while (target && index > -1 && index < columns.length && target != source && !target.columns && target.locked == locked);\n            return target;\n        }\n        function findReorderTarget(columns, target, source, before) {\n            if (target.columns) {\n                target = target.columns;\n                return target[before ? 0 : target.length - 1];\n            } else {\n                var parent = columnParent(target, columns);\n                var parentColumns;\n                if (parent) {\n                    parentColumns = parent.columns;\n                } else {\n                    parentColumns = columns;\n                }\n                var index = inArray(target, parentColumns);\n                if (index === 0 && before) {\n                    index++;\n                } else if (index == parentColumns.length - 1 && !before) {\n                    index--;\n                } else if (index > 0 || index === 0 && !before) {\n                    index += before ? -1 : 1;\n                }\n                var sourceIndex = inArray(source, parentColumns);\n                target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n                if (target && target != source && target.columns) {\n                    return findReorderTarget(columns, target, source, before);\n                }\n            }\n            return null;\n        }\n        function columnVisiblePosition(column, columns, row, cellCounts) {\n            var result;\n            var idx;\n            row = row || 0;\n            cellCounts = cellCounts || {};\n            cellCounts[row] = cellCounts[row] || 0;\n            for (idx = 0; idx < columns.length; idx++) {\n                if (columns[idx] == column) {\n                    result = {\n                        cell: cellCounts[row],\n                        row: row\n                    };\n                    break;\n                } else if (columns[idx].columns) {\n                    result = columnVisiblePosition(column, columns[idx].columns, row + 1, cellCounts);\n                    if (result) {\n                        break;\n                    }\n                }\n                if (!columns[idx].hidden) {\n                    cellCounts[row]++;\n                }\n            }\n            return result;\n        }\n        function flatColumnsInDomOrder(columns) {\n            var result = flatColumns(lockedColumns(columns));\n            return result.concat(flatColumns(nonLockedColumns(columns)));\n        }\n        function flatColumns(columns) {\n            var result = [];\n            var children = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                result.push(columns[idx]);\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n            }\n            if (children.length) {\n                result = result.concat(flatColumns(children));\n            }\n            return result;\n        }\n        function hiddenLeafColumnsCount(columns) {\n            var counter = 0;\n            var column;\n            for (var idx = 0; idx < columns.length; idx++) {\n                column = columns[idx];\n                if (column.columns) {\n                    counter += hiddenLeafColumnsCount(column.columns);\n                } else if (column.hidden) {\n                    counter++;\n                }\n            }\n            return counter;\n        }\n        function columnsWidth(cols) {\n            var colWidth, width = 0;\n            for (var idx = 0, length = cols.length; idx < length; idx++) {\n                colWidth = cols[idx].style.width;\n                if (colWidth && colWidth.indexOf('%') == -1) {\n                    width += parseInt(colWidth, 10);\n                }\n            }\n            return width;\n        }\n        function removeRowSpanValue(container, count) {\n            var cells = container.find('tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)');\n            var rowSpan;\n            for (var idx = 0; idx < cells.length; idx++) {\n                rowSpan = cells[idx].rowSpan;\n                if (rowSpan > 1) {\n                    cells[idx].rowSpan = rowSpan - count || 1;\n                }\n            }\n        }\n        function addRowSpanValue(container, count) {\n            var cells = container.find('tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)');\n            for (var idx = 0; idx < cells.length; idx++) {\n                cells[idx].rowSpan += count;\n            }\n        }\n        function removeEmptyRows(container) {\n            var rows = container.find('tr:not(.k-filter-row)');\n            var emptyRowsCount = rows.filter(function () {\n                return !$(this).children().length;\n            }).remove().length;\n            var cells = rows.find('th:not(.k-group-cell,.k-hierarchy-cell)');\n            for (var idx = 0; idx < cells.length; idx++) {\n                if (cells[idx].rowSpan > 1) {\n                    cells[idx].rowSpan -= emptyRowsCount;\n                }\n            }\n            return rows.length - emptyRowsCount;\n        }\n        function mapColumnToCellRows(columns, cells, rows, rowIndex, offset) {\n            var idx, row, length, children = [];\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                row = rows[rowIndex] || [];\n                row.push(cells.eq(offset + idx));\n                rows[rowIndex] = row;\n                if (columns[idx].columns) {\n                    children = children.concat(columns[idx].columns);\n                }\n            }\n            if (children.length) {\n                mapColumnToCellRows(children, cells, rows, rowIndex + 1, offset + columns.length);\n            }\n        }\n        function lockedColumns(columns) {\n            return grep(columns, function (column) {\n                return column.locked;\n            });\n        }\n        function nonLockedColumns(columns) {\n            return grep(columns, function (column) {\n                return !column.locked;\n            });\n        }\n        function visibleNonLockedColumns(columns) {\n            return grep(columns, function (column) {\n                return !column.locked && isVisible(column);\n            });\n        }\n        function visibleLockedColumns(columns) {\n            return grep(columns, function (column) {\n                return column.locked && isVisible(column);\n            });\n        }\n        function visibleLeafColumns(columns) {\n            var result = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (columns[idx].hidden) {\n                    continue;\n                }\n                if (columns[idx].columns) {\n                    result = result.concat(visibleLeafColumns(columns[idx].columns));\n                } else {\n                    result.push(columns[idx]);\n                }\n            }\n            return result;\n        }\n        function leafColumns(columns) {\n            var result = [];\n            for (var idx = 0; idx < columns.length; idx++) {\n                if (!columns[idx].columns) {\n                    result.push(columns[idx]);\n                    continue;\n                }\n                result = result.concat(leafColumns(columns[idx].columns));\n            }\n            return result;\n        }\n        function leafDataCells(container) {\n            var rows = container.find('>tr:not(.k-filter-row)');\n            var filter = function () {\n                var el = $(this);\n                return !el.hasClass('k-group-cell') && !el.hasClass('k-hierarchy-cell');\n            };\n            var cells = $();\n            if (rows.length > 1) {\n                cells = rows.find('th').filter(filter).filter(function () {\n                    return this.rowSpan > 1;\n                });\n            }\n            cells = cells.add(rows.last().find('th').filter(filter));\n            var indexAttr = kendo.attr('index');\n            cells.sort(function (a, b) {\n                a = $(a);\n                b = $(b);\n                var indexA = a.attr(indexAttr);\n                var indexB = b.attr(indexAttr);\n                if (indexA === undefined) {\n                    indexA = $(a).index();\n                }\n                if (indexB === undefined) {\n                    indexB = $(b).index();\n                }\n                indexA = parseInt(indexA, 10);\n                indexB = parseInt(indexB, 10);\n                return indexA > indexB ? 1 : indexA < indexB ? -1 : 0;\n            });\n            return cells;\n        }\n        function parentColumnsCells(cell) {\n            var container = cell.closest('table');\n            var result = $().add(cell);\n            var row = cell.closest('tr');\n            var headerRows = container.find('tr:not(.k-filter-row)');\n            var level = headerRows.index(row);\n            if (level > 0) {\n                var parent = headerRows.eq(level - 1);\n                var parentCellsWithChildren = parent.find('th:not(.k-group-cell,.k-hierarchy-cell)').filter(function () {\n                    return !$(this).attr('rowspan');\n                });\n                var offset = 0;\n                var index = row.find('th:not(.k-group-cell,.k-hierarchy-cell)').index(cell);\n                var prevCells = cell.prevAll(':not(.k-group-cell,.k-hierarchy-cell)').filter(function () {\n                    return this.colSpan > 1;\n                });\n                for (var idx = 0; idx < prevCells.length; idx++) {\n                    offset += prevCells[idx].colSpan || 1;\n                }\n                index += Math.max(offset - 1, 0);\n                offset = 0;\n                for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                    var parentCell = parentCellsWithChildren.eq(idx);\n                    if (parentCell.attr('colSpan')) {\n                        offset += parentCell[0].colSpan;\n                    } else {\n                        offset += 1;\n                    }\n                    if (index >= idx && index < offset) {\n                        result = parentColumnsCells(parentCell).add(result);\n                        break;\n                    }\n                }\n            }\n            return result;\n        }\n        function childColumnsCells(cell) {\n            var container = cell.closest('thead');\n            var result = $().add(cell);\n            var row = cell.closest('tr');\n            var headerRows = container.find('tr:not(.k-filter-row)');\n            var level = headerRows.index(row) + cell[0].rowSpan;\n            var colSpanAttr = kendo.attr('colspan');\n            if (level <= headerRows.length - 1) {\n                var child = row.next();\n                var prevCells = cell.prevAll(':not(.k-group-cell,.k-hierarchy-cell)');\n                var idx;\n                prevCells = prevCells.filter(function () {\n                    return !this.rowSpan || this.rowSpan === 1;\n                });\n                var offset = 0;\n                for (idx = 0; idx < prevCells.length; idx++) {\n                    offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n                }\n                var cells = child.find('th:not(.k-group-cell,.k-hierarchy-cell)');\n                var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n                idx = 0;\n                while (idx < colSpan) {\n                    child = cells.eq(idx + offset);\n                    result = result.add(childColumnsCells(child));\n                    var value = parseInt(child.attr(colSpanAttr), 10);\n                    if (value > 1) {\n                        colSpan -= value - 1;\n                    }\n                    idx++;\n                }\n            }\n            return result;\n        }\n        function appendContent(tbody, table, html, empty) {\n            var placeholder, tmp = tbody;\n            if (empty) {\n                tbody.empty();\n            }\n            if (tbodySupportsInnerHtml) {\n                tbody[0].innerHTML = html;\n            } else {\n                placeholder = document.createElement('div');\n                placeholder.innerHTML = '<table><tbody>' + html + '</tbody></table>';\n                tbody = placeholder.firstChild.firstChild;\n                table[0].replaceChild(tbody, tmp[0]);\n                tbody = $(tbody);\n            }\n            return tbody;\n        }\n        function addHiddenStyle(attr) {\n            attr = attr || {};\n            var style = attr.style;\n            if (!style) {\n                style = 'display:none';\n            } else {\n                style = style.replace(/((.*)?display)(.*)?:([^;]*)/i, '$1:none');\n                if (style === attr.style) {\n                    style = style.replace(/(.*)?/i, 'display:none;$1');\n                }\n            }\n            return extend({}, attr, { style: style });\n        }\n        function removeHiddenStyle(attr) {\n            attr = attr || {};\n            var style = attr.style;\n            if (style) {\n                attr.style = style.replace(/(display\\s*:\\s*none\\s*;?)*/gi, '');\n            }\n            return attr;\n        }\n        function normalizeCols(table, visibleColumns, hasDetails, groups) {\n            var colgroup = table.find('>colgroup'), width, cols = map(visibleColumns, function (column) {\n                    width = column.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}\"/>', typeof width === STRING ? width : width + 'px');\n                    }\n                    return '<col />';\n                });\n            if (hasDetails || colgroup.find('.k-hierarchy-col').length) {\n                cols.splice(0, 0, '<col class=\"k-hierarchy-col\" />');\n            }\n            if (colgroup.length) {\n                colgroup.remove();\n            }\n            colgroup = $(new Array(groups + 1).join('<col class=\"k-group-col\">') + cols.join(''));\n            if (!colgroup.is('colgroup')) {\n                colgroup = $('<colgroup/>').append(colgroup);\n            }\n            table.prepend(colgroup);\n            if (browser.msie && browser.version == 8) {\n                table.css('display', 'inline-table');\n                window.setTimeout(function () {\n                    table.css('display', '');\n                }, 1);\n            }\n        }\n        function normalizeHeaderCells(container, columns) {\n            var lastIndex = 0;\n            var idx, len;\n            var th = container.find('th:not(.k-group-cell)');\n            for (idx = 0, len = columns.length; idx < len; idx++) {\n                if (columns[idx].locked) {\n                    th.eq(idx).insertBefore(th.eq(lastIndex));\n                    th = container.find('th:not(.k-group-cell)');\n                    lastIndex++;\n                }\n            }\n        }\n        function convertToObject(array) {\n            var result = {}, item, idx, length;\n            for (idx = 0, length = array.length; idx < length; idx++) {\n                item = array[idx];\n                result[item.value] = item.text;\n            }\n            return result;\n        }\n        function formatGroupValue(value, format, columnValues, encoded) {\n            var isForeignKey = columnValues && columnValues.length && isPlainObject(columnValues[0]) && 'value' in columnValues[0], groupValue = isForeignKey ? convertToObject(columnValues)[value] : value;\n            groupValue = groupValue != null ? groupValue : '';\n            return format ? kendo.format(format, groupValue) : encoded === false ? groupValue : kendo.htmlEncode(groupValue);\n        }\n        function setCellVisibility(cells, index, visible) {\n            var pad = 0, state, cell = cells[pad];\n            while (cell) {\n                state = visible ? true : cell.style.display !== 'none';\n                if (state && !nonDataCellsRegExp.test(cell.className) && --index < 0) {\n                    cell.style.display = visible ? '' : 'none';\n                    break;\n                }\n                cell = cells[++pad];\n            }\n        }\n        function hideColumnCells(rows, columnIndex) {\n            var idx = 0, length = rows.length, cell, row;\n            for (; idx < length; idx += 1) {\n                row = rows.eq(idx);\n                if (row.is('.k-grouping-row,.k-detail-row')) {\n                    cell = row.children(':not(.k-group-cell):first,.k-detail-cell').last();\n                    cell.attr('colspan', parseInt(cell.attr('colspan'), 10) - 1);\n                } else {\n                    if (row.hasClass('k-grid-edit-row') && (cell = row.children('.k-edit-container')[0])) {\n                        cell = $(cell);\n                        cell.attr('colspan', parseInt(cell.attr('colspan'), 10) - 1);\n                        cell.find('col').eq(columnIndex).remove();\n                        row = cell.find('tr:first');\n                    }\n                    setCellVisibility(row[0].cells, columnIndex, false);\n                }\n            }\n        }\n        function groupRows(data) {\n            var result = [];\n            var item;\n            for (var idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                if (!('field' in item && 'value' in item && 'items' in item)) {\n                    break;\n                }\n                result.push(item);\n                if (item.hasSubgroups) {\n                    result = result.concat(groupRows(item.items));\n                }\n            }\n            return result;\n        }\n        function groupFooters(data) {\n            var result = [];\n            var item;\n            for (var idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                if (!('field' in item && 'value' in item && 'items' in item)) {\n                    break;\n                }\n                if (item.hasSubgroups) {\n                    result = result.concat(groupFooters(item.items));\n                }\n                result.push(item.aggregates);\n            }\n            return result;\n        }\n        function showColumnCells(rows, columnIndex) {\n            var idx = 0, length = rows.length, cell, row, columns;\n            for (; idx < length; idx += 1) {\n                row = rows.eq(idx);\n                if (row.is('.k-grouping-row,.k-detail-row')) {\n                    cell = row.children(':not(.k-group-cell):first,.k-detail-cell').last();\n                    cell.attr('colspan', parseInt(cell.attr('colspan'), 10) + 1);\n                } else {\n                    if (row.hasClass('k-grid-edit-row') && (cell = row.children('.k-edit-container')[0])) {\n                        cell = $(cell);\n                        cell.attr('colspan', parseInt(cell.attr('colspan'), 10) + 1);\n                        normalizeCols(cell.find('>form>table'), visibleColumns(columns), false, 0);\n                        row = cell.find('tr:first');\n                    }\n                    setCellVisibility(row[0].cells, columnIndex, true);\n                }\n            }\n        }\n        function updateColspan(toAdd, toRemove, num) {\n            num = num || 1;\n            var item, idx, length;\n            for (idx = 0, length = toAdd.length; idx < length; idx++) {\n                item = toAdd.eq(idx).children().last();\n                item.attr('colspan', parseInt(item.attr('colspan'), 10) + num);\n                item = toRemove.eq(idx).children().last();\n                item.attr('colspan', parseInt(item.attr('colspan'), 10) - num);\n            }\n        }\n        function tableWidth(table) {\n            var idx, length, width = 0;\n            var cols = table.find('>colgroup>col');\n            for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                width += parseInt(cols[idx].style.width, 10);\n            }\n            return width;\n        }\n        var Grid = kendo.ui.DataBoundWidget.extend({\n            init: function (element, options, events) {\n                var that = this;\n                options = isArray(options) ? { dataSource: options } : options;\n                Widget.fn.init.call(that, element, options);\n                if (events) {\n                    that._events = events;\n                }\n                isRtl = kendo.support.isRtl(element);\n                that._element();\n                that._aria();\n                that._columns(that.options.columns);\n                that._dataSource();\n                that._tbody();\n                that._pageable();\n                that._thead();\n                that._groupable();\n                that._toolbar();\n                that._setContentHeight();\n                that._templates();\n                that._navigatable();\n                that._selectable();\n                that._clipboard();\n                that._details();\n                that._editable();\n                that._attachCustomCommandsEvent();\n                that._minScreenSupport();\n                if (that.options.autoBind) {\n                    that.dataSource.fetch();\n                } else {\n                    that._group = that._groups() > 0;\n                    that._footer();\n                }\n                if (that.lockedContent) {\n                    that.wrapper.addClass('k-grid-lockedcolumns');\n                    that._resizeHandler = function () {\n                        that.resize();\n                    };\n                    $(window).on('resize' + NS, that._resizeHandler);\n                }\n                kendo.notify(that);\n            },\n            events: [\n                CHANGE,\n                'dataBinding',\n                'cancel',\n                DATABOUND,\n                DETAILEXPAND,\n                DETAILCOLLAPSE,\n                DETAILINIT,\n                FILTERMENUINIT,\n                FILTERMENUOPEN,\n                COLUMNMENUINIT,\n                COLUMNMENUOPEN,\n                EDIT,\n                BEFOREEDIT,\n                SAVE,\n                REMOVE,\n                SAVECHANGES,\n                CELLCLOSE,\n                COLUMNRESIZE,\n                COLUMNREORDER,\n                COLUMNSHOW,\n                COLUMNHIDE,\n                COLUMNLOCK,\n                COLUMNUNLOCK,\n                NAVIGATE,\n                'page',\n                'sort',\n                'filter',\n                'group'\n            ],\n            setDataSource: function (dataSource) {\n                var that = this;\n                var scrollable = that.options.scrollable;\n                that.options.dataSource = dataSource;\n                that._dataSource();\n                that._pageable();\n                that._thead();\n                if (scrollable) {\n                    if (scrollable.virtual) {\n                        that.content.find('>.k-virtual-scrollable-wrap').scrollLeft(0);\n                    } else {\n                        that.content.scrollLeft(0);\n                    }\n                }\n                if (that.options.groupable) {\n                    that._groupable();\n                }\n                if (that.virtualScrollable) {\n                    that.virtualScrollable.setDataSource(that.options.dataSource);\n                }\n                if (that.options.navigatable) {\n                    that._navigatable();\n                }\n                if (that.options.selectable) {\n                    that._selectable();\n                }\n                if (that.options.autoBind) {\n                    dataSource.fetch();\n                }\n            },\n            options: {\n                name: 'Grid',\n                columns: [],\n                toolbar: null,\n                autoBind: true,\n                filterable: false,\n                scrollable: true,\n                sortable: false,\n                selectable: false,\n                allowCopy: false,\n                navigatable: false,\n                pageable: false,\n                persistSelection: false,\n                editable: false,\n                groupable: false,\n                rowTemplate: '',\n                altRowTemplate: '',\n                noRecords: false,\n                dataSource: {},\n                height: null,\n                resizable: false,\n                reorderable: false,\n                columnMenu: false,\n                detailTemplate: null,\n                columnResizeHandleWidth: 3,\n                mobile: '',\n                messages: {\n                    editable: {\n                        cancelDelete: CANCELDELETE,\n                        confirmation: DELETECONFIRM,\n                        confirmDelete: CONFIRMDELETE\n                    },\n                    commands: {\n                        create: defaultCommands.create.text,\n                        cancel: defaultCommands.cancel.text,\n                        save: defaultCommands.save.text,\n                        destroy: defaultCommands.destroy.text,\n                        edit: defaultCommands.edit.text,\n                        update: defaultCommands.update.text,\n                        canceledit: defaultCommands.canceledit.text,\n                        excel: defaultCommands.excel.text,\n                        pdf: defaultCommands.pdf.text\n                    },\n                    noRecords: NORECORDS,\n                    expandCollapseColumnHeader: ''\n                }\n            },\n            destroy: function () {\n                var that = this, element;\n                that._angularItems('cleanup');\n                that._destroyColumnAttachments();\n                Widget.fn.destroy.call(that);\n                this._navigatableTables = null;\n                if (that._resizeHandler) {\n                    $(window).off('resize' + NS, that._resizeHandler);\n                }\n                if (that.pager && that.pager.element) {\n                    that.pager.destroy();\n                }\n                that.pager = null;\n                if (that.groupable && that.groupable.element) {\n                    that.groupable.element.kendoGroupable('destroy');\n                }\n                that.groupable = null;\n                if (that.options.reorderable) {\n                    that.wrapper.data('kendoReorderable').destroy();\n                }\n                if (that.selectable && that.selectable.element) {\n                    that.selectable.destroy();\n                    that.clearArea();\n                    if (that.options.persistSelection === true) {\n                        that._selectedIds = null;\n                    }\n                    if (that.copyHandler) {\n                        that.wrapper.off('keydown', that.copyHandler);\n                        that.unbind(that.copyHandler);\n                    }\n                    if (that.updateClipBoardState) {\n                        that.unbind(that.updateClipBoardState);\n                        that.updateClipBoardState = null;\n                    }\n                    if (that.clearAreaHandler) {\n                        that.wrapper.off('keyup', that.clearAreaHandler);\n                    }\n                }\n                that.selectable = null;\n                if (that.resizable) {\n                    that.resizable.destroy();\n                    if (that._resizeUserEvents) {\n                        if (that._resizeHandleDocumentClickHandler) {\n                            $(document).off('click', that._resizeHandleDocumentClickHandler);\n                        }\n                        that._resizeUserEvents.destroy();\n                        that._resizeUserEvents = null;\n                    }\n                    that.resizable = null;\n                }\n                if (that.virtualScrollable && that.virtualScrollable.element) {\n                    that.virtualScrollable.destroy();\n                }\n                that.virtualScrollable = null;\n                that._destroyEditable();\n                if (that.dataSource) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler).unbind(PROGRESS, that._progressHandler).unbind(ERROR, that._errorHandler);\n                    that._refreshHandler = that._progressHandler = that._errorHandler = null;\n                }\n                element = that.element.add(that.wrapper).add(that.table).add(that.thead).add(that.wrapper.find('>.k-grid-toolbar'));\n                if (that.content) {\n                    element = element.add(that.content).add(that.content.find('>.k-virtual-scrollable-wrap'));\n                }\n                if (that.lockedHeader) {\n                    that._removeLockedContainers();\n                }\n                if (that.pane) {\n                    that.pane.destroy();\n                }\n                if (that.minScreenResizeHandler) {\n                    $(window).off('resize', that.minScreenResizeHandler);\n                }\n                if (that._draggableInstance && that._draggableInstance.element) {\n                    that._draggableInstance.destroy();\n                }\n                that._draggableInstance = null;\n                element.off(NS);\n                kendo.destroy(that.wrapper);\n                that.rowTemplate = that.altRowTemplate = that.lockedRowTemplate = that.lockedAltRowTemplate = that.detailTemplate = that.footerTemplate = that.groupFooterTemplate = that.lockedGroupFooterTemplate = that.noRecordsTemplate = null;\n                that.scrollables = that.thead = that.tbody = that.element = that.table = that.content = that.footer = that.wrapper = that.lockedTable = that.lockedContent = that.lockedHeader = that.lockedFooter = that._groupableClickHandler = that._setContentWidthHandler = null;\n            },\n            getOptions: function () {\n                var options = this.options;\n                options.dataSource = null;\n                var result = extend(true, {}, this.options);\n                result.columns = kendo.deepExtend([], this.columns);\n                var dataSource = this.dataSource;\n                var initialData = dataSource.options.data && dataSource._data;\n                dataSource.options.data = null;\n                result.dataSource = $.extend(true, {}, dataSource.options);\n                dataSource.options.data = initialData;\n                result.dataSource.data = initialData;\n                result.dataSource.page = dataSource.page();\n                result.dataSource.filter = dataSource.filter();\n                result.dataSource.pageSize = dataSource.pageSize();\n                result.dataSource.sort = dataSource.sort();\n                result.dataSource.group = dataSource.group();\n                result.dataSource.aggregate = dataSource.aggregate();\n                if (result.dataSource.transport) {\n                    result.dataSource.transport.dataSource = null;\n                }\n                if (result.pageable && result.pageable.pageSize) {\n                    result.pageable.pageSize = dataSource.pageSize();\n                }\n                result.$angular = undefined;\n                return result;\n            },\n            setOptions: function (options) {\n                var currentOptions = this.getOptions();\n                kendo.deepExtend(currentOptions, options);\n                if (!options.dataSource) {\n                    currentOptions.dataSource = this.dataSource;\n                }\n                var wrapper = this.wrapper;\n                var events = this._events;\n                var element = this.element;\n                this.destroy();\n                this.options = null;\n                if (this._isMobile) {\n                    var mobileWrapper = wrapper.closest(kendo.roleSelector('pane')).parent();\n                    mobileWrapper.after(wrapper);\n                    mobileWrapper.remove();\n                    wrapper.removeClass('k-grid-mobile');\n                }\n                if (wrapper[0] !== element[0]) {\n                    wrapper.before(element);\n                    wrapper.remove();\n                }\n                element.empty();\n                this.init(element, currentOptions, events);\n                this._setEvents(currentOptions);\n            },\n            items: function () {\n                if (this.lockedContent) {\n                    return this._items(this.tbody).add(this._items(this.lockedTable.children('tbody')));\n                } else {\n                    return this._items(this.tbody);\n                }\n            },\n            _items: function (container) {\n                return container.children().filter(function () {\n                    var tr = $(this);\n                    return !tr.hasClass('k-grouping-row') && !tr.hasClass('k-detail-row') && !tr.hasClass('k-group-footer');\n                });\n            },\n            dataItems: function () {\n                var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n                if (this.lockedContent) {\n                    var n = dataItems.length, tmp = new Array(2 * n);\n                    for (var i = n; --i >= 0;) {\n                        tmp[i] = tmp[i + n] = dataItems[i];\n                    }\n                    dataItems = tmp;\n                }\n                return dataItems;\n            },\n            _destroyColumnAttachments: function () {\n                var that = this;\n                that.resizeHandle = null;\n                if (!that.thead) {\n                    return;\n                }\n                this.angular('cleanup', function () {\n                    return { elements: that.thead.get() };\n                });\n                that.thead.add(that.lockedHeader).find('th').each(function () {\n                    var th = $(this), filterMenu = th.data('kendoFilterMenu'), sortable = th.data('kendoColumnSorter'), columnMenu = th.data('kendoColumnMenu');\n                    if (filterMenu) {\n                        filterMenu.destroy();\n                    }\n                    if (sortable) {\n                        sortable.destroy();\n                    }\n                    if (columnMenu) {\n                        columnMenu.destroy();\n                    }\n                });\n            },\n            _attachCustomCommandsEvent: function () {\n                var that = this, columns = leafColumns(that.columns || []), command, idx, length;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    command = columns[idx].command;\n                    if (command) {\n                        attachCustomCommandEvent(that, that.wrapper, command);\n                    }\n                }\n            },\n            _aria: function () {\n                var id = this.element.attr('id') || 'aria';\n                if (id) {\n                    this._cellId = id + '_active_cell';\n                }\n            },\n            _element: function () {\n                var that = this, table = that.element;\n                if (!table.is('table')) {\n                    if (that.options.scrollable) {\n                        table = that.element.find('> .k-grid-content > table');\n                    } else {\n                        table = that.element.children('table');\n                    }\n                    if (!table.length) {\n                        table = $('<table />').appendTo(that.element);\n                    }\n                }\n                if (isIE7) {\n                    table.attr('cellspacing', 0);\n                }\n                that.table = table.attr('role', that._hasDetails() ? 'treegrid' : 'grid');\n                that._wrapper();\n            },\n            _createResizeHandle: function (container, th) {\n                var that = this;\n                var indicatorWidth = that.options.columnResizeHandleWidth;\n                var scrollable = that.options.scrollable;\n                var resizeHandle = that.resizeHandle;\n                var groups = this._groups();\n                var left;\n                if (resizeHandle && that.lockedContent && resizeHandle.data('th')[0] !== th[0]) {\n                    resizeHandle.off(NS).remove();\n                    resizeHandle = null;\n                }\n                if (!resizeHandle) {\n                    resizeHandle = that.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>');\n                    container.append(resizeHandle);\n                }\n                if (!isRtl) {\n                    left = th[0].offsetWidth;\n                    var cells = leafDataCells(th.closest('thead')).filter(':visible');\n                    for (var idx = 0; idx < cells.length; idx++) {\n                        if (cells[idx] == th[0]) {\n                            break;\n                        }\n                        left += cells[idx].offsetWidth;\n                    }\n                    if (groups > 0) {\n                        left += outerWidth(container.find('.k-group-cell:first')) * groups;\n                    }\n                    if (that._hasDetails()) {\n                        left += outerWidth(container.find('.k-hierarchy-cell:first'));\n                    }\n                } else {\n                    left = th.position().left;\n                    if (scrollable) {\n                        var headerWrap = th.closest('.k-grid-header-wrap, .k-grid-header-locked'), ieCorrection = browser.msie ? headerWrap.scrollLeft() : 0, webkitCorrection = browser.webkit ? headerWrap[0].scrollWidth - headerWrap[0].offsetWidth - headerWrap.scrollLeft() : 0, firefoxCorrection = browser.mozilla ? headerWrap[0].scrollWidth - headerWrap[0].offsetWidth - (headerWrap[0].scrollWidth - headerWrap[0].offsetWidth - headerWrap.scrollLeft()) : 0;\n                        left -= webkitCorrection - firefoxCorrection + ieCorrection;\n                    }\n                }\n                resizeHandle.css({\n                    top: th.position().top,\n                    left: left - indicatorWidth,\n                    height: outerHeight(th),\n                    width: indicatorWidth * 3\n                }).data('th', th).show();\n                resizeHandle.off('dblclick' + NS).on('dblclick' + NS, function () {\n                    that._autoFitLeafColumn(th.data('index'));\n                });\n            },\n            _positionColumnResizeHandle: function () {\n                var that = this, indicatorWidth = that.options.columnResizeHandleWidth, lockedHead = that.lockedHeader ? that.lockedHeader.find('thead:first') : $();\n                that.thead.add(lockedHead).on('mousemove' + NS, 'th', function (e) {\n                    var th = $(this);\n                    if (th.hasClass('k-group-cell') || th.hasClass('k-hierarchy-cell')) {\n                        return;\n                    }\n                    function getPageZoomStyle() {\n                        var docZoom = parseFloat($(document.documentElement).css('zoom'));\n                        if (isNaN(docZoom)) {\n                            docZoom = 1;\n                        }\n                        var bodyZoom = parseFloat($(document.body).css('zoom'));\n                        if (isNaN(bodyZoom)) {\n                            bodyZoom = 1;\n                        }\n                        return docZoom * bodyZoom;\n                    }\n                    var clientX = e.clientX / getPageZoomStyle(), winScrollLeft = $(window).scrollLeft(), position = th.offset().left + (!isRtl ? this.offsetWidth : 0);\n                    if (clientX + winScrollLeft > position - indicatorWidth && clientX + winScrollLeft < position + indicatorWidth) {\n                        that._createResizeHandle(th.closest('div'), th);\n                    } else if (that.resizeHandle) {\n                        that.resizeHandle.hide();\n                    } else {\n                        cursor(that.wrapper, '');\n                    }\n                });\n            },\n            _resizeHandleDocumentClick: function (e) {\n                if ($(e.target).closest('.k-column-active').length) {\n                    return;\n                }\n                $(document).off(e);\n                this._hideResizeHandle();\n            },\n            _hideResizeHandle: function () {\n                if (this.resizeHandle) {\n                    this.resizeHandle.data('th').removeClass('k-column-active');\n                    if (this.lockedContent && !this._isMobile) {\n                        this.resizeHandle.off(NS).remove();\n                        this.resizeHandle = null;\n                    } else {\n                        this.resizeHandle.hide();\n                    }\n                }\n            },\n            _positionColumnResizeHandleTouch: function () {\n                var that = this, lockedHead = that.lockedHeader ? that.lockedHeader.find('thead:first') : $();\n                that._resizeUserEvents = new kendo.UserEvents(lockedHead.add(that.thead), {\n                    filter: 'th:not(.k-group-cell):not(.k-hierarchy-cell)',\n                    threshold: 10,\n                    hold: function (e) {\n                        var th = $(e.target);\n                        e.preventDefault();\n                        th.addClass('k-column-active');\n                        that._createResizeHandle(th.closest('div'), th);\n                        if (!that._resizeHandleDocumentClickHandler) {\n                            that._resizeHandleDocumentClickHandler = proxy(that._resizeHandleDocumentClick, that);\n                        }\n                        $(document).on('click', that._resizeHandleDocumentClickHandler);\n                    }\n                });\n            },\n            _resizable: function () {\n                var that = this, options = that.options, container, columnStart, columnWidth, columnMinWidth, gridWidth, isMobile = this._isMobile, scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0, isLocked, col, th;\n                if (options.resizable) {\n                    container = options.scrollable ? that.wrapper.find('.k-grid-header-wrap:first') : that.wrapper;\n                    if (isMobile) {\n                        that._positionColumnResizeHandleTouch(container);\n                    } else {\n                        that._positionColumnResizeHandle(container);\n                    }\n                    if (that.resizable) {\n                        that.resizable.destroy();\n                    }\n                    that.resizable = new ui.Resizable(container.add(that.lockedHeader), {\n                        handle: (!!options.scrollable ? '' : '>') + '.k-resize-handle',\n                        hint: function (handle) {\n                            return $('<div class=\"k-grid-resize-indicator\" />').css({ height: outerHeight(handle.data('th')) + that.tbody.attr('clientHeight') });\n                        },\n                        start: function (e) {\n                            th = $(e.currentTarget).data('th');\n                            if (isMobile) {\n                                that._hideResizeHandle();\n                            }\n                            var header = th.closest('table'), index = $.inArray(th[0], leafDataCells(th.closest('thead')).filter(':visible'));\n                            isLocked = header.parent().hasClass('k-grid-header-locked');\n                            var contentTable = isLocked ? that.lockedTable : that.table, footer = that.footer || $();\n                            if (that.footer && that.lockedContent) {\n                                footer = isLocked ? that.footer.children('.k-grid-footer-locked') : that.footer.children('.k-grid-footer-wrap');\n                            }\n                            cursor(that.wrapper, 'col-resize');\n                            if (options.scrollable) {\n                                col = header.find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')').add(contentTable.children('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')')).add(footer.find('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')'));\n                            } else {\n                                col = contentTable.children('colgroup').find('col:not(.k-group-col):not(.k-hierarchy-col):eq(' + index + ')');\n                            }\n                            columnStart = e.x.location;\n                            columnWidth = outerWidth(th);\n                            columnMinWidth = leafColumns(that.columns)[index].minResizableWidth || 10;\n                            gridWidth = isLocked ? outerWidth(contentTable.children('tbody')) : outerWidth(that.tbody);\n                            if (browser.webkit) {\n                                that.wrapper.addClass('k-grid-column-resizing');\n                            }\n                        },\n                        resize: function (e) {\n                            var rtlMultiplier = isRtl ? -1 : 1, currentWidth = columnWidth + e.x.location * rtlMultiplier - columnStart * rtlMultiplier;\n                            if (options.scrollable) {\n                                var footer;\n                                if (isLocked && that.lockedFooter) {\n                                    footer = that.lockedFooter.children('table');\n                                } else if (that.footer) {\n                                    footer = that.footer.find('>.k-grid-footer-wrap>table');\n                                }\n                                if (!footer || !footer[0]) {\n                                    footer = $();\n                                }\n                                var header = th.closest('table');\n                                var contentTable = isLocked ? that.lockedTable : that.table;\n                                var constrain = false;\n                                var totalWidth = that.wrapper.width() - scrollbar;\n                                var width = currentWidth;\n                                if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                                    width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                                    if (width < 0) {\n                                        width = currentWidth;\n                                    }\n                                    constrain = true;\n                                }\n                                if (width > 10 && width >= columnMinWidth) {\n                                    col.css('width', width);\n                                    if (gridWidth) {\n                                        if (constrain) {\n                                            width = totalWidth - scrollbar * 2;\n                                        } else {\n                                            width = gridWidth + e.x.location * rtlMultiplier - columnStart * rtlMultiplier;\n                                        }\n                                        contentTable.add(header).add(footer).css('width', width);\n                                        if (!isLocked) {\n                                            that._footerWidth = width;\n                                        }\n                                    }\n                                }\n                            } else if (currentWidth > 10 && currentWidth >= columnMinWidth) {\n                                col.css('width', currentWidth);\n                            }\n                        },\n                        resizeend: function () {\n                            var newWidth = outerWidth(th), column, header;\n                            cursor(that.wrapper, '');\n                            if (browser.webkit) {\n                                that.wrapper.removeClass('k-grid-column-resizing');\n                            }\n                            if (columnWidth != newWidth) {\n                                header = that.lockedHeader ? that.lockedHeader.find('thead:first tr:first').add(that.thead.find('tr:first')) : th.parent();\n                                var index = th.attr(kendo.attr('index'));\n                                if (!index) {\n                                    index = header.find('th:not(.k-group-cell):not(.k-hierarchy-cell)').index(th);\n                                }\n                                column = leafColumns(that.columns)[index];\n                                column.width = newWidth;\n                                that.trigger(COLUMNRESIZE, {\n                                    column: column,\n                                    oldWidth: columnWidth,\n                                    newWidth: newWidth\n                                });\n                                that._applyLockedContainersWidth();\n                                that._syncLockedContentHeight();\n                                that._syncLockedHeaderHeight();\n                            }\n                            that._hideResizeHandle();\n                            th = null;\n                        }\n                    });\n                }\n            },\n            _draggable: function () {\n                var that = this;\n                if (that.options.reorderable) {\n                    if (that._draggableInstance) {\n                        that._draggableInstance.destroy();\n                    }\n                    var header = that.wrapper.children('.k-grid-header');\n                    that._draggableInstance = that.wrapper.kendoDraggable({\n                        group: kendo.guid(),\n                        autoScroll: true,\n                        filter: that.content ? '.k-grid-header:first ' + HEADERCELLS : 'table:first>.k-grid-header ' + HEADERCELLS,\n                        dragstart: function () {\n                            header.children('.k-grid-header-wrap').unbind('scroll' + NS + 'scrolling').bind('scroll' + NS + 'scrolling', function (e) {\n                                if (that.virtualScrollable) {\n                                    that.content.find('>.k-virtual-scrollable-wrap').scrollLeft(this.scrollLeft);\n                                } else {\n                                    that.scrollables.not(e.currentTarget).scrollLeft(this.scrollLeft);\n                                }\n                            });\n                        },\n                        dragend: function () {\n                            header.children('.k-grid-header-wrap').unbind('scroll' + NS + 'scrolling');\n                        },\n                        drag: function () {\n                            that._hideResizeHandle();\n                        },\n                        hint: function (target) {\n                            var title = target.attr(kendo.attr('title'));\n                            if (title) {\n                                title = kendo.htmlEncode(title);\n                            }\n                            return $('<div class=\"k-header k-drag-clue\" />').css({\n                                width: target.width(),\n                                paddingLeft: target.css('paddingLeft'),\n                                paddingRight: target.css('paddingRight'),\n                                lineHeight: target.height() + 'px',\n                                paddingTop: target.css('paddingTop'),\n                                paddingBottom: target.css('paddingBottom')\n                            }).html(title || target.attr(kendo.attr('field')) || target.text()).prepend('<span class=\"k-icon k-drag-status k-i-cancel\" />');\n                        }\n                    }).data('kendoDraggable');\n                }\n            },\n            _reorderable: function () {\n                var that = this;\n                if (that.options.reorderable) {\n                    if (that.wrapper.data('kendoReorderable')) {\n                        that.wrapper.data('kendoReorderable').destroy();\n                    }\n                    var targetParentContainerIndex = function (columns, sourceIndex, targetIndex) {\n                        var column = columns[sourceIndex];\n                        var target = columns[targetIndex];\n                        var parent = columnParent(column, that.columns);\n                        columns = parent ? parent.columns : that.columns;\n                        return inArray(target, columns);\n                    };\n                    that.wrapper.kendoReorderable({\n                        draggable: that._draggableInstance,\n                        dragOverContainers: function (sourceIndex, targetIndex) {\n                            var columns = flatColumnsInDomOrder(that.columns);\n                            return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, sourceIndex, targetIndex) > -1;\n                        },\n                        inSameContainer: function (e) {\n                            return $(e.source).parent()[0] === $(e.target).parent()[0] && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), e.sourceIndex, e.targetIndex) > -1;\n                        },\n                        change: function (e) {\n                            var columns = flatColumnsInDomOrder(that.columns);\n                            var column = columns[e.oldIndex];\n                            var newIndex = targetParentContainerIndex(columns, e.oldIndex, e.newIndex);\n                            that.trigger(COLUMNREORDER, {\n                                newIndex: newIndex,\n                                oldIndex: inArray(column, columns),\n                                column: column\n                            });\n                            that.reorderColumn(newIndex, column, e.position === 'before');\n                        }\n                    });\n                }\n            },\n            _reorderHeader: function (sources, target, before) {\n                var that = this;\n                var sourcePosition = columnPosition(sources[0], that.columns);\n                var destPosition = columnPosition(target, that.columns);\n                var leafs = [];\n                for (var idx = 0; idx < sources.length; idx++) {\n                    if (sources[idx].columns) {\n                        leafs = leafs.concat(sources[idx].columns);\n                    }\n                }\n                var ths = elements(that.lockedHeader, that.thead, 'tr:eq(' + sourcePosition.row + ')>th.k-header:not(.k-group-cell,.k-hierarchy-cell)');\n                var sourceLockedColumns = lockedColumns(sources).length;\n                var targetLockedColumns = lockedColumns([target]).length;\n                if (leafs.length) {\n                    if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                        moveCellsBetweenContainers(sources, target, leafs, that.columns, that.lockedHeader.find('thead'), that.thead, this._groups());\n                    } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                        moveCellsBetweenContainers(sources, target, leafs, that.columns, that.thead, that.lockedHeader.find('thead'), this._groups());\n                    }\n                    if (target.columns || sourcePosition.cell - destPosition.cell > 1 || destPosition.cell - sourcePosition.cell > 1) {\n                        target = findReorderTarget(that.columns, target, sources[0], before);\n                        if (target) {\n                            that._reorderHeader(leafs, target, before);\n                        }\n                    }\n                } else if (sourceLockedColumns !== targetLockedColumns) {\n                    updateCellRowSpan(ths[sourcePosition.cell], that.columns, sourceLockedColumns);\n                }\n                reorder(ths, sourcePosition.cell, destPosition.cell, before, sources.length);\n            },\n            _reorderContent: function (sources, destination, before) {\n                var that = this;\n                var lockedRows = $();\n                var source = sources[0];\n                var visibleSources = visibleColumns(sources);\n                var sourceIndex = inArray(source, leafColumns(that.columns));\n                var destIndex = inArray(destination, leafColumns(that.columns));\n                var colSourceIndex = inArray(source, visibleLeafColumns(that.columns));\n                var colDest = inArray(destination, visibleLeafColumns(that.columns));\n                var lockedCount = lockedColumns(that.columns).length;\n                var isLocked = !!destination.locked;\n                var footer = that.footer || that.wrapper.find('.k-grid-footer');\n                var headerCol, footerCol;\n                headerCol = footerCol = colDest;\n                if (destination.hidden) {\n                    if (isLocked) {\n                        colDest = that.lockedTable.find('colgroup');\n                        headerCol = that.lockedHeader.find('colgroup');\n                        footerCol = $(that.lockedFooter).find('>table>colgroup');\n                    } else {\n                        colDest = that.tbody.prev();\n                        headerCol = that.thead.prev();\n                        footerCol = footer.find('.k-grid-footer-wrap').find('>table>colgroup');\n                    }\n                }\n                if (that._hasFilterRow()) {\n                    reorder(that.wrapper.find('.k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)'), sourceIndex, destIndex, before, sources.length);\n                }\n                reorder(elements(that.lockedHeader, that.thead.prev(), 'col:not(.k-group-col,.k-hierarchy-col)'), colSourceIndex, headerCol, before, visibleSources.length);\n                if (that.options.scrollable) {\n                    reorder(elements(that.lockedTable, that.tbody.prev(), 'col:not(.k-group-col,.k-hierarchy-col)'), colSourceIndex, colDest, before, visibleSources.length);\n                }\n                if (footer && footer.length) {\n                    reorder(elements(that.lockedFooter, footer.find('.k-grid-footer-wrap'), '>table>colgroup>col:not(.k-group-col,.k-hierarchy-col)'), colSourceIndex, footerCol, before, visibleSources.length);\n                    reorder(footer.find('.k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)'), sourceIndex, destIndex, before, sources.length);\n                }\n                var rows = that.tbody.children(':not(.k-grouping-row,.k-detail-row)');\n                if (that.lockedTable) {\n                    if (lockedCount > destIndex) {\n                        if (lockedCount <= sourceIndex) {\n                            updateColspan(that.lockedTable.find('>tbody>tr.k-grouping-row'), that.table.find('>tbody>tr.k-grouping-row'), sources.length);\n                        }\n                    } else if (lockedCount > sourceIndex) {\n                        updateColspan(that.table.find('>tbody>tr.k-grouping-row'), that.lockedTable.find('>tbody>tr.k-grouping-row'), sources.length);\n                    }\n                    lockedRows = that.lockedTable.find('>tbody>tr:not(.k-grouping-row,.k-detail-row)');\n                }\n                for (var idx = 0, length = rows.length; idx < length; idx += 1) {\n                    reorder(elements(lockedRows[idx], rows[idx], '>td:not(.k-group-cell,.k-hierarchy-cell)'), sourceIndex, destIndex, before, sources.length);\n                }\n            },\n            _autoFitLeafColumn: function (leafIndex) {\n                this.autoFitColumn(leafColumns(this.columns)[leafIndex]);\n            },\n            autoFitColumn: function (column) {\n                var that = this, options = that.options, columns = that.columns, index, th, headerTable, isLocked, visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find('>table>thead')).filter(isCellVisible).length : 0, col, contentDiv, scrollLeft, notGroupOrHierarchyCol = 'col:not(.k-group-col):not(.k-hierarchy-col)', notGroupOrHierarchyVisibleCell = 'td:visible:not(.k-group-cell):not(.k-hierarchy-cell)';\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(flatColumns(columns), function (item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(flatColumns(columns), function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || !isVisible(column)) {\n                    return;\n                }\n                index = inArray(column, leafColumns(columns));\n                isLocked = column.locked;\n                if (isLocked) {\n                    headerTable = that.lockedHeader.children('table');\n                } else {\n                    headerTable = that.thead.parent();\n                }\n                th = headerTable.find('[data-index=\\'' + index + '\\']');\n                var contentTable = isLocked ? that.lockedTable : that.table, footer = that.footer || $();\n                if (that.footer && that.lockedContent) {\n                    footer = isLocked ? that.footer.children('.k-grid-footer-locked') : that.footer.children('.k-grid-footer-wrap');\n                }\n                var footerTable = footer.find('table').first();\n                if (that.lockedHeader && !isLocked) {\n                    index -= visibleLocked;\n                }\n                for (var j = 0; j < columns.length; j++) {\n                    if (columns[j] === column) {\n                        break;\n                    } else {\n                        if (columns[j].hidden) {\n                            index--;\n                        }\n                    }\n                }\n                if (options.scrollable) {\n                    col = headerTable.find(notGroupOrHierarchyCol).eq(index).add(contentTable.children('colgroup').find(notGroupOrHierarchyCol).eq(index)).add(footerTable.find('colgroup').find(notGroupOrHierarchyCol).eq(index));\n                    if (!isLocked) {\n                        contentDiv = contentTable.parent();\n                        scrollLeft = contentDiv.scrollLeft();\n                    }\n                } else {\n                    col = contentTable.children('colgroup').find(notGroupOrHierarchyCol).eq(index);\n                }\n                var tables = headerTable.add(contentTable).add(footerTable);\n                var oldColumnWidth = outerWidth(th);\n                col.width('');\n                tables.css('table-layout', 'fixed');\n                col.width('auto');\n                tables.addClass('k-autofitting');\n                tables.css('table-layout', '');\n                var newColumnWidth = Math.ceil(Math.max(outerWidth(th), outerWidth(contentTable.find('tr:not(.k-grouping-row)').eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)), outerWidth(footerTable.find('tr').eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)))) + 1;\n                col.width(newColumnWidth);\n                column.width = newColumnWidth;\n                if (options.scrollable) {\n                    var cols = headerTable.find('col'), colWidth, totalWidth = 0;\n                    for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n                        if (colWidth && colWidth.indexOf('%') == -1) {\n                            totalWidth += parseInt(colWidth, 10);\n                        } else {\n                            totalWidth = 0;\n                            break;\n                        }\n                    }\n                    if (totalWidth) {\n                        tables.each(function () {\n                            this.style.width = totalWidth + 'px';\n                        });\n                    }\n                }\n                if (browser.msie && browser.version == 8) {\n                    tables.css('display', 'inline-table');\n                    setTimeout(function () {\n                        tables.css('display', 'table');\n                    }, 1);\n                }\n                tables.removeClass('k-autofitting');\n                if (scrollLeft) {\n                    contentDiv.scrollLeft(scrollLeft);\n                }\n                that.trigger(COLUMNRESIZE, {\n                    column: column,\n                    oldWidth: oldColumnWidth,\n                    newWidth: newColumnWidth\n                });\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n            },\n            reorderColumn: function (destIndex, column, before) {\n                var that = this, parent = columnParent(column, that.columns), columns = parent ? parent.columns : that.columns, sourceIndex = inArray(column, columns), destColumn = columns[destIndex], lockChanged, isLocked = !!destColumn.locked, lockedCount = lockedColumns(that.columns).length;\n                if (sourceIndex === destIndex) {\n                    return;\n                }\n                if (!column.locked && isLocked && nonLockedColumns(that.columns).length == 1) {\n                    return;\n                }\n                if (column.locked && !isLocked && lockedCount == 1) {\n                    return;\n                }\n                that._hideResizeHandle();\n                if (before === undefined) {\n                    before = destIndex < sourceIndex;\n                }\n                var sourceColumns = [column];\n                that._reorderHeader(sourceColumns, destColumn, before);\n                if (that.lockedHeader) {\n                    removeEmptyRows(that.thead);\n                    removeEmptyRows(that.lockedHeader);\n                }\n                if (destColumn.columns) {\n                    destColumn = leafColumns(destColumn.columns);\n                    destColumn = destColumn[before ? 0 : destColumn.length - 1];\n                }\n                if (column.columns) {\n                    sourceColumns = leafColumns(column.columns);\n                }\n                that._reorderContent(sourceColumns, destColumn, before);\n                lockChanged = !!column.locked;\n                lockChanged = lockChanged != isLocked;\n                column.locked = isLocked;\n                columns.splice(before ? destIndex : destIndex + 1, 0, column);\n                columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n                that._templates();\n                that._updateColumnCellIndex();\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedHeaderHeight();\n                that._syncLockedContentHeight();\n                that._updateFirstColumnClass();\n                if (!lockChanged) {\n                    return;\n                }\n                if (isLocked) {\n                    that.trigger(COLUMNLOCK, { column: column });\n                } else {\n                    that.trigger(COLUMNUNLOCK, { column: column });\n                }\n            },\n            _updateColumnCellIndex: function () {\n                var header;\n                var offset = 0;\n                if (this.lockedHeader) {\n                    header = this.lockedHeader.find('thead');\n                    offset = updateCellIndex(header, lockedColumns(this.columns));\n                }\n                updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n            },\n            lockColumn: function (column) {\n                var columns = this.columns;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || column.locked || column.hidden) {\n                    return;\n                }\n                var index = lockedColumns(columns).length - 1;\n                this.reorderColumn(index, column, false);\n            },\n            unlockColumn: function (column) {\n                var columns = this.columns;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else {\n                    column = grep(columns, function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || !column.locked || column.hidden) {\n                    return;\n                }\n                var index = lockedColumns(columns).length;\n                this.reorderColumn(index, column, true);\n            },\n            cellIndex: function (td) {\n                var lockedColumnOffset = 0;\n                if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                    lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n                }\n                return $(td).parent().children('td:not(.k-group-cell,.k-hierarchy-cell)').index(td) + lockedColumnOffset;\n            },\n            _modelForContainer: function (container) {\n                container = $(container);\n                if (!container.is('tr') && this._editMode() !== 'popup') {\n                    container = container.closest('tr');\n                }\n                var id = container.attr(kendo.attr('uid'));\n                return this.dataSource.getByUid(id);\n            },\n            _editable: function () {\n                var that = this, selectable = that.selectable && that.selectable.options.multiple, editable = that.options.editable, handler = function () {\n                        var target = activeElement(), cell = that._editContainer;\n                        if (cell && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest('.k-animation-container').length) {\n                            if (that.editable.end()) {\n                                that.closeCell();\n                            }\n                        }\n                    };\n                if (editable) {\n                    this.wrapper.addClass('k-editable');\n                    var mode = that._editMode();\n                    if (mode === 'incell') {\n                        if (editable.update !== false) {\n                            that.wrapper.on(CLICK + NS, 'tr:not(.k-grouping-row) > td', function (e) {\n                                var td = $(this), isLockedCell = that.lockedTable && td.closest('table')[0] === that.lockedTable[0];\n                                if (td.hasClass('k-hierarchy-cell') || td.hasClass('k-detail-cell') || td.hasClass('k-group-cell') || td.hasClass('k-edit-cell') || td.has('a.k-grid-delete').length || td.has('button.k-grid-delete').length || td.closest('tbody')[0] !== that.tbody[0] && !isLockedCell || $(e.target).is(':input')) {\n                                    return;\n                                }\n                                if (that.editable) {\n                                    if (that.editable.end()) {\n                                        if (selectable) {\n                                            $(activeElement()).blur();\n                                        }\n                                        that.closeCell();\n                                        that.editCell(td);\n                                    }\n                                } else {\n                                    that.editCell(td);\n                                }\n                            }).on('focusin' + NS, function () {\n                                if (!$.contains(this, activeElement())) {\n                                    clearTimeout(that.timer);\n                                    that.timer = null;\n                                }\n                            }).on('focusout' + NS, function () {\n                                that.timer = setTimeout(handler, 1);\n                            });\n                        }\n                    } else {\n                        if (editable.update !== false) {\n                            that.wrapper.on(CLICK + NS, 'tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit', function (e) {\n                                e.preventDefault();\n                                that.editRow($(this).closest('tr'));\n                            });\n                        }\n                    }\n                    if (editable.destroy !== false) {\n                        that.wrapper.on(CLICK + NS, 'tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete', function (e) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            that.removeRow($(this).closest('tr'));\n                        });\n                    } else {\n                        that.wrapper.on(CLICK + NS, 'tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete', function (e) {\n                            e.stopPropagation();\n                            if (!that._confirmation()) {\n                                e.preventDefault();\n                            }\n                        });\n                    }\n                }\n            },\n            editCell: function (cell) {\n                cell = $(cell);\n                var that = this, column = leafColumns(that.columns)[that.cellIndex(cell)], model = that._modelForContainer(cell);\n                that.closeCell();\n                if (model && isColumnEditable(column, model) && !column.command) {\n                    if (that.trigger(BEFOREEDIT, { model: model })) {\n                        return;\n                    }\n                    that._attachModelChange(model);\n                    that._editContainer = cell;\n                    that.editable = cell.addClass('k-edit-cell').kendoEditable({\n                        fields: {\n                            field: column.field,\n                            format: column.format,\n                            editor: column.editor,\n                            values: column.values\n                        },\n                        model: model,\n                        target: that,\n                        change: function (e) {\n                            if (that.trigger(SAVE, {\n                                    values: e.values,\n                                    container: cell,\n                                    model: model\n                                })) {\n                                e.preventDefault();\n                            }\n                        }\n                    }).data('kendoEditable');\n                    var tr = cell.parent().addClass('k-grid-edit-row');\n                    if (that.lockedContent) {\n                        adjustRowHeight(tr[0], that._relatedRow(tr).addClass('k-grid-edit-row')[0]);\n                    }\n                    that.trigger(EDIT, {\n                        container: cell,\n                        model: model\n                    });\n                }\n            },\n            _adjustLockedHorizontalScrollBar: function () {\n                var table = this.table, content = table.parent();\n                var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n                this.lockedContent.height(content.height() - scrollbar);\n            },\n            _syncLockedContentHeight: function () {\n                if (this.lockedTable) {\n                    if (!this.touchScroller) {\n                        this._adjustLockedHorizontalScrollBar();\n                    }\n                    this._adjustRowsHeight(this.table, this.lockedTable);\n                }\n            },\n            _syncLockedHeaderHeight: function () {\n                if (this.lockedHeader) {\n                    var lockedTable = this.lockedHeader.children('table');\n                    var table = this.thead.parent();\n                    this._adjustRowsHeight(lockedTable, table);\n                    syncTableHeight(lockedTable, table);\n                }\n            },\n            _syncLockedFooterHeight: function () {\n                if (this.lockedFooter && this.footer && this.footer.length) {\n                    this._adjustRowsHeight(this.lockedFooter.children('table'), this.footer.find('.k-grid-footer-wrap > table'));\n                }\n            },\n            _destroyEditable: function () {\n                var that = this;\n                var destroy = function () {\n                    if (that.editable) {\n                        var container = that.editView ? that.editView.element : that._editContainer;\n                        if (container) {\n                            container.off(CLICK + NS, 'a.k-grid-cancel', that._editCancelClickHandler);\n                            container.off(CLICK + NS, 'a.k-grid-update', that._editUpdateClickHandler);\n                        }\n                        that._detachModelChange();\n                        that.editable.destroy();\n                        that.editable = null;\n                        that._editContainer = null;\n                        that._destroyEditView();\n                    }\n                };\n                if (that.editable) {\n                    if (that._editMode() === 'popup' && !that._isMobile) {\n                        that._editContainer.data('kendoWindow').bind('deactivate', destroy).close();\n                    } else {\n                        destroy();\n                    }\n                }\n                if (that._actionSheet) {\n                    that._actionSheet.destroy();\n                    that._actionSheet = null;\n                }\n            },\n            _destroyEditView: function () {\n                if (this.editView) {\n                    this.editView.purge();\n                    this.editView = null;\n                    this.pane.navigate('');\n                }\n            },\n            _attachModelChange: function (model) {\n                var that = this;\n                that._modelChangeHandler = function (e) {\n                    that._modelChange({\n                        field: e.field,\n                        model: this\n                    });\n                };\n                model.bind('change', that._modelChangeHandler);\n            },\n            _detachModelChange: function () {\n                var that = this, container = that._editContainer, model = that._modelForContainer(container);\n                if (model) {\n                    model.unbind(CHANGE, that._modelChangeHandler);\n                }\n            },\n            closeCell: function (isCancel) {\n                var that = this, cell = that._editContainer, id, column, tr, model;\n                if (!cell) {\n                    return;\n                }\n                id = cell.closest('tr').attr(kendo.attr('uid'));\n                model = that.dataSource.getByUid(id);\n                if (isCancel && that.trigger('cancel', {\n                        container: cell,\n                        model: model\n                    })) {\n                    return;\n                }\n                that.trigger(CELLCLOSE, {\n                    type: isCancel ? 'cancel' : 'save',\n                    model: model,\n                    container: cell\n                });\n                cell.removeClass('k-edit-cell');\n                column = leafColumns(that.columns)[that.cellIndex(cell)];\n                tr = cell.parent().removeClass('k-grid-edit-row');\n                that._destroyEditable();\n                that._displayCell(cell, column, model);\n                if (cell.hasClass('k-dirty-cell')) {\n                    $('<span class=\"k-dirty\"/>').prependTo(cell);\n                }\n                that.trigger('itemChange', {\n                    item: tr,\n                    data: model,\n                    ns: ui\n                });\n                if (that.lockedContent) {\n                    adjustRowHeight(tr.css('height', '')[0], that._relatedRow(tr).css('height', '')[0]);\n                }\n            },\n            _displayCell: function (cell, column, dataItem) {\n                var that = this, state = {\n                        storage: {},\n                        count: 0\n                    }, settings = extend({}, kendo.Template, that.options.templateSettings), tmpl = kendo.template(that._cellTmpl(column, state), settings);\n                if (state.count > 0) {\n                    tmpl = proxy(tmpl, state.storage);\n                }\n                cell.empty().html(tmpl(dataItem));\n                that.angular('compile', function () {\n                    return {\n                        elements: cell,\n                        data: [{ dataItem: dataItem }]\n                    };\n                });\n            },\n            removeRow: function (row) {\n                if (!this._confirmation(row)) {\n                    return;\n                }\n                this._removeRow(row);\n            },\n            _removeRow: function (row) {\n                var that = this, model, mode = that._editMode();\n                if (mode !== 'incell') {\n                    that.cancelRow();\n                }\n                row = $(row);\n                if (that.lockedContent) {\n                    row = row.add(that._relatedRow(row));\n                }\n                row = row.hide();\n                model = that._modelForContainer(row);\n                if (model && !that.trigger(REMOVE, {\n                        row: row,\n                        model: model\n                    })) {\n                    that.dataSource.remove(model);\n                    if (mode === 'inline' || mode === 'popup') {\n                        that.dataSource.sync();\n                    }\n                } else if (mode === 'incell') {\n                    that._destroyEditable();\n                }\n            },\n            _editMode: function () {\n                var mode = 'incell', editable = this.options.editable;\n                if (editable !== true) {\n                    if (typeof editable == 'string') {\n                        mode = editable;\n                    } else {\n                        mode = editable.mode || mode;\n                    }\n                }\n                return mode;\n            },\n            editRow: function (row) {\n                var model;\n                var that = this;\n                if (row instanceof kendo.data.ObservableObject) {\n                    model = row;\n                } else {\n                    row = $(row);\n                    model = that._modelForContainer(row);\n                }\n                var mode = that._editMode();\n                var container;\n                that.cancelRow();\n                if (model) {\n                    row = that.tbody.children('[' + kendo.attr('uid') + '=' + model.uid + ']');\n                    that._attachModelChange(model);\n                    if (mode === 'popup') {\n                        that._createPopupEditor(model);\n                    } else if (mode === 'inline') {\n                        that._createInlineEditor(row, model);\n                    } else if (mode === 'incell') {\n                        $(row).children(DATA_CELL).each(function () {\n                            var cell = $(this);\n                            var column = leafColumns(that.columns)[that.cellIndex(cell)];\n                            model = that._modelForContainer(cell);\n                            if (model && (!model.editable || model.editable(column.field)) && column.field && !column.selectable) {\n                                that.editCell(cell);\n                                return false;\n                            }\n                        });\n                    }\n                    container = that.editView ? that.editView.element : that._editContainer;\n                    if (container) {\n                        if (!this._editCancelClickHandler) {\n                            this._editCancelClickHandler = proxy(this._editCancelClick, this);\n                        }\n                        container.on(CLICK + NS, 'a.k-grid-cancel', this._editCancelClickHandler);\n                        if (!this._editUpdateClickHandler) {\n                            this._editUpdateClickHandler = proxy(this._editUpdateClick, this);\n                        }\n                        container.on(CLICK + NS, 'a.k-grid-update', this._editUpdateClickHandler);\n                    }\n                }\n            },\n            _editUpdateClick: function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                this.saveRow();\n            },\n            _editCancelClick: function (e) {\n                var that = this;\n                var navigatable = that.options.navigatable;\n                var model = that.editable.options.model;\n                var container = that.editView ? that.editView.element : that._editContainer;\n                e.preventDefault();\n                e.stopPropagation();\n                if (that.trigger('cancel', {\n                        container: container,\n                        model: model\n                    })) {\n                    return;\n                }\n                var currentIndex = that.items().index($(that.current()).parent());\n                that.cancelRow();\n                if (navigatable) {\n                    that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                    focusTable(that.table, true);\n                }\n            },\n            _createPopupEditor: function (model) {\n                var that = this;\n                var html = '<div ' + kendo.attr('uid') + '=\"' + model.uid + '\" class=\"k-popup-edit-form' + (that._isMobile ? ' k-mobile-list' : '') + '\"><div class=\"k-edit-form-container\">';\n                var column;\n                var command;\n                var fields = [];\n                var idx;\n                var length;\n                var tmpl;\n                var updateText;\n                var cancelText;\n                var tempCommand;\n                var columns = leafColumns(that.columns);\n                var attr;\n                var editable = that.options.editable;\n                var template = editable.template;\n                var options = isPlainObject(editable) ? editable.window : {};\n                var settings = extend({}, kendo.Template, that.options.templateSettings);\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n                options = options || {};\n                if (template) {\n                    if (typeof template === STRING) {\n                        template = window.unescape(template);\n                    }\n                    html += kendo.template(template, settings)(model);\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.command) {\n                            tempCommand = getCommand(column.command, 'edit');\n                            if (tempCommand) {\n                                command = tempCommand;\n                            }\n                        }\n                    }\n                } else {\n                    for (idx = 0, length = columns.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.selectable) {\n                            continue;\n                        }\n                        if (!column.command) {\n                            html += '<div class=\"k-edit-label\"><label for=\"' + column.field + '\">' + (column.title || column.field || '') + '</label></div>';\n                            if (isColumnEditable(column, model)) {\n                                fields.push({\n                                    field: column.field,\n                                    format: column.format,\n                                    editor: column.editor,\n                                    values: column.values\n                                });\n                                html += '<div ' + kendo.attr('container-for') + '=\"' + column.field + '\" class=\"k-edit-field\"></div>';\n                            } else {\n                                var state = {\n                                    storage: {},\n                                    count: 0\n                                };\n                                tmpl = kendo.template(that._cellTmpl(column, state), settings);\n                                if (state.count > 0) {\n                                    tmpl = proxy(tmpl, state.storage);\n                                }\n                                html += '<div class=\"k-edit-field\">' + tmpl(model) + '</div>';\n                            }\n                        } else if (column.command) {\n                            tempCommand = getCommand(column.command, 'edit');\n                            if (tempCommand) {\n                                command = tempCommand;\n                            }\n                        }\n                    }\n                }\n                if (command) {\n                    if (isPlainObject(command)) {\n                        if (command.text && isPlainObject(command.text)) {\n                            updateText = command.text.update;\n                            cancelText = command.text.cancel;\n                        }\n                        if (command.attr) {\n                            attr = command.attr;\n                        }\n                    }\n                }\n                var container;\n                if (!that._isMobile) {\n                    html += '<div class=\"k-edit-buttons k-state-default\">';\n                    html += that._createButton({\n                        name: 'update',\n                        text: updateText,\n                        attr: attr\n                    }) + that._createButton({\n                        name: 'canceledit',\n                        text: cancelText,\n                        attr: attr\n                    });\n                    html += '</div></div></div>';\n                    container = that._editContainer = $(html).appendTo(that.wrapper).eq(0).kendoWindow(extend({\n                        modal: true,\n                        resizable: false,\n                        draggable: true,\n                        title: 'Edit',\n                        visible: false,\n                        close: function (e) {\n                            if (e.userTriggered) {\n                                e.sender.element.focus();\n                                if (that.trigger('cancel', {\n                                        container: container,\n                                        model: model\n                                    })) {\n                                    e.preventDefault();\n                                    return;\n                                }\n                                var currentIndex = that.items().index($(that.current()).parent());\n                                that.cancelRow();\n                                if (that.options.navigatable) {\n                                    that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                                    focusTable(that.table, true);\n                                }\n                            }\n                        }\n                    }, options));\n                } else {\n                    html += '</div></div>';\n                    that.editView = that.pane.append('<div data-' + kendo.ns + 'role=\"view\" data-' + kendo.ns + 'use-native-scrolling=\"true\" data-' + kendo.ns + 'init-widgets=\"false\" class=\"k-grid-edit-form\">' + '<div data-' + kendo.ns + 'role=\"header\" class=\"k-header\">' + that._createButton({\n                        name: 'update',\n                        text: updateText,\n                        attr: attr\n                    }) + (options.title || 'Edit') + that._createButton({\n                        name: 'canceledit',\n                        text: cancelText,\n                        attr: attr\n                    }) + '</div>' + html + '</div>');\n                    container = that._editContainer = that.editView.element.find('.k-popup-edit-form');\n                }\n                that.editable = that._editContainer.kendoEditable({\n                    fields: fields,\n                    model: model,\n                    clearContainer: false,\n                    target: that\n                }).data('kendoEditable');\n                if (that._isMobile) {\n                    container.find('input[type=checkbox],input[type=radio]').parent('.k-edit-field').addClass('k-check').prev('.k-edit-label').addClass('k-check').click(function () {\n                        $(this).next().children('input').click();\n                    });\n                }\n                that._openPopUpEditor();\n                that.trigger(EDIT, {\n                    container: container,\n                    model: model\n                });\n            },\n            _openPopUpEditor: function () {\n                if (!this._isMobile) {\n                    this._editContainer.data('kendoWindow').center().open();\n                } else {\n                    this.pane.navigate(this.editView, this._editAnimation);\n                }\n            },\n            _createInlineEditor: function (row, model) {\n                var that = this;\n                var column;\n                var cell;\n                var command;\n                var fields = [];\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n                if (that.lockedContent) {\n                    row = row.add(that._relatedRow(row));\n                }\n                row.children(':not(.k-group-cell,.k-hierarchy-cell)').each(function () {\n                    cell = $(this);\n                    column = leafColumns(that.columns)[that.cellIndex(cell)];\n                    if (!column.command && isColumnEditable(column, model)) {\n                        fields.push({\n                            field: column.field,\n                            format: column.format,\n                            editor: column.editor,\n                            values: column.values\n                        });\n                        cell.attr(kendo.attr('container-for'), column.field);\n                        cell.empty();\n                    } else if (column.command) {\n                        command = getCommand(column.command, 'edit');\n                        if (command) {\n                            cell.empty();\n                            var updateText, cancelText, attr;\n                            if (isPlainObject(command)) {\n                                if (command.text && isPlainObject(command.text)) {\n                                    updateText = command.text.update;\n                                    cancelText = command.text.cancel;\n                                }\n                                if (command.attr) {\n                                    attr = command.attr;\n                                }\n                            }\n                            $(that._createButton({\n                                name: 'update',\n                                text: updateText,\n                                attr: attr\n                            }) + that._createButton({\n                                name: 'canceledit',\n                                text: cancelText,\n                                attr: attr\n                            })).appendTo(cell);\n                        }\n                    }\n                });\n                that._editContainer = row;\n                that.editable = new kendo.ui.Editable(row.addClass('k-grid-edit-row'), {\n                    target: that,\n                    fields: fields,\n                    model: model,\n                    clearContainer: false\n                });\n                if (row.length > 1) {\n                    adjustRowHeight(row[0], row[1]);\n                    that._applyLockedContainersWidth();\n                }\n                that.trigger(EDIT, {\n                    container: row,\n                    model: model\n                });\n            },\n            cancelRow: function (notify) {\n                var that = this, container = that._editContainer, model;\n                if (container) {\n                    model = that._modelForContainer(container);\n                    if (notify && that.trigger('cancel', {\n                            container: container,\n                            model: model\n                        })) {\n                        return;\n                    }\n                    that._destroyEditable();\n                    that.dataSource.cancelChanges(model);\n                    if (that._editMode() !== 'popup') {\n                        that._displayRow(container);\n                    } else {\n                        that._displayRow(that.tbody.find('[' + kendo.attr('uid') + '=' + model.uid + ']'));\n                    }\n                }\n            },\n            saveRow: function () {\n                var container = this._editContainer;\n                var model = this._modelForContainer(container);\n                var deferred = $.Deferred();\n                if (!container || !this.editable) {\n                    return deferred.resolve().promise();\n                }\n                if (!this.editable.end() || this.trigger(SAVE, {\n                        container: container,\n                        model: model\n                    })) {\n                    return deferred.reject().promise();\n                }\n                return this.dataSource.sync();\n            },\n            _displayRow: function (row) {\n                var that = this, model = that._modelForContainer(row), related, newRow, nextRow, isSelected = row.hasClass('k-state-selected'), isAlt = row.hasClass('k-alt');\n                if (model) {\n                    if (that.lockedContent) {\n                        related = $((isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model));\n                        that._relatedRow(row.last()).replaceWith(related);\n                    }\n                    that.angular('cleanup', function () {\n                        return { elements: row.get() };\n                    });\n                    newRow = $((isAlt ? that.altRowTemplate : that.rowTemplate)(model));\n                    row.replaceWith(newRow);\n                    that.trigger('itemChange', {\n                        item: newRow,\n                        data: model,\n                        ns: ui\n                    });\n                    if (related && related.length) {\n                        that.trigger('itemChange', {\n                            item: related,\n                            data: model,\n                            ns: ui\n                        });\n                    }\n                    var angularElements = newRow;\n                    var angularData = [{ dataItem: model }];\n                    if (related && related.length) {\n                        angularElements = newRow.add(related);\n                        angularData.push({ dataItem: model });\n                    }\n                    that.angular('compile', function () {\n                        return {\n                            elements: angularElements.get(),\n                            data: angularData\n                        };\n                    });\n                    if (isSelected && (that.options.selectable || !!$.grep(leafColumns(that.columns), function (col) {\n                            return col.selectable;\n                        }).length)) {\n                        that.select(newRow.add(related));\n                    }\n                    if (related) {\n                        adjustRowHeight(newRow[0], related[0]);\n                    }\n                    nextRow = newRow.next();\n                    if (nextRow.hasClass('k-detail-row') && nextRow.is(':visible')) {\n                        newRow.find('.k-hierarchy-cell .k-icon').removeClass('k-i-expand').addClass('k-i-collapse');\n                    }\n                }\n            },\n            _showMessage: function (messages, row) {\n                var that = this;\n                if (!that._isMobile) {\n                    return window.confirm(messages.title);\n                }\n                var template = kendo.template('<ul>' + '<li class=\"km-actionsheet-title\">#:title#</li>' + '<li><a href=\"\\\\#\" class=\"k-button k-grid-delete\">#:confirmDelete#</a></li>' + '</ul>');\n                var html = $(template(messages)).appendTo(that.view.element);\n                var actionSheet = that._actionSheet = new kendo.mobile.ui.ActionSheet(html, {\n                    cancel: messages.cancelDelete,\n                    cancelTemplate: '<li class=\"km-actionsheet-cancel\"><a class=\"k-button\" href=\"\\\\#\">#:cancel#</a></li>',\n                    close: function () {\n                        this.destroy();\n                    },\n                    command: function (e) {\n                        var item = $(e.currentTarget).parent();\n                        if (!item.hasClass('km-actionsheet-cancel')) {\n                            that._removeRow(row);\n                        }\n                    },\n                    popup: that._actionSheetPopupOptions\n                });\n                actionSheet.open(row);\n                return false;\n            },\n            _confirmation: function (row) {\n                var that = this, editable = that.options.editable, confirmation = editable === true || typeof editable === STRING ? that.options.messages.editable.confirmation : editable.confirmation;\n                if (isPlainObject(editable) && typeof editable.mode === STRING && typeof confirmation !== STRING && confirmation !== false) {\n                    confirmation = that.options.messages.editable.confirmation;\n                }\n                if (confirmation !== false && confirmation != null) {\n                    if (typeof confirmation === FUNCTION) {\n                        confirmation = confirmation(that._modelForContainer(row));\n                    }\n                    return that._showMessage({\n                        confirmDelete: editable.confirmDelete || that.options.messages.editable.confirmDelete,\n                        cancelDelete: editable.cancelDelete || that.options.messages.editable.cancelDelete,\n                        title: confirmation === true ? that.options.messages.editable.confirmation : confirmation\n                    }, row);\n                }\n                return true;\n            },\n            cancelChanges: function () {\n                this.dataSource.cancelChanges();\n            },\n            saveChanges: function () {\n                var that = this;\n                if ((that.editable && that.editable.end() || !that.editable) && !that.trigger(SAVECHANGES)) {\n                    that.dataSource.sync();\n                }\n            },\n            addRow: function () {\n                var that = this, index, dataSource = that.dataSource, mode = that._editMode(), createAt = that.options.editable.createAt || '', pageSize = dataSource.pageSize(), view = dataSource.view() || [];\n                if (that.editable && that.editable.end() || !that.editable) {\n                    if (mode != 'incell') {\n                        that.cancelRow();\n                    }\n                    index = dataSource.indexOf(view[0]);\n                    if (createAt.toLowerCase() == 'bottom') {\n                        index += view.length;\n                        if (pageSize && !dataSource.options.serverPaging && pageSize <= view.length) {\n                            index -= 1;\n                        }\n                    }\n                    if (index < 0) {\n                        if (dataSource.page() > dataSource.totalPages()) {\n                            index = (dataSource.page() - 1) * pageSize;\n                        } else {\n                            index = 0;\n                        }\n                    }\n                    var model = dataSource.insert(index, {}), id = model.uid, table = that.lockedContent ? that.lockedTable : that.table, row = table.find('tr[' + kendo.attr('uid') + '=' + id + ']'), cell = row.children('td:not(.k-group-cell,.k-hierarchy-cell)').eq(that._firstEditableColumnIndex(row));\n                    if (mode === 'inline' && row.length) {\n                        that.editRow(row);\n                    } else if (mode === 'popup') {\n                        that.editRow(model);\n                    } else if (cell.length) {\n                        that.editCell(cell);\n                    }\n                    if (createAt.toLowerCase() == 'bottom' && that.lockedContent) {\n                        that.lockedContent[0].scrollTop = that.content[0].scrollTop = that.table[0].offsetHeight;\n                    }\n                }\n            },\n            _firstEditableColumnIndex: function (container) {\n                var that = this, column, columns = leafColumns(that.columns), idx, length, model = that._modelForContainer(container);\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                        return idx;\n                    }\n                }\n                return -1;\n            },\n            _toolbar: function () {\n                var that = this, wrapper = that.wrapper, toolbar = that.options.toolbar, editable = that.options.editable, container;\n                if (toolbar) {\n                    container = that.wrapper.find('.k-grid-toolbar');\n                    if (!container.length) {\n                        if (!isFunction(toolbar)) {\n                            toolbar = typeof toolbar === STRING ? toolbar : that._toolbarTmpl(toolbar).replace(templateHashRegExp, '\\\\#');\n                            toolbar = proxy(kendo.template(toolbar), that);\n                        }\n                        container = $('<div class=\"k-header k-grid-toolbar\" />').html(toolbar({})).prependTo(wrapper);\n                        that.angular('compile', function () {\n                            return { elements: container.get() };\n                        });\n                    }\n                    if (editable && editable.create !== false) {\n                        container.on(CLICK + NS, '.k-grid-add', function (e) {\n                            e.preventDefault();\n                            that.addRow();\n                        }).on(CLICK + NS, '.k-grid-cancel-changes', function (e) {\n                            e.preventDefault();\n                            that.cancelChanges();\n                        }).on(CLICK + NS, '.k-grid-save-changes', function (e) {\n                            e.preventDefault();\n                            that.saveChanges();\n                        });\n                    }\n                    container.on(CLICK + NS, '.k-grid-excel', function (e) {\n                        e.preventDefault();\n                        that.saveAsExcel();\n                    });\n                    container.on(CLICK + NS, '.k-grid-pdf', function (e) {\n                        e.preventDefault();\n                        that.saveAsPDF();\n                    });\n                }\n            },\n            _toolbarTmpl: function (commands) {\n                var that = this, idx, length, html = '';\n                if (isArray(commands)) {\n                    for (idx = 0, length = commands.length; idx < length; idx++) {\n                        html += that._createButton(commands[idx]);\n                    }\n                }\n                return html;\n            },\n            _createButton: function (command) {\n                var template = command.template || COMMANDBUTTONTMPL, commandName = typeof command === STRING ? command : command.name || command.text, className = defaultCommands[commandName] ? defaultCommands[commandName].className : 'k-grid-' + (commandName || '').replace(/\\s/g, ''), options = {\n                        className: className,\n                        text: commandName,\n                        imageClass: '',\n                        attr: '',\n                        iconClass: ''\n                    }, messages = this.options.messages.commands, attributeClassMatch;\n                if (!commandName && !(isPlainObject(command) && command.template)) {\n                    throw new Error('Custom commands should have name specified');\n                }\n                if (isPlainObject(command)) {\n                    command = extend(true, {}, command);\n                    if (command.className && inArray(options.className, command.className.split(' ')) < 0) {\n                        command.className += ' ' + options.className;\n                    } else if (command.className === undefined) {\n                        command.className = options.className;\n                    }\n                    if (commandName === 'edit' && isPlainObject(command.text)) {\n                        command = extend(true, {}, command);\n                        command.text = command.text.edit;\n                    }\n                    if (command.attr) {\n                        if (isPlainObject(command.attr)) {\n                            command.attr = stringifyAttributes(command.attr);\n                        }\n                        if (typeof command.attr === STRING) {\n                            attributeClassMatch = command.attr.match(/class=\"(.+?)\"/);\n                            if (attributeClassMatch && inArray(attributeClassMatch[1], command.className.split(' ')) < 0) {\n                                command.className += ' ' + attributeClassMatch[1];\n                            }\n                        }\n                    }\n                    options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] }, command);\n                } else {\n                    options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n                }\n                return kendo.template(template)(options);\n            },\n            _hasFooters: function () {\n                return !!this.footerTemplate || !!this.groupFooterTemplate || this.footer && this.footer.length > 0 || this.wrapper.find('.k-grid-footer').length > 0;\n            },\n            _groupable: function () {\n                var that = this;\n                if (that._groupableClickHandler) {\n                    that.table.add(that.lockedTable).off(CLICK + NS, that._groupableClickHandler);\n                } else {\n                    that._groupableClickHandler = function (e) {\n                        var element = $(this), group = element.closest('tr');\n                        if (element.hasClass('k-i-collapse')) {\n                            that.collapseGroup(group);\n                        } else {\n                            that.expandGroup(group);\n                        }\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                }\n                if (that._isLocked()) {\n                    that.lockedTable.on(CLICK + NS, '.k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse', that._groupableClickHandler);\n                } else {\n                    that.table.on(CLICK + NS, '.k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse', that._groupableClickHandler);\n                }\n                that._attachGroupable();\n            },\n            _attachGroupable: function () {\n                var that = this, wrapper = that.wrapper, groupable = that.options.groupable, draggables = HEADERCELLS + '[' + kendo.attr('field') + ']', filter = that.content ? '.k-grid-header:first ' + draggables : 'table:first>.k-grid-header ' + draggables;\n                if (groupable && groupable.enabled !== false) {\n                    if (!wrapper.has('div.k-grouping-header')[0]) {\n                        $('<div>&nbsp;</div>').addClass('k-grouping-header').prependTo(wrapper);\n                    }\n                    if (that.groupable) {\n                        that.groupable.destroy();\n                    }\n                    that.groupable = new ui.Groupable(wrapper, extend({}, groupable, {\n                        draggable: that._draggableInstance,\n                        groupContainer: '>div.k-grouping-header',\n                        dataSource: that.dataSource,\n                        draggableElements: filter,\n                        filter: filter,\n                        allowDrag: that.options.reorderable,\n                        change: function (e) {\n                            if (that.trigger('group', { groups: e.groups })) {\n                                e.preventDefault();\n                            }\n                        }\n                    }));\n                }\n            },\n            _continuousItems: function (filter, cell) {\n                if (!this.lockedContent) {\n                    return;\n                }\n                var that = this;\n                var elements = that.table.add(that.lockedTable);\n                var lockedItems = $(filter, elements[0]);\n                var nonLockedItems = $(filter, elements[1]);\n                var columns = cell ? lockedColumns(that.columns).length : 1;\n                var nonLockedColumns = cell ? that.columns.length - columns : 1;\n                var result = [];\n                for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                    push.apply(result, lockedItems.slice(idx, idx + columns));\n                    push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n                }\n                return result;\n            },\n            _selectable: function () {\n                var that = this, multi, cell, notString = [], isLocked = that._isLocked(), selectable = that.options.selectable, dataSourceOptions = that.dataSource.options;\n                if (selectable) {\n                    if (that.selectable) {\n                        that.selectable.destroy();\n                    }\n                    if (that.options.persistSelection === true) {\n                        if (!dataSourceOptions.schema || !dataSourceOptions.schema.model || !dataSourceOptions.schema.model.id) {\n                            throw new Error('Selection persistence requires a data source with a model that has e defined id');\n                        }\n                        that._selectedIds = {};\n                    }\n                    selectable = kendo.ui.Selectable.parseOptions(selectable);\n                    multi = selectable.multiple;\n                    cell = selectable.cell;\n                    if (that._hasDetails()) {\n                        notString[notString.length] = '.k-detail-row';\n                    }\n                    if (that.options.groupable || that._hasFooters()) {\n                        notString[notString.length] = '.k-grouping-row,.k-group-footer';\n                    }\n                    notString = notString.join(',');\n                    if (notString !== '') {\n                        notString = ':not(' + notString + ')';\n                    }\n                    var elements = that.table;\n                    if (isLocked) {\n                        elements = elements.add(that.lockedTable);\n                    }\n                    var filter = '>' + (cell ? SELECTION_CELL_SELECTOR : 'tbody>tr' + notString);\n                    that.selectable = new kendo.ui.Selectable(elements, {\n                        filter: filter,\n                        aria: true,\n                        multiple: multi,\n                        change: function () {\n                            if (that.options.persistSelection && !cell) {\n                                that._persistSelectedRows();\n                            }\n                            that.trigger(CHANGE);\n                        },\n                        useAllItems: isLocked && multi && cell,\n                        relatedTarget: function (items) {\n                            if (cell || !isLocked) {\n                                return;\n                            }\n                            var related;\n                            var result = $();\n                            for (var idx = 0, length = items.length; idx < length; idx++) {\n                                related = that._relatedRow(items[idx]);\n                                if (inArray(related[0], items) < 0) {\n                                    result = result.add(related);\n                                }\n                            }\n                            return result;\n                        },\n                        continuousItems: function () {\n                            return that._continuousItems(filter, cell);\n                        }\n                    });\n                    if (that.options.navigatable) {\n                        elements.on('keydown' + NS, function (e) {\n                            var current = that.current();\n                            var target = e.target;\n                            if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, elements) > -1 && !current.is('.k-edit-cell,.k-header') && current.parent().is(':not(.k-grouping-row,.k-detail-row,.k-group-footer)')) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = cell ? current : current.parent();\n                                if (isLocked && !cell) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n                                if (multi) {\n                                    if (!e.ctrlKey) {\n                                        that.selectable.clear();\n                                    } else {\n                                        if (current.hasClass(SELECTED)) {\n                                            current.removeClass(SELECTED);\n                                            that.trigger(CHANGE);\n                                            return;\n                                        }\n                                    }\n                                } else {\n                                    that.selectable.clear();\n                                }\n                                if (!cell) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.value(current);\n                            } else if (!cell && (e.shiftKey && e.keyCode == keys.LEFT || e.shiftKey && e.keyCode == keys.RIGHT || e.shiftKey && e.keyCode == keys.UP || e.shiftKey && e.keyCode == keys.DOWN || e.keyCode === keys.SPACEBAR && e.shiftKey)) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = current.parent();\n                                if (isLocked) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n                                if (multi) {\n                                    if (!that.selectable._lastActive) {\n                                        that.selectable._lastActive = current;\n                                    }\n                                    that.selectable.selectRange(that.selectable._firstSelectee(), current);\n                                } else {\n                                    that.selectable.clear();\n                                    that.selectable.value(current);\n                                }\n                            }\n                        });\n                    }\n                }\n            },\n            _clipboard: function () {\n                var options = this.options;\n                var selectable = options.selectable;\n                if (selectable && options.allowCopy) {\n                    var grid = this;\n                    if (!options.navigatable) {\n                        grid.table.add(grid.lockedTable).attr('tabindex', 0).on('mousedown' + NS + ' keydown' + NS, '.k-detail-cell', function (e) {\n                            if (e.target !== e.currentTarget) {\n                                e.stopImmediatePropagation();\n                            }\n                        }).on('mousedown' + NS, NAVROW + '>' + NAVCELL, proxy(tableClick, grid));\n                    }\n                    grid.copyHandler = proxy(grid.copySelection, grid);\n                    grid.updateClipBoardState = function () {\n                        if (grid.areaClipBoard) {\n                            grid.areaClipBoard.val(grid.getTSV()).focus().select();\n                        }\n                    };\n                    grid.bind('change', grid.updateClipBoardState);\n                    grid.wrapper.on('keydown', grid.copyHandler);\n                    grid.clearAreaHandler = proxy(grid.clearArea, grid);\n                    grid.wrapper.on('keyup', grid.clearAreaHandler);\n                }\n            },\n            copySelection: function (e) {\n                if (e instanceof jQuery.Event && !(e.ctrlKey || e.metaKey) || $(e.target).is('input:visible,textarea:visible') || window.getSelection && window.getSelection().toString() || document.selection && document.selection.createRange().text) {\n                    return;\n                }\n                if (!this.areaClipBoard) {\n                    this.areaClipBoard = $('<textarea />').css({\n                        position: 'fixed',\n                        top: '50%',\n                        left: '50%',\n                        opacity: 0,\n                        width: 0,\n                        height: 0\n                    }).appendTo(this.wrapper);\n                }\n                this.areaClipBoard.val(this.getTSV()).focus().select();\n            },\n            getTSV: function () {\n                var grid = this;\n                var selected = grid.select();\n                var delimeter = '\\t';\n                var allowCopy = grid.options.allowCopy;\n                var onlyVisible = true;\n                if ($.isPlainObject(allowCopy) && allowCopy.delimeter) {\n                    delimeter = allowCopy.delimeter;\n                }\n                var text = '';\n                if (selected.length) {\n                    if (selected.eq(0).is('tr')) {\n                        selected = selected.find('td:not(.k-group-cell)');\n                    }\n                    if (onlyVisible) {\n                        selected.filter(':visible');\n                    }\n                    var result = [];\n                    var cellsOffset = this.columns.length;\n                    var lockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                    var inLockedArea = true;\n                    $.each(selected, function (idx, cell) {\n                        cell = $(cell);\n                        var tr = cell.closest('tr');\n                        var rowIndex = tr.index();\n                        var cellIndex = cell.index();\n                        if (onlyVisible) {\n                            cellIndex -= cell.prevAll(':hidden').length;\n                        }\n                        if (lockedCols && inLockedArea) {\n                            inLockedArea = $.contains(grid.lockedTable[0], cell[0]);\n                        }\n                        if (grid._groups() && inLockedArea) {\n                            cellIndex -= grid._groups();\n                        }\n                        cellIndex = inLockedArea ? cellIndex : cellIndex + lockedCols;\n                        if (cellsOffset > cellIndex) {\n                            cellsOffset = cellIndex;\n                        }\n                        var cellText = cell.text();\n                        if (!result[rowIndex]) {\n                            result[rowIndex] = [];\n                        }\n                        result[rowIndex][cellIndex] = cellText;\n                    });\n                    var rowsOffset = result.length;\n                    result = $.each(result, function (idx, val) {\n                        if (val) {\n                            result[idx] = val.slice(cellsOffset);\n                            if (rowsOffset > idx) {\n                                rowsOffset = idx;\n                            }\n                        }\n                    });\n                    $.each(result.slice(rowsOffset), function (idx, val) {\n                        if (val) {\n                            text += val.join(delimeter) + '\\r\\n';\n                        } else {\n                            text += '\\r\\n';\n                        }\n                    });\n                }\n                return text;\n            },\n            clearArea: function (e) {\n                var table;\n                if (this.areaClipBoard && e && e.target === this.areaClipBoard[0]) {\n                    if (this.options.navigatable) {\n                        table = $(this.current()).closest('table');\n                    } else {\n                        table = this.table;\n                    }\n                    focusTable(table, true);\n                }\n                if (this.areaClipBoard) {\n                    this.areaClipBoard.remove();\n                    this.areaClipBoard = null;\n                }\n            },\n            _minScreenSupport: function () {\n                var any = this.hideMinScreenCols();\n                if (any) {\n                    this.minScreenResizeHandler = proxy(this.hideMinScreenCols, this);\n                    $(window).on('resize', this.minScreenResizeHandler);\n                }\n            },\n            hideMinScreenCols: function () {\n                var cols = this.columns, screenWidth = window.innerWidth > 0 ? window.innerWidth : screen.width;\n                return this._iterateMinScreenCols(cols, screenWidth);\n            },\n            _iterateMinScreenCols: function (cols, screenWidth) {\n                var any = false;\n                for (var i = 0; i < cols.length; i++) {\n                    var col = cols[i];\n                    var minWidth = col.minScreenWidth;\n                    if (minWidth !== undefined && minWidth !== null) {\n                        any = true;\n                        if (minWidth > screenWidth) {\n                            this.hideColumn(col);\n                        } else {\n                            this.showColumn(col);\n                        }\n                    }\n                    if (!col.hidden && col.columns) {\n                        any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                    }\n                }\n                return any;\n            },\n            _relatedRow: function (row) {\n                var lockedTable = this.lockedTable;\n                row = $(row);\n                if (!lockedTable) {\n                    return row;\n                }\n                var table = row.closest(this.table.add(this.lockedTable));\n                var index = table.find('>tbody>tr').index(row);\n                table = table[0] === this.table[0] ? lockedTable : this.table;\n                return table.find('>tbody>tr').eq(index);\n            },\n            clearSelection: function () {\n                var that = this;\n                if (that.selectable) {\n                    that.selectable.clear();\n                }\n                if ($.grep(leafColumns(that.columns), function (col) {\n                        return col.selectable;\n                    }).length) {\n                    that._deselectCheckRows(that.select());\n                }\n                if (that.options.persistSelection) {\n                    that._persistSelectedRows();\n                }\n                that.trigger(CHANGE);\n            },\n            select: function (items) {\n                var that = this, selectable = that.selectable;\n                items = that.table.add(that.lockedTable).find(items);\n                if (items.length) {\n                    if (selectable && !selectable.options.multiple) {\n                        selectable.clear();\n                        items = items.first();\n                    }\n                    if (that._isLocked()) {\n                        items = items.add(items.map(function () {\n                            return that._relatedRow(this);\n                        }));\n                    }\n                    if (selectable) {\n                        selectable.value(items);\n                    } else {\n                        items.each(function () {\n                            $(this).addClass(SELECTED).find(CHECKBOXINPUT).prop('checked', true).attr('aria-label', 'Deselect row').attr('aria-checked', true);\n                        });\n                        if (that.select().length === that.items().length) {\n                            that._toggleHeaderCheckState(true);\n                        }\n                        if (that.options.persistSelection) {\n                            that._persistSelectedRows();\n                        }\n                        that.trigger(CHANGE);\n                    }\n                    return;\n                }\n                return selectable ? selectable.value() : that.items().filter('.' + SELECTED);\n            },\n            _toggleHeaderCheckState: function (checked) {\n                var that = this;\n                if (checked) {\n                    that.thead.add(that.lockedHeader).find('tr ' + CHECKBOXINPUT).prop('checked', true).attr('aria-checked', true).attr('aria-label', 'Deselect all rows');\n                } else {\n                    that.thead.add(that.lockedHeader).find('tr ' + CHECKBOXINPUT).prop('checked', false).attr('aria-checked', false).attr('aria-label', 'Select all rows');\n                }\n            },\n            _deselectCheckRows: function (items) {\n                var that = this;\n                items = that.table.add(that.lockedTable).find(items);\n                items.each(function () {\n                    $(this).removeClass(SELECTED).find(CHECKBOXINPUT).attr('aria-checked', false).prop('checked', false).attr('aria-label', 'Select row');\n                });\n                that._toggleHeaderCheckState(false);\n                if (that.options.persistSelection) {\n                    that._persistSelectedRows();\n                }\n                that.trigger(CHANGE);\n            },\n            _persistSelectedRows: function () {\n                var that = this, key, dataItem, allRows = that.items(), dataSourceOptions = that.dataSource.options, modelId = dataSourceOptions.schema.model.id, selectedViewIds = {};\n                that.select().each(function () {\n                    dataItem = that.dataItem(this);\n                    selectedViewIds[dataItem[modelId]] = true;\n                });\n                for (var i = 0; i < allRows.length; i++) {\n                    dataItem = that.dataItem(allRows[i]);\n                    key = dataItem[modelId];\n                    if (selectedViewIds[key]) {\n                        that._selectedIds[key] = true;\n                    } else {\n                        delete that._selectedIds[key];\n                    }\n                }\n            },\n            selectedKeyNames: function () {\n                var that = this, ids = [];\n                for (var property in that._selectedIds) {\n                    ids.push(property);\n                }\n                ids.sort();\n                return ids;\n            },\n            _updateCurrentAttr: function (current, next) {\n                var headerId = $(current).data('headerId');\n                $(current).removeClass(FOCUSED).closest('table').removeAttr('aria-activedescendant');\n                if (headerId) {\n                    headerId = headerId.replace(this._cellId, '');\n                    $(current).attr('id', headerId);\n                } else {\n                    $(current).removeAttr('id');\n                }\n                next.data('headerId', next.attr('id')).attr('id', this._cellId).addClass(FOCUSED).closest('table').attr('aria-activedescendant', this._cellId);\n                this._current = next;\n            },\n            _scrollCurrent: function () {\n                var current = this._current;\n                var scrollable = this.options.scrollable;\n                if (!current || !scrollable) {\n                    return;\n                }\n                var row = current.parent();\n                var tableContainer = row.closest('table').parent();\n                var isInLockedContainer = tableContainer.is('.k-grid-content-locked,.k-grid-header-locked');\n                var isInContent = tableContainer.is('.k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap');\n                var scrollableContainer = $(this.content).find('>.k-virtual-scrollable-wrap').addBack().last()[0];\n                if (isInContent) {\n                    if (scrollable.virtual) {\n                        var rowIndex = Math.max(inArray(row[0], this._items(row.parent())), 0);\n                        this._rowVirtualIndex = this.virtualScrollable.itemIndex(rowIndex);\n                        this.virtualScrollable.scrollIntoView(row);\n                    } else {\n                        this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                    }\n                }\n                if (this.lockedContent) {\n                    this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n                }\n                if (!isInLockedContainer) {\n                    this._scrollTo(current[0], scrollableContainer);\n                }\n            },\n            current: function (next) {\n                return this._setCurrent(next, true);\n            },\n            _setCurrent: function (next, preventTrigger) {\n                var current = this._current;\n                next = $(next);\n                if (next.length) {\n                    if (!current || current[0] !== next[0]) {\n                        this._updateCurrentAttr(current, next);\n                        this._scrollCurrent();\n                        if (!preventTrigger) {\n                            this.trigger(NAVIGATE, { element: next });\n                        }\n                    }\n                }\n                return this._current;\n            },\n            _removeCurrent: function () {\n                if (this._current) {\n                    this._current.removeClass(FOCUSED);\n                    this._current = null;\n                }\n            },\n            _scrollTo: function (element, container) {\n                var elementToLowercase = element.tagName.toLowerCase();\n                var isHorizontal = elementToLowercase === 'td' || elementToLowercase === 'th';\n                var elementOffset = element[isHorizontal ? 'offsetLeft' : 'offsetTop'];\n                var elementOffsetDir = element[isHorizontal ? 'offsetWidth' : 'offsetHeight'];\n                var containerScroll = container[isHorizontal ? 'scrollLeft' : 'scrollTop'];\n                var containerOffsetDir = container[isHorizontal ? 'clientWidth' : 'clientHeight'];\n                var bottomDistance = elementOffset + elementOffsetDir;\n                var result = 0;\n                var ieCorrection = 0;\n                var firefoxCorrection = 0;\n                if (isRtl && isHorizontal) {\n                    var table = $(element).closest('table')[0];\n                    if (browser.msie) {\n                        ieCorrection = table.offsetLeft;\n                    } else if (browser.mozilla) {\n                        firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                    }\n                }\n                containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n                if (containerScroll > elementOffset) {\n                    result = elementOffset;\n                } else if (bottomDistance > containerScroll + containerOffsetDir) {\n                    if (elementOffsetDir <= containerOffsetDir) {\n                        result = bottomDistance - containerOffsetDir;\n                    } else {\n                        result = elementOffset;\n                    }\n                } else {\n                    result = containerScroll;\n                }\n                result = Math.abs(result + ieCorrection) + firefoxCorrection;\n                container[isHorizontal ? 'scrollLeft' : 'scrollTop'] = result;\n            },\n            _navigatable: function () {\n                var that = this;\n                if (!that.options.navigatable) {\n                    return;\n                }\n                var dataTables = that.table.add(that.lockedTable);\n                var headerTables = that.thead.parent().add($('>table', that.lockedHeader));\n                var tables = dataTables;\n                if (that.options.scrollable) {\n                    tables = tables.add(headerTables);\n                    headerTables.attr(TABINDEX, -1);\n                }\n                this._navigatableTables = tables;\n                tables.off('mousedown' + NS + ' focus' + NS + ' focusout' + NS + ' keydown' + NS);\n                headerTables.on('keydown' + NS, proxy(that._openHeaderMenu, that)).find('a.k-link').attr('tabIndex', -1);\n                dataTables.attr(TABINDEX, math.max(dataTables.attr(TABINDEX) || 0, 0)).on('mousedown' + NS + ' keydown' + NS, '.k-detail-cell', function (e) {\n                    if (e.target !== e.currentTarget) {\n                        e.stopImmediatePropagation();\n                    }\n                });\n                tables.on(kendo.support.touch ? 'touchstart' + NS : 'mousedown' + NS, NAVROW + '>' + NAVCELL, proxy(tableClick, that)).on('focus' + NS, proxy(that._tableFocus, that)).on('focusout' + NS, proxy(that._tableBlur, that)).on('keydown' + NS, proxy(that._tableKeyDown, that));\n            },\n            _openHeaderMenu: function (e) {\n                if (e.altKey && e.keyCode == keys.DOWN) {\n                    this.current().find('.k-grid-filter, .k-header-column-menu').click();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _setTabIndex: function (table) {\n                this._navigatableTables.attr(TABINDEX, -1);\n                table.attr(TABINDEX, 0);\n            },\n            _tableFocus: function (e) {\n                if (kendo.support.touch) {\n                    return;\n                }\n                var current = this.current();\n                var table = $(e.currentTarget);\n                if (current && current.is(':visible')) {\n                    current.addClass(FOCUSED);\n                } else {\n                    this._setCurrent(table.find(FIRSTNAVITEM));\n                }\n                this._setTabIndex(table);\n            },\n            _tableBlur: function () {\n                var current = this.current();\n                if (current) {\n                    current.removeClass(FOCUSED);\n                }\n            },\n            _tableKeyDown: function (e) {\n                var current = this.current();\n                var requestInProgress = this.virtualScrollable && this.virtualScrollable.fetching();\n                var target = $(e.target);\n                var canHandle = !e.isDefaultPrevented() && !target.is(':button,a,:input,a>.k-icon');\n                if (requestInProgress) {\n                    e.preventDefault();\n                    return;\n                }\n                current = current ? current : $(this.lockedTable).add(this.table).find(FIRSTNAVITEM);\n                if (!current.length) {\n                    return;\n                }\n                var handled = false;\n                if (canHandle && e.keyCode == keys.UP) {\n                    handled = this._moveUp(current, e.shiftKey);\n                }\n                if (canHandle && e.keyCode == keys.DOWN) {\n                    handled = this._moveDown(current, e.shiftKey);\n                }\n                if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                    handled = this._moveRight(current, e.altKey, e.shiftKey, e.currentTarget);\n                }\n                if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                    handled = this._moveLeft(current, e.altKey, e.shiftKey, e.currentTarget);\n                }\n                if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                    handled = this._handlePageDown();\n                }\n                if (canHandle && e.keyCode == keys.PAGEUP) {\n                    handled = this._handlePageUp();\n                }\n                if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                    handled = this._handleEnterKey(current, e.currentTarget, target);\n                }\n                if (e.keyCode == keys.ESC) {\n                    handled = this._handleEscKey(current, e.currentTarget);\n                }\n                if (e.keyCode == keys.TAB) {\n                    handled = this._handleTabKey(current, e.currentTarget, e.shiftKey);\n                }\n                if (handled) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n            },\n            _moveLeft: function (current, altKey, shiftKey, currentTable) {\n                var next, index;\n                var row = current.parent();\n                var container = row.parent();\n                if (altKey) {\n                    this.collapseRow(row);\n                } else {\n                    index = container.find(NAVROW).index(row);\n                    next = this._prevHorizontalCell(container, current, index);\n                    if (!next[0]) {\n                        if (shiftKey) {\n                            if (this.lockedTable) {\n                                next = this._relatedRow(row);\n                                if ($.contains(this.lockedTable[0], row[0])) {\n                                    next = next.prevAll(ITEMROW + ':first');\n                                }\n                                next = next.children(DATA_CELL + ':last');\n                            } else {\n                                next = this._tabNext(current, currentTable, true);\n                            }\n                        } else {\n                            container = this._horizontalContainer(container);\n                            next = this._prevHorizontalCell(container, current, index);\n                            if (next[0] !== current[0]) {\n                                focusTable(container.parent(), true);\n                            }\n                        }\n                    }\n                    this._setCurrent(next);\n                }\n                return true;\n            },\n            _moveRight: function (current, altKey, shiftKey, currentTable) {\n                var next, index;\n                var row = current.parent();\n                var container = row.parent();\n                if (altKey) {\n                    this.expandRow(row);\n                } else {\n                    index = container.find(NAVROW).index(row);\n                    next = this._nextHorizontalCell(container, current, index);\n                    if (!next[0]) {\n                        if (shiftKey) {\n                            if (this.lockedTable) {\n                                next = this._relatedRow(row);\n                                if ($.contains(this.table[0], row[0])) {\n                                    next = next.nextAll(ITEMROW + ':first');\n                                }\n                                next = next.children(DATA_CELL + ':first');\n                            } else {\n                                next = this._tabNext(current, currentTable, false);\n                            }\n                        } else {\n                            container = this._horizontalContainer(container, true);\n                            next = this._nextHorizontalCell(container, current, index);\n                            if (next[0] !== current[0]) {\n                                focusTable(container.parent(), true);\n                            }\n                        }\n                    }\n                    this._setCurrent(next);\n                }\n                return true;\n            },\n            _moveUp: function (current, shiftKey) {\n                var container = current.parent().parent();\n                var next;\n                if (shiftKey) {\n                    next = current.parent();\n                    next = next.prevAll(ITEMROW + ':first');\n                    next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL + ':last');\n                } else {\n                    next = this._prevVerticalCell(container, current);\n                    if (!next[0]) {\n                        container = this._verticalContainer(container, true);\n                        next = this._prevVerticalCell(container, current);\n                        if (next[0]) {\n                            focusTable(container.parent(), true);\n                        }\n                    }\n                }\n                this._setCurrent(next);\n                return true;\n            },\n            _moveDown: function (current, shiftKey) {\n                var container = current.parent().parent();\n                var next;\n                if (shiftKey) {\n                    next = current.parent();\n                    next = next.nextAll(ITEMROW + ':first');\n                    next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL + ':first');\n                } else {\n                    next = this._nextVerticalCell(container, current);\n                    if (!next[0]) {\n                        container = this._verticalContainer(container);\n                        next = this._nextVerticalCell(container, current);\n                        if (next[0]) {\n                            focusTable(container.parent(), true);\n                        }\n                    }\n                }\n                this._setCurrent(next);\n                return true;\n            },\n            _handlePageDown: function () {\n                if (!this.options.pageable) {\n                    return false;\n                }\n                this.dataSource.page(this.dataSource.page() + 1);\n                return true;\n            },\n            _handlePageUp: function () {\n                if (!this.options.pageable) {\n                    return false;\n                }\n                this.dataSource.page(this.dataSource.page() - 1);\n                return true;\n            },\n            _handleTabKey: function (current, currentTable, shiftKey) {\n                var isInCell = this.options.editable && this._editMode() == 'incell';\n                var cell;\n                if (!isInCell || current.is('th')) {\n                    return false;\n                }\n                cell = $(activeElement()).closest('.k-edit-cell');\n                if (cell[0] && cell[0] !== current[0]) {\n                    current = cell;\n                }\n                cell = this._tabNext(current, currentTable, shiftKey);\n                if (cell.length) {\n                    this._handleEditing(current, cell, cell.closest('table'));\n                    return true;\n                }\n                return false;\n            },\n            _handleEscKey: function (current, currentTable) {\n                var active = activeElement();\n                var isInCell = this._editMode() == 'incell';\n                if (!isInEdit(current)) {\n                    if (current.has(active).length) {\n                        focusTable(currentTable, true);\n                        return true;\n                    }\n                    return false;\n                }\n                if (isInCell) {\n                    this.closeCell(true);\n                } else {\n                    var currentIndex = $(current).parent().index();\n                    if (active) {\n                        active.blur();\n                    }\n                    this.cancelRow(true);\n                    if (currentIndex >= 0) {\n                        this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                    }\n                }\n                if (browser.msie && browser.version < 9) {\n                    document.body.focus();\n                }\n                focusTable(currentTable, true);\n                return true;\n            },\n            _toggleCurrent: function (current, editable) {\n                var row = current.parent();\n                if (row.is('.k-grouping-row')) {\n                    row.find('.k-icon:first').click();\n                    return true;\n                }\n                if (!editable && row.is('.k-master-row')) {\n                    row.find('.k-icon:first').click();\n                    return true;\n                }\n                return false;\n            },\n            _handleEnterKey: function (current, currentTable, target) {\n                var editable = this.options.editable && this.options.editable.update !== false;\n                var container = target.closest('[role=gridcell]');\n                if (!target.is('table') && !$.contains(current[0], target[0])) {\n                    current = container;\n                }\n                if (current.is('th')) {\n                    current.find('.k-link').click();\n                    return true;\n                }\n                if (this._toggleCurrent(current, editable)) {\n                    return true;\n                }\n                var focusable = current.find(':kendoFocusable:first');\n                if (focusable[0] && !current.hasClass('k-edit-cell') && current.hasClass('k-state-focused')) {\n                    focusable.focus();\n                    return true;\n                }\n                if (editable && !target.is(':button,.k-button,textarea')) {\n                    if (!container[0]) {\n                        container = current;\n                    }\n                    this._handleEditing(container, false, currentTable);\n                    return true;\n                }\n                return false;\n            },\n            _nextHorizontalCell: function (table, current, originalIndex) {\n                var cells = current.nextAll(DATA_CELL);\n                if (!cells.length) {\n                    var rows = table.find(NAVROW);\n                    var rowIndex = rows.index(current.parent());\n                    if (rowIndex == -1) {\n                        if (current.hasClass('k-header')) {\n                            var headerRows = [];\n                            mapColumnToCellRows([lockedColumns(this.columns)[0]], childColumnsCells(rows.eq(0).children().first()), headerRows, 0, 0);\n                            if (headerRows[originalIndex]) {\n                                return headerRows[originalIndex][0];\n                            }\n                            return current;\n                        }\n                        if (current.parent().hasClass('k-filter-row')) {\n                            return rows.last().children(DATA_CELL).first();\n                        }\n                        return rows.eq(originalIndex).children(DATA_CELL).first();\n                    }\n                }\n                return cells.first();\n            },\n            _prevHorizontalCell: function (table, current, originalIndex) {\n                var cells = current.prevAll(DATA_CELL);\n                if (!cells.length) {\n                    var rows = table.find(NAVROW);\n                    var rowIndex = rows.index(current.parent());\n                    if (rowIndex == -1) {\n                        if (current.hasClass('k-header')) {\n                            var headerRows = [];\n                            var columns = lockedColumns(this.columns);\n                            mapColumnToCellRows([columns[columns.length - 1]], childColumnsCells(rows.eq(0).children().last()), headerRows, 0, 0);\n                            if (headerRows[originalIndex]) {\n                                return headerRows[originalIndex][0];\n                            }\n                            return current;\n                        }\n                        if (current.parent().hasClass('k-filter-row')) {\n                            return rows.last().children(DATA_CELL).last();\n                        }\n                        return rows.eq(originalIndex).children(DATA_CELL).last();\n                    }\n                }\n                return cells.first();\n            },\n            _currentDataIndex: function (table, current) {\n                var index = current.attr('data-index');\n                if (!index) {\n                    return undefined;\n                }\n                var lockedColumnsCount = lockedColumns(this.columns).length;\n                if (lockedColumnsCount && !table.closest('div').hasClass('k-grid-content-locked')[0]) {\n                    return index - lockedColumnsCount;\n                }\n                return index;\n            },\n            _prevVerticalCell: function (container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                var index = this._currentDataIndex(container, current);\n                if (index || current.hasClass('k-header')) {\n                    cells = parentColumnsCells(current);\n                    return cells.eq(cells.length - 2);\n                }\n                index = row.children(DATA_CELL).index(current);\n                if (row.hasClass('k-filter-row')) {\n                    return leafDataCells(container).eq(index);\n                }\n                if (rowIndex == -1) {\n                    row = container.find('.k-filter-row');\n                    if (!row[0]) {\n                        return leafDataCells(container).eq(index);\n                    }\n                } else {\n                    row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n                }\n                cells = row.children(DATA_CELL);\n                if (cells.length > index) {\n                    return cells.eq(index);\n                }\n                return cells.eq(0);\n            },\n            _nextVerticalCell: function (container, current) {\n                var cells;\n                var row = current.parent();\n                var rows = container.children(NAVROW);\n                var rowIndex = rows.index(row);\n                var index = this._currentDataIndex(container, current);\n                if (rowIndex != -1 && index === undefined && current.hasClass('k-header')) {\n                    return childColumnsCells(current).eq(1);\n                }\n                index = index ? parseInt(index, 10) : row.children(DATA_CELL).index(current);\n                if (rowIndex == -1) {\n                    row = rows.eq(0);\n                } else {\n                    row = rows.eq(rowIndex + current[0].rowSpan);\n                }\n                cells = row.children(DATA_CELL);\n                if (cells.length > index) {\n                    return cells.eq(index);\n                }\n                return cells.eq(0);\n            },\n            _verticalContainer: function (container, up) {\n                var table = container.parent();\n                var length = this._navigatableTables.length;\n                var step = Math.floor(length / 2);\n                var index = inArray(table[0], this._navigatableTables);\n                if (up) {\n                    step *= -1;\n                }\n                index += step;\n                if (index >= 0 || index < length) {\n                    table = this._navigatableTables.eq(index);\n                }\n                return table.find(up ? 'thead' : 'tbody');\n            },\n            _horizontalContainer: function (container, right) {\n                var length = this._navigatableTables.length;\n                if (length <= 2) {\n                    return container;\n                }\n                var table = container.parent();\n                var index = inArray(table[0], this._navigatableTables);\n                index += right ? 1 : -1;\n                if (right && (index == 2 || index == length)) {\n                    return container;\n                }\n                if (!right && (index == 1 || index < 0)) {\n                    return container;\n                }\n                return this._navigatableTables.eq(index).find('thead, tbody');\n            },\n            _tabNext: function (current, currentTable, back) {\n                var switchRow = true;\n                var next = back ? current.prevAll(DATA_CELL + ':first') : current.nextAll(':visible:first');\n                if (!next.length) {\n                    next = current.parent();\n                    if (this.lockedTable) {\n                        switchRow = back && currentTable == this.lockedTable[0] || !back && currentTable == this.table[0];\n                        next = this._relatedRow(next);\n                    }\n                    if (switchRow) {\n                        next = next[back ? 'prevAll' : 'nextAll']('tr:not(.k-grouping-row):not(.k-detail-row):visible:first');\n                    }\n                    next = next.children(DATA_CELL + (back ? ':last' : ':first'));\n                }\n                return next;\n            },\n            _handleEditing: function (current, next, table) {\n                var that = this, active = $(activeElement()), mode = that._editMode(), isIE = browser.msie, oldIE = isIE && browser.version < 9, editContainer = that._editContainer, focusable, editable = that.options.editable && that.options.editable.update !== false, isEdited;\n                table = $(table);\n                if (mode == 'incell') {\n                    isEdited = current.hasClass('k-edit-cell');\n                } else {\n                    isEdited = current.parent().hasClass('k-grid-edit-row');\n                }\n                if (that.editable) {\n                    if ($.contains(editContainer[0], active[0])) {\n                        if (browser.opera || oldIE) {\n                            active.blur().change().triggerHandler('blur');\n                        } else {\n                            active.blur();\n                            if (isIE) {\n                                active.blur();\n                            }\n                        }\n                    }\n                    if (!that.editable) {\n                        focusTable(table);\n                        return;\n                    }\n                    if (that.editable.end()) {\n                        if (mode == 'incell') {\n                            that.closeCell();\n                        } else {\n                            that.saveRow();\n                            isEdited = true;\n                        }\n                    } else {\n                        if (mode == 'incell') {\n                            that._setCurrent(editContainer);\n                        } else {\n                            that._setCurrent(editContainer.children().filter(DATA_CELL).first());\n                        }\n                        focusable = editContainer.find(':kendoFocusable:first')[0];\n                        if (focusable) {\n                            focusable.focus();\n                        }\n                        return;\n                    }\n                }\n                if (next) {\n                    that._setCurrent(next);\n                }\n                if (oldIE) {\n                    document.body.focus();\n                }\n                focusTable(table, true);\n                if (!editable) {\n                    return;\n                }\n                if (!isEdited && !next || next) {\n                    if (mode == 'incell') {\n                        that.editCell(that.current());\n                    } else {\n                        that.editRow(that.current().parent());\n                    }\n                }\n            },\n            _wrapper: function () {\n                var that = this, table = that.table, height = that.options.height, wrapper = that.element;\n                if (!wrapper.is('div')) {\n                    wrapper = wrapper.wrap('<div/>').parent();\n                }\n                that.wrapper = wrapper.addClass('k-grid k-widget k-display-block');\n                if (height) {\n                    that.wrapper.css(HEIGHT, height);\n                    table.css(HEIGHT, 'auto');\n                }\n                that._initMobile();\n            },\n            _initMobile: function () {\n                var options = this.options;\n                var that = this;\n                this._isMobile = options.mobile === true && kendo.support.mobileOS || options.mobile === 'phone' || options.mobile === 'tablet';\n                if (this._isMobile) {\n                    var html = this.wrapper.addClass('k-grid-mobile').wrap('<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" ' + 'data-' + kendo.ns + 'init-widgets=\"false\"></div>').parent();\n                    this.pane = kendo.mobile.ui.Pane.wrap(html);\n                    this.view = this.pane.view();\n                    this._actionSheetPopupOptions = $(document.documentElement).hasClass('km-root') ? { modal: false } : {\n                        align: 'bottom center',\n                        position: 'bottom center',\n                        effect: 'slideIn:up'\n                    };\n                    if (options.height) {\n                        this.pane.element.parent().css(HEIGHT, options.height);\n                    }\n                    this._editAnimation = 'slide';\n                    this.view.bind('show', function () {\n                        if (that._isLocked()) {\n                            that._updateTablesWidth();\n                            that._applyLockedContainersWidth();\n                            that._syncLockedContentHeight();\n                            that._syncLockedHeaderHeight();\n                            that._syncLockedFooterHeight();\n                        }\n                    });\n                }\n            },\n            _tbody: function () {\n                var that = this, table = that.table, tbody;\n                tbody = table.find('>tbody');\n                if (!tbody.length) {\n                    tbody = $('<tbody/>').appendTo(table);\n                }\n                that.tbody = tbody.attr('role', 'rowgroup');\n            },\n            _scrollable: function () {\n                var that = this, header, table, options = that.options, scrollable = options.scrollable, hasVirtualScroll = scrollable !== true && scrollable.virtual && !that.virtualScrollable, scrollbar = !kendo.support.kineticScrollNeeded || hasVirtualScroll ? kendo.support.scrollbar() : 0;\n                if (scrollable) {\n                    header = that.wrapper.children('.k-grid-header');\n                    if (!header[0]) {\n                        header = $('<div class=\"k-grid-header\" />').insertBefore(that.table);\n                    }\n                    header.css(isRtl ? 'padding-left' : 'padding-right', scrollable.virtual ? scrollbar + 1 : scrollbar);\n                    table = $('<table role=\"grid\" />');\n                    if (isIE7) {\n                        table.attr('cellspacing', 0);\n                    }\n                    table.width(that.table[0].style.width);\n                    table.append(that.thead);\n                    header.empty().append($('<div class=\"k-grid-header-wrap k-auto-scrollable\" />').append(table));\n                    that.content = that.table.parent();\n                    if (that.content.is('.k-virtual-scrollable-wrap, .km-scroll-container')) {\n                        that.content = that.content.parent();\n                    }\n                    if (!that.content.is('.k-grid-content, .k-virtual-scrollable-wrap')) {\n                        that.content = that.table.wrap('<div class=\"k-grid-content k-auto-scrollable\" />').parent();\n                    }\n                    if (hasVirtualScroll) {\n                        that.virtualScrollable = new VirtualScrollable(that.content, {\n                            dataSource: that.dataSource,\n                            itemHeight: function () {\n                                return that._averageRowHeight();\n                            }\n                        });\n                    }\n                    that.scrollables = header.children('.k-grid-header-wrap').add(that.content);\n                    var footer = that.wrapper.find('.k-grid-footer');\n                    if (footer.length) {\n                        that.scrollables = that.scrollables.add(footer.children('.k-grid-footer-wrap'));\n                    }\n                    if (scrollable.virtual) {\n                        that.content.find('>.k-virtual-scrollable-wrap').unbind('scroll' + NS).bind('scroll' + NS, function () {\n                            that.scrollables.scrollLeft(this.scrollLeft);\n                            if (that.lockedContent) {\n                                that.lockedContent[0].scrollTop = this.scrollTop;\n                            }\n                        });\n                    } else {\n                        that.content.unbind('scroll' + NS).bind('scroll' + NS, function (e) {\n                            that.scrollables.not(e.currentTarget).scrollLeft(this.scrollLeft);\n                            if (that.lockedContent && e.currentTarget == that.content[0]) {\n                                that.lockedContent[0].scrollTop = this.scrollTop;\n                            }\n                        });\n                        var touchScroller = that.content.data('kendoTouchScroller');\n                        if (touchScroller) {\n                            touchScroller.destroy();\n                        }\n                        touchScroller = kendo.touchScroller(that.content);\n                        if (touchScroller && touchScroller.movable) {\n                            that.touchScroller = touchScroller;\n                            touchScroller.movable.bind('change', function (e) {\n                                that.scrollables.scrollLeft(-e.sender.x);\n                                if (that.lockedContent) {\n                                    that.lockedContent.scrollTop(-e.sender.y);\n                                }\n                            });\n                            that.one(DATABOUND, function (e) {\n                                e.sender.wrapper.addClass('k-grid-backface');\n                            });\n                        }\n                    }\n                }\n            },\n            _renderNoRecordsContent: function () {\n                var that = this;\n                if (that.options.noRecords) {\n                    var noRecordsElement = that.table.parent().children('.' + NORECORDSCLASS);\n                    if (noRecordsElement.length) {\n                        that.angular('cleanup', function () {\n                            return { elements: noRecordsElement.get() };\n                        });\n                        noRecordsElement.remove();\n                    }\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        noRecordsElement = $(that.noRecordsTemplate({})).insertAfter(that.table);\n                        that.angular('compile', function () {\n                            return {\n                                elements: noRecordsElement.get(),\n                                data: [{}]\n                            };\n                        });\n                    }\n                }\n            },\n            _setContentWidth: function (scrollLeft) {\n                var that = this, hiddenDivClass = 'k-grid-content-expander', hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>', resizable = that.resizable, expander;\n                if (that.options.scrollable && that.wrapper.is(':visible')) {\n                    expander = that.table.parent().children('.' + hiddenDivClass);\n                    that._setContentWidthHandler = proxy(that._setContentWidth, that);\n                    if (!that.dataSource || !that.dataSource.view().length) {\n                        if (!expander[0]) {\n                            expander = $(hiddenDiv).appendTo(that.table.parent());\n                            if (resizable) {\n                                resizable.bind('resize', that._setContentWidthHandler);\n                            }\n                        }\n                        if (that.thead) {\n                            expander.width(that.thead.width());\n                            if (!isNaN(parseFloat(scrollLeft, 10))) {\n                                that.content.scrollLeft(scrollLeft);\n                            }\n                        }\n                    } else if (expander[0]) {\n                        expander.remove();\n                        if (resizable) {\n                            resizable.unbind('resize', that._setContentWidthHandler);\n                        }\n                    }\n                    that._applyLockedContainersWidth();\n                    if (that.lockedHeader && that.table[0].clientWidth === 0) {\n                        that.table[0].style.width = '1px';\n                    }\n                }\n            },\n            _applyLockedContainersWidth: function () {\n                if (this.options.scrollable && this.lockedHeader) {\n                    var headerTable = this.thead.parent(), headerWrap = headerTable.parent(), contentWidth = this.wrapper[0].clientWidth, groups = this._groups(), scrollbar = kendo.support.scrollbar(), cols = this.lockedHeader.find('>table>colgroup>col:not(.k-group-col, .k-hierarchy-col)'), nonLockedCols = headerTable.find('>colgroup>col:not(.k-group-col, .k-hierarchy-col)'), width = columnsWidth(cols), nonLockedColsWidth = columnsWidth(nonLockedCols), footerWrap;\n                    if (groups > 0) {\n                        width += outerWidth(this.lockedHeader.find('.k-group-cell:first')) * groups;\n                    }\n                    if (width >= contentWidth) {\n                        width = contentWidth - 3 * scrollbar;\n                    }\n                    this.lockedHeader.add(this.lockedContent).width(width);\n                    headerWrap[0].style.width = headerWrap.parent().width() - width - 2 + 'px';\n                    headerTable.add(this.table).width(nonLockedColsWidth);\n                    if (this.virtualScrollable) {\n                        contentWidth -= scrollbar;\n                    }\n                    this.content[0].style.width = contentWidth - width - 2 + 'px';\n                    if (this.lockedFooter && this.lockedFooter.length) {\n                        this.lockedFooter.width(width);\n                        footerWrap = this.footer.find('.k-grid-footer-wrap');\n                        footerWrap[0].style.width = headerWrap[0].clientWidth + 'px';\n                        footerWrap.children().first().width(nonLockedColsWidth);\n                    }\n                }\n            },\n            _setContentHeight: function () {\n                var that = this, options = that.options, height = that.wrapper.innerHeight(), header = that.wrapper.children('.k-grid-header'), scrollbar = kendo.support.scrollbar();\n                if (options.scrollable && that.wrapper.is(':visible')) {\n                    height -= outerHeight(header);\n                    if (that.pager) {\n                        height -= outerHeight(that.pager.element);\n                    }\n                    if (options.groupable) {\n                        height -= outerHeight(that.wrapper.children('.k-grouping-header'));\n                    }\n                    if (options.toolbar) {\n                        height -= outerHeight(that.wrapper.children('.k-grid-toolbar'));\n                    }\n                    if (that.footerTemplate) {\n                        height -= outerHeight(that.wrapper.children('.k-grid-footer'));\n                    }\n                    var isGridHeightSet = function (el) {\n                        var initialHeight, newHeight;\n                        if (el[0].style.height) {\n                            return true;\n                        } else {\n                            initialHeight = el.height();\n                        }\n                        el.height('auto');\n                        newHeight = el.height();\n                        if (initialHeight != newHeight) {\n                            el.height('');\n                            return true;\n                        }\n                        el.height('');\n                        return false;\n                    };\n                    if (isGridHeightSet(that.wrapper)) {\n                        if (height > scrollbar * 2) {\n                            if (that.lockedContent) {\n                                scrollbar = that.table[0].offsetWidth > that.table.parent()[0].clientWidth ? scrollbar : 0;\n                                that.lockedContent.height(height - scrollbar);\n                            }\n                            that.content.height(height);\n                        } else {\n                            that.content.height(scrollbar * 2 + 1);\n                        }\n                    }\n                }\n            },\n            _averageRowHeight: function () {\n                var that = this, itemsCount = that._items(that.tbody).length, rowHeight = that._rowHeight;\n                if (itemsCount === 0) {\n                    return rowHeight;\n                }\n                if (!that._rowHeight) {\n                    that._rowHeight = rowHeight = outerHeight(that.table) / itemsCount;\n                    that._sum = rowHeight;\n                    that._measures = 1;\n                }\n                var currentRowHeight = outerHeight(that.table) / itemsCount;\n                if (rowHeight !== currentRowHeight) {\n                    that._measures++;\n                    that._sum += currentRowHeight;\n                    that._rowHeight = that._sum / that._measures;\n                }\n                return rowHeight;\n            },\n            _dataSource: function () {\n                var that = this, options = that.options, pageable, dataSource = options.dataSource;\n                dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n                if (isPlainObject(dataSource)) {\n                    extend(dataSource, {\n                        table: that.table,\n                        fields: that.columns\n                    });\n                    pageable = options.pageable;\n                    if (isPlainObject(pageable) && pageable.pageSize !== undefined) {\n                        dataSource.pageSize = pageable.pageSize;\n                    }\n                }\n                if (that.dataSource && that._refreshHandler) {\n                    that.dataSource.unbind(CHANGE, that._refreshHandler).unbind(PROGRESS, that._progressHandler).unbind(ERROR, that._errorHandler);\n                } else {\n                    that._refreshHandler = proxy(that.refresh, that);\n                    that._progressHandler = proxy(that._requestStart, that);\n                    that._errorHandler = proxy(that._error, that);\n                }\n                that.dataSource = DataSource.create(dataSource).bind(CHANGE, that._refreshHandler).bind(PROGRESS, that._progressHandler).bind(ERROR, that._errorHandler);\n            },\n            _error: function () {\n                this._progress(false);\n            },\n            _requestStart: function () {\n                this._progress(true);\n            },\n            _modelChange: function (e) {\n                var that = this, tbody = that.tbody, model = e.model, row = that.tbody.find('tr[' + kendo.attr('uid') + '=' + model.uid + ']'), relatedRow, cell, column, isAlt = row.hasClass('k-alt'), tmp, idx = that._items(tbody).index(row), isLocked = that.lockedContent, selectable, selectableRow, childCells, originalCells, length;\n                if (isLocked) {\n                    relatedRow = that._relatedRow(row);\n                }\n                if (row.add(relatedRow).children('.k-edit-cell').length && !that.options.rowTemplate) {\n                    row.add(relatedRow).children(':not(.k-group-cell,.k-hierarchy-cell)').each(function () {\n                        cell = $(this);\n                        column = leafColumns(that.columns)[that.cellIndex(cell)];\n                        if (column.field === e.field) {\n                            if (!cell.hasClass('k-edit-cell')) {\n                                that._displayCell(cell, column, model);\n                                $('<span class=\"k-dirty\"/>').prependTo(cell);\n                            } else {\n                                cell.addClass('k-dirty-cell');\n                            }\n                        }\n                    });\n                } else if (!row.hasClass('k-grid-edit-row')) {\n                    selectableRow = $().add(row);\n                    if (isLocked) {\n                        tmp = (isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model);\n                        selectableRow = selectableRow.add(relatedRow);\n                        relatedRow.replaceWith(tmp);\n                    }\n                    that.angular('cleanup', function () {\n                        return { elements: selectableRow.get() };\n                    });\n                    tmp = (isAlt ? that.altRowTemplate : that.rowTemplate)(model);\n                    row.replaceWith(tmp);\n                    tmp = that._items(tbody).eq(idx);\n                    var angularData = [{ dataItem: model }];\n                    if (isLocked) {\n                        row = row.add(relatedRow);\n                        relatedRow = that._relatedRow(tmp)[0];\n                        adjustRowHeight(tmp[0], relatedRow);\n                        tmp = tmp.add(relatedRow);\n                        angularData.push({ dataItem: model });\n                    }\n                    that.angular('compile', function () {\n                        return {\n                            elements: tmp.get(),\n                            data: angularData\n                        };\n                    });\n                    selectable = that.options.selectable;\n                    if (selectable && row.hasClass('k-state-selected')) {\n                        that.select(tmp);\n                    }\n                    originalCells = selectableRow.children(':not(.k-group-cell,.k-hierarchy-cell)');\n                    childCells = tmp.children(':not(.k-group-cell,.k-hierarchy-cell)');\n                    for (idx = 0, length = that.columns.length; idx < length; idx++) {\n                        column = that.columns[idx];\n                        cell = childCells.eq(idx);\n                        if (selectable && originalCells.eq(idx).hasClass('k-state-selected')) {\n                            cell.addClass('k-state-selected');\n                        }\n                        if (column.field === e.field) {\n                            $('<span class=\"k-dirty\"/>').prependTo(cell);\n                        }\n                    }\n                    that.trigger('itemChange', {\n                        item: tmp,\n                        data: model,\n                        ns: ui\n                    });\n                }\n            },\n            _pageable: function () {\n                var that = this, wrapper, pageable = that.options.pageable;\n                if (pageable) {\n                    wrapper = that.wrapper.children('div.k-grid-pager');\n                    if (!wrapper.length) {\n                        wrapper = $('<div class=\"k-pager-wrap k-grid-pager\"/>').appendTo(that.wrapper);\n                    }\n                    if (that.pager) {\n                        that.pager.destroy();\n                    }\n                    if (typeof pageable === 'object' && pageable instanceof kendo.ui.Pager) {\n                        that.pager = pageable;\n                    } else {\n                        that.pager = new kendo.ui.Pager(wrapper, extend({}, pageable, { dataSource: that.dataSource }));\n                    }\n                    that.pager.bind('pageChange', function (e) {\n                        if (that.trigger('page', { page: e.index })) {\n                            e.preventDefault();\n                        }\n                    });\n                }\n            },\n            _footer: function () {\n                var that = this, aggregates = that.dataSource.aggregates(), html = '', footerTemplate = that.footerTemplate, options = that.options, footerWrap, footer = that.footer || that.wrapper.find('.k-grid-footer');\n                if (footerTemplate) {\n                    html = $(that._wrapFooter(footerTemplate(aggregates)));\n                    if (footer.length) {\n                        var tmp = html;\n                        that.angular('cleanup', function () {\n                            return { elements: footer.get() };\n                        });\n                        footer.replaceWith(tmp);\n                        footer = that.footer = tmp;\n                    } else {\n                        if (options.scrollable) {\n                            footer = that.footer = options.pageable ? html.insertBefore(that.wrapper.children('div.k-grid-pager')) : html.appendTo(that.wrapper);\n                        } else {\n                            footer = that.footer = html.insertBefore(that.tbody);\n                        }\n                    }\n                    that.angular('compile', function () {\n                        return {\n                            elements: footer.find('td:not(.k-group-cell, .k-hierarchy-cell)').get(),\n                            data: map(that.columns, function (col) {\n                                return {\n                                    column: col,\n                                    aggregate: aggregates[col.field]\n                                };\n                            })\n                        };\n                    });\n                } else if (footer && !that.footer) {\n                    that.footer = footer;\n                }\n                if (footer.length) {\n                    if (options.scrollable) {\n                        footerWrap = footer.attr('tabindex', -1).children('.k-grid-footer-wrap');\n                        that.scrollables = $(that.scrollables.filter(function () {\n                            return !$(this).is('.k-grid-footer-wrap');\n                        }).toArray()).add(footerWrap);\n                    }\n                    if (that._footerWidth) {\n                        footer.find('table').css('width', that._footerWidth);\n                    }\n                    if (footerWrap) {\n                        var offset = that.content.scrollLeft();\n                        if (options.scrollable !== true && options.scrollable.virtual) {\n                            offset = that.wrapper.find('.k-virtual-scrollable-wrap').scrollLeft();\n                        }\n                        footerWrap.scrollLeft(offset);\n                    }\n                }\n                if (that.lockedContent) {\n                    that._appendLockedColumnFooter();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedFooterHeight();\n                }\n            },\n            _wrapFooter: function (footerRow) {\n                var that = this, html = '', scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n                if (that.options.scrollable) {\n                    html = $('<div class=\"k-grid-footer\"><div class=\"k-grid-footer-wrap\"><table' + (isIE7 ? ' cellspacing=\"0\"' : '') + '><tbody>' + footerRow + '</tbody></table></div></div>');\n                    that._appendCols(html.find('table'));\n                    html.css(isRtl ? 'padding-left' : 'padding-right', scrollbar);\n                    return html;\n                }\n                return '<tfoot class=\"k-grid-footer\">' + footerRow + '</tfoot>';\n            },\n            _columnMenu: function () {\n                var that = this, menu, columns = leafColumns(that.columns), column, options = that.options, columnMenu = options.columnMenu, menuOptions, sortable, filterable, cells, hasMultiColumnHeaders = grep(that.columns, function (item) {\n                        return item.columns !== undefined;\n                    }).length > 0, isMobile = this._isMobile, initCallback = function (e) {\n                        that.trigger(COLUMNMENUINIT, {\n                            field: e.field,\n                            container: e.container\n                        });\n                    }, openCallback = function (e) {\n                        that.trigger(COLUMNMENUOPEN, {\n                            field: e.field,\n                            container: e.container\n                        });\n                    }, closeCallback = function (element) {\n                        focusTable(element.closest('table'), true);\n                    }, sortHandler = function (e) {\n                        if (that.trigger('sort', { sort: e.sort })) {\n                            e.preventDefault();\n                        }\n                    }, filterHandler = function (e) {\n                        if (that.trigger('filter', {\n                                filter: e.filter,\n                                field: e.field\n                            })) {\n                            e.preventDefault();\n                        }\n                    }, $angular = options.$angular;\n                if (columnMenu) {\n                    if (typeof columnMenu == 'boolean') {\n                        columnMenu = {};\n                    }\n                    cells = leafDataCells(that.thead);\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        column = columns[idx];\n                        var cell = cells.eq(idx);\n                        if (!column.command && (column.field || cell.attr('data-' + kendo.ns + 'field'))) {\n                            menu = cell.data('kendoColumnMenu');\n                            if (menu) {\n                                menu.destroy();\n                            }\n                            sortable = column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false ? extend({}, options.sortable, { compare: (column.sortable || {}).compare }) : false;\n                            filterable = options.filterable && column.filterable !== false && columnMenu.filterable !== false ? extend({ pane: that.pane }, options.filterable, column.filterable) : false;\n                            if (column.filterable && column.filterable.dataSource) {\n                                filterable.forceUnique = false;\n                                filterable.checkSource = column.filterable.dataSource;\n                            }\n                            if (filterable) {\n                                filterable.format = column.format;\n                            }\n                            menuOptions = {\n                                dataSource: that.dataSource,\n                                values: column.values,\n                                columns: columnMenu.columns,\n                                sortable: sortable,\n                                filterable: filterable,\n                                messages: columnMenu.messages,\n                                owner: that,\n                                closeCallback: closeCallback,\n                                init: initCallback,\n                                open: openCallback,\n                                pane: that.pane,\n                                sort: sortHandler,\n                                filtering: filterHandler,\n                                filter: isMobile ? ':not(.k-column-active)' : '',\n                                lockedColumns: !hasMultiColumnHeaders && column.lockable !== false && lockedColumns(columns).length > 0\n                            };\n                            if ($angular) {\n                                menuOptions.$angular = $angular;\n                            }\n                            cell.kendoColumnMenu(menuOptions);\n                        }\n                    }\n                }\n            },\n            _headerCells: function () {\n                return this.thead.find('th').filter(function () {\n                    var th = $(this);\n                    return !th.hasClass('k-group-cell') && !th.hasClass('k-hierarchy-cell');\n                });\n            },\n            _filterable: function () {\n                var that = this, columns = leafColumns(that.columns), filterMenu, cells, cell, filterInit = function (e) {\n                        that.trigger(FILTERMENUINIT, {\n                            field: e.field,\n                            container: e.container\n                        });\n                    }, closeCallback = function (element) {\n                        focusTable(element.closest('table'), true);\n                    }, filterHandler = function (e) {\n                        if (that.trigger('filter', {\n                                filter: e.filter,\n                                field: e.field\n                            })) {\n                            e.preventDefault();\n                        }\n                    }, filterOpen = function (e) {\n                        that.trigger(FILTERMENUOPEN, {\n                            field: e.field,\n                            container: e.container\n                        });\n                    }, filterable = that.options.filterable;\n                if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf('menu') == -1) {\n                    filterable = false;\n                }\n                if (filterable && !that.options.columnMenu) {\n                    cells = leafDataCells(that.thead);\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        cell = cells.eq(idx);\n                        if (columns[idx].filterable !== false && !columns[idx].command && (columns[idx].field || cell.attr('data-' + kendo.ns + 'field'))) {\n                            filterMenu = cell.data('kendoFilterMenu');\n                            if (filterMenu) {\n                                filterMenu.destroy();\n                            }\n                            filterMenu = cell.data('kendoFilterMultiCheck');\n                            if (filterMenu) {\n                                filterMenu.destroy();\n                            }\n                            var columnFilterable = columns[idx].filterable;\n                            var options = extend({}, filterable, columnFilterable, {\n                                dataSource: that.dataSource,\n                                values: columns[idx].values,\n                                format: columns[idx].format,\n                                closeCallback: closeCallback,\n                                title: columns[idx].title || columns[idx].field,\n                                init: filterInit,\n                                open: filterOpen,\n                                pane: that.pane,\n                                change: filterHandler\n                            });\n                            if (columnFilterable && columnFilterable.messages) {\n                                options.messages = extend(true, {}, filterable.messages, columnFilterable.messages);\n                            }\n                            if (columnFilterable && columnFilterable.dataSource) {\n                                options.forceUnique = false;\n                                options.checkSource = columnFilterable.dataSource;\n                            }\n                            if (columnFilterable && columnFilterable.multi) {\n                                cell.kendoFilterMultiCheck(options);\n                            } else {\n                                cell.kendoFilterMenu(options);\n                            }\n                        }\n                    }\n                }\n            },\n            _filterRow: function () {\n                var that = this;\n                if (!that._hasFilterRow()) {\n                    return;\n                }\n                var settings;\n                var $angular = that.options.$angular;\n                var columns = leafColumns(that.columns), filterable = that.options.filterable, rowheader = that.thead.find('.k-filter-row'), filterHandler = function (e) {\n                        if (that.trigger('filter', {\n                                filter: e.filter,\n                                field: e.field\n                            })) {\n                            e.preventDefault();\n                        }\n                    };\n                this._updateHeader(this.dataSource.group().length);\n                for (var i = 0; i < columns.length; i++) {\n                    var suggestDataSource, col = columns[i], operators = that.options.filterable.operators, customDataSource = false, th = $('<th/>'), field = col.field;\n                    if (col.hidden) {\n                        th.hide();\n                    }\n                    rowheader.append(th);\n                    if (field && col.filterable !== false) {\n                        var cellOptions = col.filterable && col.filterable.cell || {};\n                        suggestDataSource = that.options.dataSource;\n                        if (suggestDataSource instanceof DataSource) {\n                            suggestDataSource = that.options.dataSource.options;\n                        }\n                        var messages = extend(true, {}, filterable.messages);\n                        if (col.filterable) {\n                            extend(true, messages, col.filterable.messages);\n                        }\n                        if (cellOptions.enabled === false) {\n                            th.html('&nbsp;');\n                            continue;\n                        }\n                        if (cellOptions.dataSource) {\n                            suggestDataSource = cellOptions.dataSource;\n                            customDataSource = true;\n                        }\n                        if (col.filterable && col.filterable.operators) {\n                            operators = col.filterable.operators;\n                        }\n                        settings = {\n                            column: col,\n                            dataSource: that.dataSource,\n                            suggestDataSource: suggestDataSource,\n                            customDataSource: customDataSource,\n                            field: field,\n                            messages: messages,\n                            values: col.values,\n                            template: cellOptions.template,\n                            delay: cellOptions.delay,\n                            inputWidth: cellOptions.inputWidth,\n                            suggestionOperator: cellOptions.suggestionOperator,\n                            minLength: cellOptions.minLength,\n                            dataTextField: cellOptions.dataTextField,\n                            operator: cellOptions.operator,\n                            operators: operators,\n                            showOperators: cellOptions.showOperators,\n                            change: filterHandler\n                        };\n                        if ($angular) {\n                            settings.$angular = $angular;\n                        }\n                        $('<span/>').attr(kendo.attr('field'), field).appendTo(th).kendoFilterCell(settings);\n                    } else {\n                        th.html('&nbsp;');\n                    }\n                }\n            },\n            _sortable: function () {\n                var that = this, columns = leafColumns(that.columns), column, sorterInstance, cell, sortable = that.options.sortable, sortHandler = function (e) {\n                        if (that.trigger('sort', { sort: e.sort })) {\n                            e.preventDefault();\n                        }\n                    };\n                if (sortable) {\n                    var cells = leafDataCells(that.thead);\n                    for (var idx = 0, length = cells.length; idx < length; idx++) {\n                        column = columns[idx];\n                        if (column.sortable !== false && !column.command && column.field) {\n                            cell = cells.eq(idx);\n                            sorterInstance = cell.data('kendoColumnSorter');\n                            if (sorterInstance) {\n                                sorterInstance.destroy();\n                            }\n                            cell.attr('data-' + kendo.ns + 'field', column.field).kendoColumnSorter(extend({}, sortable, column.sortable, {\n                                dataSource: that.dataSource,\n                                aria: true,\n                                filter: ':not(.k-column-active)',\n                                change: sortHandler\n                            }));\n                        }\n                    }\n                    cells = null;\n                }\n            },\n            _columns: function (columns) {\n                var that = this, table = that.table, encoded, cols = table.find('col'), lockedCols, dataSource = that.options.dataSource;\n                columns = columns.length ? columns : map(table.find('th'), function (th, idx) {\n                    th = $(th);\n                    var sortable = th.attr(kendo.attr('sortable')), filterable = th.attr(kendo.attr('filterable')), type = th.attr(kendo.attr('type')), groupable = th.attr(kendo.attr('groupable')), field = th.attr(kendo.attr('field')), title = th.attr(kendo.attr('title')), menu = th.attr(kendo.attr('menu'));\n                    if (!field) {\n                        field = th.text().replace(/\\s|[^A-z0-9]/g, '');\n                    }\n                    return {\n                        field: field,\n                        type: type,\n                        title: title,\n                        sortable: sortable !== 'false',\n                        filterable: filterable !== 'false',\n                        groupable: groupable !== 'false',\n                        menu: menu,\n                        template: th.attr(kendo.attr('template')),\n                        width: cols.eq(idx).css('width')\n                    };\n                });\n                encoded = !(that.table.find('tbody tr').length > 0 && (!dataSource || !dataSource.transport));\n                if (that.options.scrollable) {\n                    var initialColumns = columns;\n                    lockedCols = lockedColumns(columns);\n                    columns = nonLockedColumns(columns);\n                    if (lockedCols.length > 0 && columns.length === 0) {\n                        throw new Error('There should be at least one non locked column');\n                    }\n                    normalizeHeaderCells(that.element.find('tr:has(th):first'), initialColumns);\n                    columns = lockedCols.concat(columns);\n                }\n                that.columns = normalizeColumns(columns, encoded);\n                if ($.grep(leafColumns(that.columns), function (col) {\n                        return col.selectable;\n                    }).length) {\n                    if (that.options.persistSelection) {\n                        that._selectedIds = {};\n                    }\n                    that.wrapper.on(CLICK + NS, 'tbody > tr ' + CHECKBOXINPUT, proxy(that._checkboxClick, that));\n                    that.wrapper.on(CLICK + NS, 'thead > tr ' + CHECKBOXINPUT, proxy(that._headerCheckboxClick, that));\n                }\n            },\n            _headerCheckboxClick: function (e) {\n                var that = this, checkBox = $(e.target), checked = checkBox.prop('checked'), parentGrid = checkBox.closest('.k-grid.k-widget').getKendoGrid();\n                if (that !== parentGrid) {\n                    return;\n                }\n                if (checked) {\n                    that.select(parentGrid.items());\n                } else {\n                    that.clearSelection();\n                }\n            },\n            _checkboxClick: function (e) {\n                var that = this, row = $(e.target).closest('tr'), isSelecting = !row.hasClass(SELECTED);\n                if (that !== row.closest('.k-grid.k-widget').getKendoGrid()) {\n                    return;\n                }\n                if (isSelecting) {\n                    that.select(row);\n                } else {\n                    that._deselectCheckRows(row);\n                }\n            },\n            _groups: function () {\n                var group = this.dataSource.group();\n                return group ? group.length : 0;\n            },\n            _tmpl: function (rowTemplate, columns, alt, skipGroupCells) {\n                var that = this, settings = extend({}, kendo.Template, that.options.templateSettings), idx, length = columns.length, template, state = {\n                        storage: {},\n                        count: 0\n                    }, column, type, hasDetails = that._hasDetails(), className = [], groups = that._groups(), navigatable = that.options.navigatable;\n                if (!rowTemplate) {\n                    rowTemplate = '<tr';\n                    if (alt) {\n                        className.push('k-alt');\n                    }\n                    if (hasDetails) {\n                        className.push('k-master-row');\n                    }\n                    if (className.length) {\n                        rowTemplate += ' class=\"' + className.join(' ') + '\"';\n                    }\n                    if (length) {\n                        rowTemplate += ' ' + kendo.attr('uid') + '=\"#=' + kendo.expr('uid', settings.paramName) + '#\"';\n                    }\n                    rowTemplate += ' role=\\'row\\'>';\n                    if (groups > 0 && !skipGroupCells) {\n                        rowTemplate += groupCells(groups);\n                    }\n                    if (hasDetails) {\n                        rowTemplate += '<td class=\"k-hierarchy-cell\"><a class=\"k-icon k-i-expand\" href=\"\\\\#\" ' + ARIALABEL + '=\"' + EXPAND + '\" tabindex=\"-1\"></a></td>';\n                    }\n                    for (idx = 0; idx < length; idx++) {\n                        column = columns[idx];\n                        template = column.template;\n                        type = typeof template;\n                        rowTemplate += '<td' + stringifyAttributes(column.attributes);\n                        if (navigatable) {\n                            rowTemplate += ' aria-describedby=\\'' + column.headerAttributes.id + '\\'';\n                        }\n                        rowTemplate += ' role=\\'gridcell\\'>';\n                        rowTemplate += that._cellTmpl(column, state);\n                        rowTemplate += '</td>';\n                    }\n                    rowTemplate += '</tr>';\n                }\n                rowTemplate = kendo.template(rowTemplate, settings);\n                if (state.count > 0) {\n                    return proxy(rowTemplate, state.storage);\n                }\n                return rowTemplate;\n            },\n            _headerCellText: function (column) {\n                var that = this, settings = extend({}, kendo.Template, that.options.templateSettings), template = column.headerTemplate, type = typeof template, text = column.title || column.field || '';\n                if (type === FUNCTION) {\n                    text = kendo.template(template, settings)({});\n                } else if (type === STRING) {\n                    text = template;\n                }\n                return text;\n            },\n            _cellTmpl: function (column, state) {\n                var that = this, settings = extend({}, kendo.Template, that.options.templateSettings), template = column.template, paramName = settings.paramName, field = column.field, html = '', idx, length, format = column.format, type = typeof template, columnValues = column.values;\n                if (column.command) {\n                    if (isArray(column.command)) {\n                        for (idx = 0, length = column.command.length; idx < length; idx++) {\n                            if (column.command[idx].visible) {\n                                html += kendo.format('#= {0}(data)? \\'{1}\\':\\'\\' #', column.command[idx].visible, that._createButton(column.command[idx]).replace(templateHashRegExp, '\\\\#'));\n                            } else {\n                                html += that._createButton(column.command[idx]).replace(templateHashRegExp, '\\\\#');\n                            }\n                        }\n                        return html;\n                    }\n                    return that._createButton(column.command).replace(templateHashRegExp, '\\\\#');\n                }\n                if (column.selectable) {\n                    return SELECTCOLUMNTMPL;\n                }\n                if (type === FUNCTION) {\n                    state.storage['tmpl' + state.count] = template;\n                    html += '#=this.tmpl' + state.count + '(' + paramName + ')#';\n                    state.count++;\n                } else if (type === STRING) {\n                    html += template;\n                } else if (columnValues && columnValues.length && isPlainObject(columnValues[0]) && 'value' in columnValues[0] && field) {\n                    html += '#var v =' + kendo.stringify(convertToObject(columnValues)).replace(templateHashRegExp, '\\\\#') + '#';\n                    html += '#var f = v[';\n                    if (!settings.useWithBlock) {\n                        html += paramName + '.';\n                    }\n                    html += field + ']#';\n                    html += '${f != null ? f : \\'\\'}';\n                } else {\n                    html += column.encoded ? '#:' : '#=';\n                    if (format) {\n                        html += 'kendo.format(\"' + format.replace(formatRegExp, '\\\\$1') + '\",';\n                    }\n                    if (field) {\n                        field = kendo.expr(field, paramName);\n                        html += field + '==null?\\'\\':' + field;\n                    } else {\n                        html += '\\'\\'';\n                    }\n                    if (format) {\n                        html += ')';\n                    }\n                    html += '#';\n                }\n                return html;\n            },\n            _templates: function () {\n                var that = this, options = that.options, dataSource = that.dataSource, groups = dataSource.group(), footer = that.footer || that.wrapper.find('.k-grid-footer'), aggregates = dataSource.aggregate(), columnLeafs = leafColumns(that.columns), columnsLocked = leafColumns(lockedColumns(that.columns)), columns = options.scrollable ? leafColumns(nonLockedColumns(that.columns)) : columnLeafs;\n                if (options.scrollable && columnsLocked.length) {\n                    if (options.rowTemplate || options.altRowTemplate) {\n                        throw new Error('Having both row template and locked columns is not supported');\n                    }\n                    that.rowTemplate = that._tmpl(options.rowTemplate, columns, false, true);\n                    that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true, true);\n                    that.lockedRowTemplate = that._tmpl(options.rowTemplate, columnsLocked);\n                    that.lockedAltRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columnsLocked, true);\n                } else {\n                    that.rowTemplate = that._tmpl(options.rowTemplate, columns);\n                    that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true);\n                }\n                if (that._hasDetails()) {\n                    that.detailTemplate = that._detailTmpl(options.detailTemplate || '');\n                }\n                if (that._group && !isEmptyObject(aggregates) || !isEmptyObject(aggregates) && !footer.length || grep(columnLeafs, function (column) {\n                        return column.footerTemplate;\n                    }).length) {\n                    that.footerTemplate = that._footerTmpl(columnLeafs, aggregates, 'footerTemplate', 'k-footer-template');\n                }\n                if (groups && grep(columnLeafs, function (column) {\n                        return column.groupFooterTemplate;\n                    }).length) {\n                    aggregates = $.map(groups, function (g) {\n                        return g.aggregates;\n                    });\n                    that.groupFooterTemplate = that._footerTmpl(columns, aggregates, 'groupFooterTemplate', 'k-group-footer', columnsLocked.length);\n                    if (options.scrollable && columnsLocked.length) {\n                        that.lockedGroupFooterTemplate = that._footerTmpl(columnsLocked, aggregates, 'groupFooterTemplate', 'k-group-footer');\n                    }\n                }\n                if (that.options.noRecords) {\n                    that.noRecordsTemplate = that._noRecordsTmpl();\n                }\n            },\n            _noRecordsTmpl: function () {\n                var wrapper = '<div class=\"{0}\">{1}</div>';\n                var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n                var scrollableNoGridHeightStyles = this.options.scrollable && !this.wrapper[0].style.height ? ' style=\"margin:0 auto;position:static;\"' : '';\n                var state = {\n                    storage: {},\n                    count: 0\n                };\n                var settings = $.extend({}, kendo.Template, this.options.templateSettings);\n                var paramName = settings.paramName;\n                var template;\n                var html = '';\n                var type;\n                var tmpl;\n                if (this.options.noRecords.template) {\n                    template = this.options.noRecords.template;\n                } else {\n                    template = kendo.format(defaultTemplate, this.options.messages.noRecords, scrollableNoGridHeightStyles);\n                }\n                type = typeof template;\n                if (type === 'function') {\n                    state.storage['tmpl' + state.count] = template;\n                    html += '#=this.tmpl' + state.count + '(' + paramName + ')#';\n                    state.count++;\n                } else if (type === 'string') {\n                    html += template;\n                }\n                tmpl = kendo.template(kendo.format(wrapper, NORECORDSCLASS, html), settings);\n                if (state.count > 0) {\n                    tmpl = $.proxy(tmpl, state.storage);\n                }\n                return tmpl;\n            },\n            _footerTmpl: function (columns, aggregates, templateName, rowClass, skipGroupCells) {\n                var that = this, settings = extend({}, kendo.Template, that.options.templateSettings), paramName = settings.paramName, html = '', idx, length, template, type, storage = {}, count = 0, scope = {}, groups = that._groups(), fieldsMap = that.dataSource._emptyAggregates(aggregates), column;\n                html += '<tr class=\"' + rowClass + '\">';\n                if (groups > 0 && !skipGroupCells) {\n                    html += groupCells(groups);\n                }\n                if (that._hasDetails()) {\n                    html += '<td class=\"k-hierarchy-cell\">&nbsp;</td>';\n                }\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column[templateName];\n                    type = typeof template;\n                    html += '<td' + stringifyAttributes(column.footerAttributes) + '>';\n                    if (template) {\n                        if (type !== FUNCTION) {\n                            scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + '[\\'' + column.field + '\\']' }) : {};\n                            template = kendo.template(template, scope);\n                        }\n                        storage['tmpl' + count] = template;\n                        html += '#=this.tmpl' + count + '(' + paramName + ')#';\n                        count++;\n                    } else {\n                        html += '&nbsp;';\n                    }\n                    html += '</td>';\n                }\n                html += '</tr>';\n                html = kendo.template(html, settings);\n                if (count > 0) {\n                    return proxy(html, storage);\n                }\n                return html;\n            },\n            _detailTmpl: function (template) {\n                var that = this, html = '', settings = extend({}, kendo.Template, that.options.templateSettings), paramName = settings.paramName, templateFunctionStorage = {}, templateFunctionCount = 0, groups = that._groups(), colspan = visibleColumns(leafColumns(that.columns)).length, type = typeof template;\n                html += '<tr class=\"k-detail-row\">';\n                if (groups > 0) {\n                    html += groupCells(groups);\n                }\n                html += '<td class=\"k-hierarchy-cell\"></td><td class=\"k-detail-cell\"' + (colspan ? ' colspan=\"' + colspan + '\"' : '') + '>';\n                if (type === FUNCTION) {\n                    templateFunctionStorage['tmpl' + templateFunctionCount] = template;\n                    html += '#=this.tmpl' + templateFunctionCount + '(' + paramName + ')#';\n                    templateFunctionCount++;\n                } else {\n                    html += template;\n                }\n                html += '</td></tr>';\n                html = kendo.template(html, settings);\n                if (templateFunctionCount > 0) {\n                    return proxy(html, templateFunctionStorage);\n                }\n                return html;\n            },\n            _hasDetails: function () {\n                var that = this;\n                return that.options.detailTemplate !== null || (that._events[DETAILINIT] || []).length;\n            },\n            _hasFilterRow: function () {\n                var filterable = this.options.filterable;\n                var hasFiltering = filterable && typeof filterable.mode == STRING && filterable.mode.indexOf('row') != -1;\n                var columns = this.columns;\n                var columnsWithoutFiltering = $.grep(columns, function (col) {\n                    return col.filterable === false;\n                });\n                if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                    hasFiltering = false;\n                }\n                return hasFiltering;\n            },\n            _details: function () {\n                var that = this;\n                if (that.options.scrollable && that._hasDetails() && lockedColumns(that.columns).length) {\n                    throw new Error('Having both detail template and locked columns is not supported');\n                }\n                that.table.on(CLICK + NS, '.k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse', function (e) {\n                    var button = $(this), expanding = button.hasClass('k-i-expand'), masterRow = button.closest('tr.k-master-row'), detailRow, detailTemplate = that.detailTemplate, data, hasDetails = that._hasDetails(), ariaLabelText = expanding ? COLLAPSE : EXPAND;\n                    button.toggleClass('k-i-expand', !expanding).toggleClass('k-i-collapse', expanding).attr(ARIALABEL, ariaLabelText);\n                    detailRow = masterRow.next();\n                    if (hasDetails && !detailRow.hasClass('k-detail-row')) {\n                        data = that.dataItem(masterRow);\n                        detailRow = $(detailTemplate(data)).addClass(masterRow.hasClass('k-alt') ? 'k-alt' : '').insertAfter(masterRow);\n                        that.angular('compile', function () {\n                            return {\n                                elements: detailRow.get(),\n                                data: [{ dataItem: data }]\n                            };\n                        });\n                        that.trigger(DETAILINIT, {\n                            masterRow: masterRow,\n                            detailRow: detailRow,\n                            data: data,\n                            detailCell: detailRow.find('.k-detail-cell')\n                        });\n                    }\n                    that.trigger(expanding ? DETAILEXPAND : DETAILCOLLAPSE, {\n                        masterRow: masterRow,\n                        detailRow: detailRow\n                    });\n                    detailRow.toggle(expanding);\n                    if (that._current) {\n                        that._current.attr('aria-expanded', expanding);\n                    }\n                    e.preventDefault();\n                    return false;\n                });\n            },\n            dataItem: function (tr) {\n                tr = $(tr)[0];\n                if (!tr) {\n                    return null;\n                }\n                var rows = this.tbody.children(), classesRegEx = /k-grouping-row|k-detail-row|k-group-footer/, idx = tr.sectionRowIndex, j, correctIdx;\n                correctIdx = idx;\n                for (j = 0; j < idx; j++) {\n                    if (classesRegEx.test(rows[j].className)) {\n                        correctIdx--;\n                    }\n                }\n                return this._data[correctIdx];\n            },\n            expandRow: function (tr) {\n                $(tr).find('> td .k-i-expand').click();\n            },\n            collapseRow: function (tr) {\n                $(tr).find('> td .k-i-collapse').click();\n            },\n            _createHeaderCells: function (columns, rowSpan) {\n                var that = this, idx, th, text, html = '', length, leafs = leafColumns(that.columns), field;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    th = columns[idx].column || columns[idx];\n                    text = that._headerCellText(th);\n                    field = '';\n                    var index = inArray(th, leafs);\n                    if (th.selectable) {\n                        html += '<th scope=\\'col\\'' + stringifyAttributes(th.headerAttributes);\n                        if (rowSpan && !columns[idx].colSpan) {\n                            html += ' rowspan=\\'' + rowSpan + '\\'';\n                        }\n                        if (index > -1) {\n                            html += kendo.attr('index') + '=\\'' + index + '\\'';\n                        }\n                        text = th.headerTemplate ? text : SELECTCOLUMNHEADERTMPL;\n                        html += '>' + text + '</th>';\n                    } else if (th.command) {\n                        html += '<th scope=\\'col\\'' + stringifyAttributes(th.headerAttributes);\n                        if (rowSpan && !columns[idx].colSpan) {\n                            html += ' rowspan=\\'' + rowSpan + '\\'';\n                        }\n                        if (index > -1) {\n                            html += kendo.attr('index') + '=\\'' + index + '\\'';\n                        }\n                        html += '>' + text + '</th>';\n                    } else {\n                        if (th.field) {\n                            field = kendo.attr('field') + '=\\'' + th.field + '\\' ';\n                        }\n                        html += '<th scope=\\'col\\' role=\\'columnheader\\' ' + field;\n                        html += ' aria-haspopup=\\'true\\'';\n                        if (rowSpan && !columns[idx].colSpan) {\n                            html += ' rowspan=\\'' + rowSpan + '\\'';\n                        }\n                        if (columns[idx].colSpan > 1) {\n                            html += 'colspan=\"' + (columns[idx].colSpan - hiddenLeafColumnsCount(th.columns)) + '\" ';\n                            html += kendo.attr('colspan') + '=\\'' + columns[idx].colSpan + '\\'';\n                        }\n                        if (th.title) {\n                            html += kendo.attr('title') + '=\"' + th.title.replace('\"', '&quot;').replace(/'/g, '\\'') + '\" ';\n                        }\n                        if (th.groupable !== undefined) {\n                            html += kendo.attr('groupable') + '=\\'' + th.groupable + '\\' ';\n                        }\n                        if (th.aggregates && th.aggregates.length) {\n                            html += kendo.attr('aggregates') + '=\\'' + th.aggregates + '\\'';\n                        }\n                        if (index > -1) {\n                            html += kendo.attr('index') + '=\\'' + index + '\\'';\n                        }\n                        html += stringifyAttributes(th.headerAttributes);\n                        html += '>' + text + '</th>';\n                    }\n                }\n                return html;\n            },\n            _appendLockedColumnContent: function () {\n                var columns = this.columns, idx, colgroup = this.table.find('colgroup'), cols = colgroup.find('col:not(.k-group-col,.k-hierarchy-col)'), length, lockedCols = $(), skipHiddenCount = 0, container, colSpan, spanIdx, colOffset = 0;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    if (columns[idx].locked) {\n                        if (isVisible(columns[idx])) {\n                            colSpan = 1;\n                            if (columns[idx].columns) {\n                                colSpan = leafColumns(columns[idx].columns).length - hiddenLeafColumnsCount(columns[idx].columns);\n                            }\n                            colSpan = colSpan || 1;\n                            for (spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                                lockedCols = lockedCols.add(cols.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                            }\n                            colOffset += colSpan - 1;\n                        } else {\n                            skipHiddenCount++;\n                        }\n                    }\n                }\n                container = $('<div class=\"k-grid-content-locked\"><table' + (isIE7 ? ' cellspacing=\"0\"' : '') + '><colgroup/><tbody></tbody></table></div>');\n                colgroup.detach();\n                container.find('colgroup').append(lockedCols);\n                colgroup.insertBefore(this.table.find('tbody'));\n                this.lockedContent = container.insertBefore(this.content);\n                this.lockedTable = container.children('table');\n            },\n            _appendLockedColumnFooter: function () {\n                var that = this;\n                var footer = that.footer;\n                var cells = footer.find('.k-footer-template>td');\n                var cols = footer.find('.k-grid-footer-wrap>table>colgroup>col');\n                var html = $('<div class=\"k-grid-footer-locked\"><table><colgroup /><tbody><tr class=\"k-footer-template\"></tr></tbody></table></div>');\n                var idx, length;\n                var groups = that._groups();\n                var lockedCells = $(), lockedCols = $();\n                lockedCells = lockedCells.add(cells.filter('.k-group-cell'));\n                for (idx = 0, length = leafColumns(lockedColumns(that.columns)).length; idx < length; idx++) {\n                    lockedCells = lockedCells.add(cells.eq(idx + groups));\n                }\n                lockedCols = lockedCols.add(cols.filter('.k-group-col'));\n                for (idx = 0, length = visibleColumns(leafColumns(visibleLockedColumns(that.columns))).length; idx < length; idx++) {\n                    lockedCols = lockedCols.add(cols.eq(idx + groups));\n                }\n                lockedCells.appendTo(html.find('tr'));\n                lockedCols.appendTo(html.find('colgroup'));\n                that.lockedFooter = html.prependTo(footer);\n            },\n            _appendLockedColumnHeader: function (container) {\n                var that = this, columns = this.columns, idx, html, length, colgroup, tr, trFilter, table, header, filtercellCells, rows = [], skipHiddenCount = 0, cols = $(), hasFilterRow = that._hasFilterRow(), filterCellOffset = 0, filterCells = $(), cell, leafColumnsCount = 0, cells = $();\n                colgroup = that.thead.prev().find('col:not(.k-group-col,.k-hierarchy-col)');\n                header = that.thead.find('tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)');\n                filtercellCells = that.thead.find('.k-filter-row').find('th:not(.k-group-cell,.k-hierarchy-cell)');\n                var colOffset = 0;\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    if (columns[idx].locked) {\n                        cell = header.eq(idx);\n                        leafColumnsCount = leafColumns(columns[idx].columns || []).length;\n                        if (isVisible(columns[idx])) {\n                            var colSpan = null;\n                            if (columns[idx].columns) {\n                                colSpan = leafColumnsCount - hiddenLeafColumnsCount(columns[idx].columns);\n                            }\n                            colSpan = colSpan || 1;\n                            for (var spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                                cols = cols.add(colgroup.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                            }\n                            colOffset += colSpan - 1;\n                        }\n                        mapColumnToCellRows([columns[idx]], childColumnsCells(cell), rows, 0, 0);\n                        leafColumnsCount = leafColumnsCount || 1;\n                        for (var j = 0; j < leafColumnsCount; j++) {\n                            filterCells = filterCells.add(filtercellCells.eq(filterCellOffset + j));\n                        }\n                        filterCellOffset += leafColumnsCount;\n                    }\n                    if (columns[idx].columns) {\n                        skipHiddenCount += hiddenLeafColumnsCount(columns[idx].columns);\n                    }\n                    if (!isVisible(columns[idx])) {\n                        skipHiddenCount++;\n                    }\n                }\n                if (rows.length) {\n                    html = '<div class=\"k-grid-header-locked\" style=\"width:1px\"><table' + (isIE7 ? ' cellspacing=\"0\"' : '') + '><colgroup/><thead>';\n                    html += new Array(rows.length + 1).join('<tr></tr>');\n                    html += (hasFilterRow ? '<tr class=\"k-filter-row\" />' : '') + '</thead></table></div>';\n                    table = $(html);\n                    colgroup = table.find('colgroup');\n                    colgroup.append(that.thead.prev().find('col.k-group-col').add(cols));\n                    tr = table.find('thead tr:not(.k-filter-row)');\n                    for (idx = 0, length = rows.length; idx < length; idx++) {\n                        cells = toJQuery(rows[idx]);\n                        tr.eq(idx).append(that.thead.find('tr:eq(' + idx + ') .k-group-cell').add(cells));\n                    }\n                    var count = removeEmptyRows(this.thead);\n                    if (rows.length < count) {\n                        removeRowSpanValue(table, count - rows.length);\n                    }\n                    trFilter = table.find('.k-filter-row');\n                    trFilter.append(that.thead.find('.k-filter-row .k-group-cell').add(filterCells));\n                    this.lockedHeader = table.prependTo(container);\n                    this.thead.find('.k-group-cell').remove();\n                    return true;\n                }\n                return false;\n            },\n            _removeLockedContainers: function () {\n                var elements = this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);\n                kendo.destroy(elements);\n                elements.off(NS).remove();\n                this.lockedHeader = this.lockedContent = this.lockedFooter = null;\n                this.selectable = null;\n            },\n            _thead: function () {\n                var that = this, columns = that.columns, hasDetails = that._hasDetails() && columns.length, hasFilterRow = that._hasFilterRow(), idx, html = '', thead = that.table.find('>thead'), hasTHead = that.element.find('thead:first').length > 0, tr;\n                if (!thead.length) {\n                    thead = $('<thead/>').insertBefore(that.tbody);\n                }\n                if (that.lockedHeader && that.thead) {\n                    tr = that.thead.find('tr:has(th):not(.k-filter-row)').html('');\n                    tr.remove();\n                    tr = $();\n                    that._removeLockedContainers();\n                } else if (hasTHead) {\n                    tr = that.element.find('thead:first tr:has(th):not(.k-filter-row)');\n                } else {\n                    tr = that.element.find('tr:has(th):first');\n                }\n                if (!tr.length) {\n                    tr = thead.children().first();\n                    if (!tr.length) {\n                        var rows = [{\n                                rowSpan: 1,\n                                cells: [],\n                                index: 0\n                            }];\n                        that._prepareColumns(rows, columns);\n                        for (idx = 0; idx < rows.length; idx++) {\n                            html += '<tr>';\n                            if (hasDetails) {\n                                html += '<th class=\"k-hierarchy-cell\" scope=\"col\">' + that.options.messages.expandCollapseColumnHeader + '</th>';\n                            }\n                            html += that._createHeaderCells(rows[idx].cells, rows[idx].rowSpan);\n                            html += '</tr>';\n                        }\n                        tr = $(html);\n                    }\n                }\n                if (hasFilterRow) {\n                    var filterRow = $('<tr/>');\n                    filterRow.addClass('k-filter-row');\n                    if (hasDetails || tr.find('.k-hierarchy-cell').length) {\n                        filterRow.prepend('<th class=\"k-hierarchy-cell\" scope=\"col\">&nbsp;</th>');\n                    }\n                    var existingFilterRow = (that.thead || thead).find('.k-filter-row');\n                    if (existingFilterRow.length) {\n                        kendo.destroy(existingFilterRow);\n                        existingFilterRow.remove();\n                    }\n                    thead.append(filterRow);\n                }\n                if (!tr.children().length) {\n                    html = '';\n                    if (hasDetails) {\n                        html += '<th class=\"k-hierarchy-cell\" scope=\"col\">&nbsp;</th>';\n                    }\n                    html += that._createHeaderCells(columns);\n                    tr.html(html);\n                } else if (hasDetails && !tr.find('.k-hierarchy-cell')[0]) {\n                    tr.prepend('<th class=\"k-hierarchy-cell\" scope=\"col\">&nbsp;</th>');\n                }\n                tr.attr('role', 'row').find('th').addClass('k-header');\n                if (!that.options.scrollable) {\n                    thead.addClass('k-grid-header');\n                }\n                tr.find('script').remove().end().prependTo(thead);\n                if (that.thead) {\n                    that._destroyColumnAttachments();\n                }\n                this.angular('cleanup', function () {\n                    return { elements: thead.find('th').get() };\n                });\n                this.angular('compile', function () {\n                    return {\n                        elements: thead.find('th').get(),\n                        data: map(columns, function (col) {\n                            return { column: col };\n                        })\n                    };\n                });\n                that.thead = thead.attr('role', 'rowgroup');\n                that._sortable();\n                that._filterable();\n                that._filterRow();\n                that._scrollable();\n                that._updateCols();\n                that._columnMenu();\n                var syncHeight;\n                var hasLockedColumns = this.options.scrollable && lockedColumns(this.columns).length;\n                if (hasLockedColumns) {\n                    syncHeight = that._appendLockedColumnHeader(that.thead.closest('.k-grid-header'));\n                    that._appendLockedColumnContent();\n                    that.lockedContent.bind('DOMMouseScroll' + NS + ' mousewheel' + NS, proxy(that._wheelScroll, that));\n                }\n                that._updateColumnCellIndex();\n                that._updateFirstColumnClass();\n                that._resizable();\n                that._draggable();\n                that._reorderable();\n                that._updateHeader(that._groups());\n                if (hasLockedColumns) {\n                    if (syncHeight) {\n                        that._syncLockedHeaderHeight();\n                    }\n                    that._applyLockedContainersWidth();\n                }\n                if (that.groupable) {\n                    that._attachGroupable();\n                }\n            },\n            _retrieveFirstColumn: function (columns, rows) {\n                var result = $();\n                if (rows.length && columns[0]) {\n                    var column = columns[0];\n                    while (column.columns && column.columns.length) {\n                        column = column.columns[0];\n                        rows = rows.filter(':not(:first())');\n                    }\n                    result = result.add(rows);\n                }\n                return result;\n            },\n            _updateFirstColumnClass: function () {\n                var that = this, columns = that.columns || [], hasDetails = that._hasDetails() && columns.length;\n                if (!hasDetails && !that._groups()) {\n                    var tr = that.thead.find('>tr:not(.k-filter-row):not(:first)');\n                    columns = nonLockedColumns(columns);\n                    var rows = that._retrieveFirstColumn(columns, tr);\n                    if (that._isLocked()) {\n                        tr = that.lockedHeader.find('thead>tr:not(.k-filter-row):not(:first)');\n                        columns = lockedColumns(that.columns);\n                        rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                    }\n                    rows.each(function () {\n                        var ths = $(this).find('th');\n                        ths.removeClass('k-first');\n                        ths.eq(0).addClass('k-first');\n                    });\n                }\n            },\n            _prepareColumns: function (rows, columns, parentCell, parentRow) {\n                var row = parentRow || rows[rows.length - 1];\n                var childRow = rows[row.index + 1];\n                var totalColSpan = 0;\n                for (var idx = 0; idx < columns.length; idx++) {\n                    var cell = {\n                        column: columns[idx],\n                        colSpan: 0\n                    };\n                    row.cells.push(cell);\n                    if (columns[idx].columns && columns[idx].columns.length) {\n                        if (!childRow) {\n                            childRow = {\n                                rowSpan: 0,\n                                cells: [],\n                                index: rows.length\n                            };\n                            rows.push(childRow);\n                        }\n                        cell.colSpan = columns[idx].columns.length;\n                        this._prepareColumns(rows, columns[idx].columns, cell, childRow);\n                        totalColSpan += cell.colSpan - 1;\n                        row.rowSpan = rows.length - row.index;\n                    }\n                }\n                if (parentCell) {\n                    parentCell.colSpan += totalColSpan;\n                }\n            },\n            _wheelScroll: function (e) {\n                if (e.ctrlKey) {\n                    return;\n                }\n                var content = this.content;\n                if (this.options.scrollable.virtual) {\n                    content = this.virtualScrollable.verticalScrollbar;\n                }\n                var scrollTop = content.scrollTop(), delta = kendo.wheelDeltaY(e);\n                if (delta) {\n                    if (content[0].scrollHeight > content[0].clientHeight && (content[0].scrollTop < content[0].scrollHeight - content[0].clientHeight && delta < 0 || content[0].scrollTop > 0 && delta > 0)) {\n                        e.preventDefault();\n                    }\n                    content.scrollTop(scrollTop + -delta);\n                }\n            },\n            _isLocked: function () {\n                return this.lockedHeader != null;\n            },\n            _updateHeaderCols: function () {\n                var table = this.thead.parent().add(this.table);\n                if (this._isLocked()) {\n                    normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n                } else {\n                    normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), 0);\n                }\n            },\n            _updateCols: function (table) {\n                table = table || this.thead.parent().add(this.table);\n                this._appendCols(table, this._isLocked());\n            },\n            _updateLockedCols: function (table) {\n                if (this._isLocked()) {\n                    table = table || this.lockedHeader.find('table').add(this.lockedTable);\n                    normalizeCols(table, visibleLeafColumns(visibleLockedColumns(this.columns)), this._hasDetails(), this._groups());\n                }\n            },\n            _appendCols: function (table, locked) {\n                if (locked) {\n                    normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n                } else {\n                    normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), this._groups());\n                }\n            },\n            _autoColumns: function (schema) {\n                if (schema && schema.toJSON) {\n                    var that = this, field, encoded;\n                    schema = schema.toJSON();\n                    encoded = !(that.table.find('tbody tr').length > 0 && (!that.dataSource || !that.dataSource.transport));\n                    for (field in schema) {\n                        that.columns.push({\n                            field: field,\n                            encoded: encoded,\n                            headerAttributes: { id: kendo.guid() }\n                        });\n                    }\n                    that._thead();\n                    that._templates();\n                }\n            },\n            _rowsHtml: function (data, templates) {\n                var that = this, html = '', idx, rowTemplate = templates.rowTemplate, altRowTemplate = templates.altRowTemplate, length;\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (idx % 2) {\n                        html += altRowTemplate(data[idx]);\n                    } else {\n                        html += rowTemplate(data[idx]);\n                    }\n                    that._data.push(data[idx]);\n                }\n                return html;\n            },\n            _groupRowHtml: function (group, colspan, level, groupHeaderBuilder, templates, skipColspan) {\n                var that = this, html = '', idx, length, field = group.field, column = grep(leafColumns(that.columns), function (column) {\n                        return column.field == field;\n                    })[0] || {}, template = column.groupHeaderTemplate, text = (column.title || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded), footerDefaults = that._groupAggregatesDefaultObject || {}, groupItems = group.items, aggregates = extend({}, footerDefaults, group.aggregates), headerData = extend({}, {\n                        field: group.field,\n                        value: group.value,\n                        items: groupItems,\n                        aggregates: aggregates\n                    }, group.aggregates[group.field]), groupFooterTemplate = templates.groupFooterTemplate;\n                if (template) {\n                    text = typeof template === FUNCTION ? template(headerData) : kendo.template(template)(headerData);\n                }\n                html += groupHeaderBuilder(colspan, level, text);\n                if (group.hasSubgroups) {\n                    for (idx = 0, length = groupItems.length; idx < length; idx++) {\n                        html += that._groupRowHtml(groupItems[idx], skipColspan ? colspan : colspan - 1, level + 1, groupHeaderBuilder, templates, skipColspan);\n                    }\n                } else {\n                    html += that._rowsHtml(groupItems, templates);\n                }\n                if (groupFooterTemplate) {\n                    var footerData = {};\n                    for (var aggregate in aggregates) {\n                        footerData[aggregate] = extend({}, aggregates[aggregate], {\n                            group: {\n                                field: group.field,\n                                value: group.value,\n                                items: groupItems\n                            }\n                        });\n                    }\n                    html += groupFooterTemplate(footerData);\n                }\n                return html;\n            },\n            collapseGroup: function (group) {\n                group = $(group);\n                var level, groupable = this.options.groupable, showFooter = groupable.showFooter, footerCount = showFooter ? 0 : 1, offset, relatedGroup = $(), idx, length, tr;\n                if (this._isLocked()) {\n                    if (!group.closest('div').hasClass('k-grid-content-locked')) {\n                        relatedGroup = group.nextAll('tr');\n                        group = this.lockedTable.find('>tbody>tr:eq(' + group.index() + ')');\n                    } else {\n                        relatedGroup = this.tbody.children('tr:eq(' + group.index() + ')').nextAll('tr');\n                    }\n                }\n                level = group.find('.k-group-cell').length;\n                group.find('.k-i-collapse').addClass('k-i-expand').removeClass('k-i-collapse');\n                group.find('td[aria-expanded=\\'true\\']:first').attr('aria-expanded', false).find('a').attr(ARIALABEL, EXPAND);\n                group = group.nextAll('tr');\n                var toHide = [];\n                for (idx = 0, length = group.length; idx < length; idx++) {\n                    tr = group.eq(idx);\n                    offset = tr.find('.k-group-cell').length;\n                    if (tr.hasClass('k-grouping-row')) {\n                        footerCount++;\n                    } else if (tr.hasClass('k-group-footer')) {\n                        footerCount--;\n                    }\n                    if (offset <= level || tr.hasClass('k-group-footer') && footerCount < 0) {\n                        break;\n                    }\n                    if (relatedGroup.length) {\n                        toHide.push(relatedGroup[idx]);\n                    }\n                    toHide.push(tr[0]);\n                }\n                $(toHide).hide();\n            },\n            expandGroup: function (group) {\n                group = $(group);\n                var that = this, showFooter = that.options.groupable.showFooter, level, tr, offset, relatedGroup = $(), idx, length, footersVisibility = [], groupsCount = 1;\n                if (this._isLocked()) {\n                    if (!group.closest('div').hasClass('k-grid-content-locked')) {\n                        relatedGroup = group.nextAll('tr');\n                        group = this.lockedTable.find('>tbody>tr:eq(' + group.index() + ')');\n                    } else {\n                        relatedGroup = this.tbody.children('tr:eq(' + group.index() + ')').nextAll('tr');\n                    }\n                }\n                level = group.find('.k-group-cell').length;\n                group.find('.k-i-expand').addClass('k-i-collapse').removeClass('k-i-expand');\n                group.find('td[aria-expanded=\\'false\\']:first').attr('aria-expanded', true).find('a').attr(ARIALABEL, COLLAPSE);\n                group = group.nextAll('tr');\n                for (idx = 0, length = group.length; idx < length; idx++) {\n                    tr = group.eq(idx);\n                    offset = tr.find('.k-group-cell').length;\n                    if (offset <= level) {\n                        break;\n                    }\n                    if (offset == level + 1 && !tr.hasClass('k-detail-row')) {\n                        tr.show();\n                        relatedGroup.eq(idx).show();\n                        if (tr.hasClass('k-grouping-row') && tr.find('.k-icon').hasClass('k-i-collapse')) {\n                            that.expandGroup(tr);\n                        }\n                        if (tr.hasClass('k-master-row') && tr.find('.k-icon').hasClass('k-i-collapse')) {\n                            tr.next().show();\n                            relatedGroup.eq(idx + 1).show();\n                        }\n                    }\n                    if (tr.hasClass('k-grouping-row')) {\n                        if (showFooter) {\n                            footersVisibility.push(tr.is(':visible'));\n                        }\n                        groupsCount++;\n                    }\n                    if (tr.hasClass('k-group-footer')) {\n                        if (showFooter) {\n                            tr.toggle(footersVisibility.pop());\n                        }\n                        if (groupsCount == 1) {\n                            tr.show();\n                            relatedGroup.eq(idx).show();\n                        } else {\n                            groupsCount--;\n                        }\n                    }\n                }\n            },\n            _updateHeader: function (groups) {\n                var that = this, container = that._isLocked() ? that.lockedHeader.find('thead') : that.thead, filterCells = container.find('tr.k-filter-row').find('th.k-group-cell').length, length = container.find('tr:first').find('th.k-group-cell').length, rows = container.children('tr:not(:first)').filter(function () {\n                        return !$(this).children(':visible').length;\n                    });\n                if (groups > length) {\n                    $(new Array(groups - length + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">' + that.options.messages.expandCollapseColumnHeader + '</th>')).prependTo(container.children('tr:not(.k-filter-row)'));\n                    if (that.element.is(':visible')) {\n                        rows.find('th.k-group-cell').hide();\n                    }\n                } else if (groups < length) {\n                    container.find('tr').each(function () {\n                        $(this).find('th.k-group-cell').filter(':eq(' + groups + '),' + ':gt(' + groups + ')').remove();\n                    });\n                }\n                if (groups > filterCells) {\n                    $(new Array(groups - filterCells + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">&nbsp;</th>')).prependTo(container.find('.k-filter-row'));\n                }\n            },\n            _firstDataItem: function (data, grouped) {\n                if (data && grouped) {\n                    if (data.hasSubgroups) {\n                        data = this._firstDataItem(data.items[0], grouped);\n                    } else {\n                        data = data.items[0];\n                    }\n                }\n                return data;\n            },\n            _updateTablesWidth: function () {\n                var that = this, tables;\n                if (!that._isLocked()) {\n                    return;\n                }\n                tables = $('>.k-grid-footer>.k-grid-footer-wrap>table', that.wrapper).add(that.thead.parent()).add(that.table);\n                that._footerWidth = tableWidth(tables.eq(0));\n                tables.width(that._footerWidth);\n                tables = $('>.k-grid-footer>.k-grid-footer-locked>table', that.wrapper).add(that.lockedHeader.find('>table')).add(that.lockedTable);\n                tables.width(tableWidth(tables.eq(0)));\n            },\n            hideColumn: function (column) {\n                var that = this, cell, tables, idx, cols, colWidth, position, width = 0, headerCellIndex, length, footer = that.footer || that.wrapper.find('.k-grid-footer'), columns = that.columns, visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find('>table>thead')).filter(isCellVisible).length : 0, columnIndex;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(flatColumns(columns), function (item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(flatColumns(columns), function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || !isVisible(column)) {\n                    return;\n                }\n                if (column.columns && column.columns.length) {\n                    position = columnVisiblePosition(column, columns);\n                    setColumnVisibility(column, false);\n                    setCellVisibility(elements($('>table>thead', that.lockedHeader), that.thead, '>tr:eq(' + position.row + ')>th'), position.cell, false);\n                    for (idx = 0; idx < column.columns.length; idx++) {\n                        this.hideColumn(column.columns[idx]);\n                    }\n                    that.trigger(COLUMNHIDE, { column: column });\n                    return;\n                }\n                columnIndex = inArray(column, visibleColumns(leafColumns(columns)));\n                setColumnVisibility(column, false);\n                that._setParentsVisibility(column, false);\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n                var container = that.thead;\n                headerCellIndex = columnIndex;\n                if (that.lockedHeader && visibleLocked > columnIndex) {\n                    container = that.lockedHeader.find('>table>thead');\n                } else {\n                    headerCellIndex -= visibleLocked;\n                }\n                cell = leafDataCells(container).filter(isCellVisible).eq(headerCellIndex);\n                cell[0].style.display = 'none';\n                setCellVisibility(elements($('>table>thead', that.lockedHeader), that.thead, '>tr.k-filter-row>th'), columnIndex, false);\n                if (footer[0]) {\n                    that._updateCols(footer.find('>.k-grid-footer-wrap>table'));\n                    that._updateLockedCols(footer.find('>.k-grid-footer-locked>table'));\n                    setCellVisibility(footer.find('.k-footer-template>td'), columnIndex, false);\n                }\n                if (that.lockedTable && visibleLocked > columnIndex) {\n                    hideColumnCells(that.lockedTable.find('>tbody>tr'), columnIndex);\n                } else {\n                    hideColumnCells(that.tbody.children(), columnIndex - visibleLocked);\n                }\n                if (that.lockedTable) {\n                    that._updateTablesWidth();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n                    that._syncLockedHeaderHeight();\n                    that._syncLockedFooterHeight();\n                } else {\n                    cols = that.thead.prev().find('col');\n                    for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n                        if (colWidth && colWidth.indexOf('%') == -1) {\n                            width += parseInt(colWidth, 10);\n                        } else {\n                            width = 0;\n                            break;\n                        }\n                    }\n                    tables = $('>.k-grid-header table:first,>.k-grid-footer table:first', that.wrapper).add(that.table);\n                    that._footerWidth = null;\n                    if (width) {\n                        tables.each(function () {\n                            this.style.width = width + 'px';\n                        });\n                        that._footerWidth = width;\n                    }\n                    if (browser.msie && browser.version == 8) {\n                        tables.css('display', 'inline-table');\n                        setTimeout(function () {\n                            tables.css('display', 'table');\n                        }, 1);\n                    }\n                }\n                that._updateFirstColumnClass();\n                that.trigger(COLUMNHIDE, { column: column });\n            },\n            _setParentsVisibility: function (column, visible) {\n                var columns = this.columns;\n                var idx;\n                var parents = [];\n                var parent;\n                var position;\n                var cell;\n                var colSpan;\n                var predicate = visible ? function (p) {\n                    return visibleColumns(p.columns).length && p.hidden;\n                } : function (p) {\n                    return !visibleColumns(p.columns).length && !p.hidden;\n                };\n                if (columnParents(column, columns, parents) && parents.length) {\n                    for (idx = parents.length - 1; idx >= 0; idx--) {\n                        parent = parents[idx];\n                        position = columnPosition(parent, columns);\n                        cell = elements($('>table>thead', this.lockedHeader), this.thead, '>tr:eq(' + position.row + ')>th:not(.k-group-cell):not(.k-hierarchy-cell)').eq(position.cell);\n                        if (predicate(parent)) {\n                            setColumnVisibility(parent, visible);\n                            cell[0].style.display = visible ? '' : 'none';\n                        }\n                        if (cell.filter('[' + kendo.attr('colspan') + ']').length) {\n                            colSpan = parseInt(cell.attr(kendo.attr('colspan')), 10);\n                            cell[0].colSpan = colSpan - hiddenLeafColumnsCount(parent.columns) || 1;\n                        }\n                    }\n                }\n            },\n            showColumn: function (column) {\n                var that = this, idx, length, cell, tables, width, headerCellIndex, position, colWidth, cols, columns = that.columns, footer = that.footer || that.wrapper.find('.k-grid-footer'), lockedColumnsCount = that.lockedHeader ? leafDataCells(that.lockedHeader.find('>table>thead')).length : 0, columnIndex;\n                if (typeof column == 'number') {\n                    column = columns[column];\n                } else if (isPlainObject(column)) {\n                    column = grep(flatColumns(columns), function (item) {\n                        return item === column;\n                    })[0];\n                } else {\n                    column = grep(flatColumns(columns), function (item) {\n                        return item.field === column;\n                    })[0];\n                }\n                if (!column || isVisible(column)) {\n                    return;\n                }\n                if (column.columns && column.columns.length) {\n                    position = columnPosition(column, columns);\n                    setColumnVisibility(column, true);\n                    setCellVisibility(elements($('>table>thead', that.lockedHeader), that.thead, '>tr:eq(' + position.row + ')>th'), position.cell, true);\n                    for (idx = 0; idx < column.columns.length; idx++) {\n                        this.showColumn(column.columns[idx]);\n                    }\n                    that.trigger(COLUMNSHOW, { column: column });\n                    return;\n                }\n                columnIndex = inArray(column, leafColumns(columns));\n                setColumnVisibility(column, true);\n                that._setParentsVisibility(column, true);\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n                var container = that.thead;\n                headerCellIndex = columnIndex;\n                if (that.lockedHeader && lockedColumnsCount > columnIndex) {\n                    container = that.lockedHeader.find('>table>thead');\n                } else {\n                    headerCellIndex -= lockedColumnsCount;\n                }\n                cell = leafDataCells(container).eq(headerCellIndex);\n                cell[0].style.display = '';\n                setCellVisibility(elements($('>table>thead', that.lockedHeader), that.thead, '>tr.k-filter-row>th'), columnIndex, true);\n                if (footer[0]) {\n                    that._updateCols(footer.find('>.k-grid-footer-wrap>table'));\n                    that._updateLockedCols(footer.find('>.k-grid-footer-locked>table'));\n                    setCellVisibility(footer.find('.k-footer-template>td'), columnIndex, true);\n                }\n                if (that.lockedTable && lockedColumnsCount > columnIndex) {\n                    showColumnCells(that.lockedTable.find('>tbody>tr'), columnIndex);\n                } else {\n                    showColumnCells(that.tbody.children(), columnIndex - lockedColumnsCount);\n                }\n                if (that.lockedTable) {\n                    that._updateTablesWidth();\n                    that._applyLockedContainersWidth();\n                    that._syncLockedContentHeight();\n                    that._syncLockedHeaderHeight();\n                } else {\n                    tables = $('>.k-grid-header table:first,>.k-grid-footer table:first', that.wrapper).add(that.table);\n                    if (!column.width) {\n                        tables.width('');\n                    } else {\n                        width = 0;\n                        cols = that.thead.prev().find('col');\n                        for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                            colWidth = cols[idx].style.width;\n                            if (colWidth.indexOf('%') > -1) {\n                                width = 0;\n                                break;\n                            }\n                            width += parseInt(colWidth, 10);\n                        }\n                        that._footerWidth = null;\n                        if (width) {\n                            tables.each(function () {\n                                this.style.width = width + 'px';\n                            });\n                            that._footerWidth = width;\n                        }\n                    }\n                }\n                that._updateFirstColumnClass();\n                that.trigger(COLUMNSHOW, { column: column });\n            },\n            _progress: function (toggle) {\n                var element = this.element;\n                if (this._editContainer && this._editMode() === 'popup') {\n                    element = this._editContainer;\n                } else if (this.lockedContent) {\n                    element = this.wrapper;\n                } else if (this.element.is('table')) {\n                    element = this.element.parent();\n                } else if (this.content && this.content.length) {\n                    element = this.content;\n                }\n                kendo.ui.progress(element, toggle);\n            },\n            _resize: function (size, force) {\n                this._syncLockedContentHeight();\n                this._syncLockedHeaderHeight();\n                if (this.content) {\n                    this._setContentWidth();\n                    this._setContentHeight();\n                }\n                if (this.virtualScrollable && (force || this._rowHeight)) {\n                    if (force) {\n                        this._rowHeight = null;\n                    }\n                    this.virtualScrollable.repaintScrollbar();\n                }\n            },\n            _isActiveInTable: function () {\n                var active = activeElement();\n                if (!active) {\n                    return false;\n                }\n                return this.table[0] === active || $.contains(this.table[0], active) || this._isLocked() && (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active));\n            },\n            refresh: function (e) {\n                var that = this, data = that.dataSource.view(), navigatable = that.options.navigatable, currentIndex, current = $(that.current()), isCurrentInHeader = false, hasCheckBoxColumn = !!$.grep(leafColumns(that.columns), function (col) {\n                        return col.selectable;\n                    }).length, groups = (that.dataSource.group() || []).length, colspan = groups + visibleLeafColumns(visibleColumns(that.columns)).length;\n                if (e && e.action === 'itemchange' && that.editable) {\n                    return;\n                }\n                if (e && e.action === 'remove' && that.editable && that.editable.options.model && inArray(that.editable.options.model, e.items) > -1) {\n                    that.editable.options.model.unbind(CHANGE, that._modelChangeHandler);\n                }\n                e = e || {};\n                if (that.trigger('dataBinding', {\n                        action: e.action || 'rebind',\n                        index: e.index,\n                        items: e.items\n                    })) {\n                    return;\n                }\n                that._angularItems('cleanup');\n                if (navigatable && (that._isActiveInTable() || that._editContainer && that._editContainer.data('kendoWindow'))) {\n                    isCurrentInHeader = current.is('th');\n                    currentIndex = Math.max(that.cellIndex(current), 0);\n                }\n                that._destroyEditable();\n                that._progress(false);\n                that._hideResizeHandle();\n                that._data = [];\n                if (!that.columns.length) {\n                    that._autoColumns(that._firstDataItem(data[0], groups));\n                    colspan = groups + that.columns.length;\n                }\n                that._group = groups > 0 || that._group;\n                if (that._group) {\n                    that._templates();\n                    that._updateCols();\n                    that._updateLockedCols();\n                    that._updateHeader(groups);\n                    that._group = groups > 0;\n                }\n                that._renderContent(data, colspan, groups);\n                that._renderLockedContent(data, colspan, groups);\n                that._footer();\n                that._renderNoRecordsContent();\n                that._setContentHeight();\n                that._setContentWidth(that.content && that.content.scrollLeft());\n                if (that.lockedTable) {\n                    if (that.options.scrollable.virtual) {\n                        that.content.find('>.k-virtual-scrollable-wrap').trigger('scroll');\n                    } else if (that.touchScroller) {\n                        that.touchScroller.movable.trigger('change');\n                    } else {\n                        that.wrapper.one('scroll', function (e) {\n                            e.stopPropagation();\n                        });\n                        that.content.trigger('scroll');\n                    }\n                }\n                that._restoreCurrent(currentIndex, isCurrentInHeader);\n                if (that.touchScroller) {\n                    that.touchScroller.contentResized();\n                }\n                if (that.selectable) {\n                    that.selectable.resetTouchEvents();\n                }\n                that._muteAngularRebind(function () {\n                    that._angularItems('compile');\n                });\n                if (hasCheckBoxColumn) {\n                    that._toggleHeaderCheckState(false);\n                }\n                if (that.options.persistSelection && (that.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell || hasCheckBoxColumn)) {\n                    that._restoreSelection();\n                }\n                that.trigger(DATABOUND);\n            },\n            _restoreCurrent: function (currentIndex, isCurrentInHeader) {\n                if (currentIndex === undefined || currentIndex < 0) {\n                    return;\n                }\n                this._removeCurrent();\n                if (isCurrentInHeader) {\n                    this._setCurrent(this.thead.find('th:not(.k-group-cell)').eq(currentIndex));\n                } else {\n                    var rowIndex = 0;\n                    if (this._rowVirtualIndex) {\n                        rowIndex = this.virtualScrollable.position(this._rowVirtualIndex);\n                    } else {\n                        currentIndex = 0;\n                    }\n                    var row = $();\n                    if (this.lockedTable) {\n                        row = this.lockedTable.find('>tbody>tr').eq(rowIndex);\n                    }\n                    row = row.add(this.tbody.children().eq(rowIndex));\n                    var td = row.find('>td:not(.k-group-cell):not(.k-hierarchy-cell)').eq(currentIndex);\n                    this._setCurrent(td);\n                }\n                if (this._current) {\n                    focusTable(this._current.closest('table')[0], true);\n                }\n            },\n            _restoreSelection: function () {\n                var that = this, allRows = that.items(), selectedRows;\n                selectedRows = grep(allRows, function (row) {\n                    var dataItemKey = that.dataItem(row)[that.dataSource.options.schema.model.id];\n                    if (that._selectedIds[dataItemKey]) {\n                        return row;\n                    }\n                });\n                that.select(selectedRows);\n            },\n            _angularItems: function (cmd) {\n                kendo.ui.DataBoundWidget.fn._angularItems.call(this, cmd);\n                if (cmd === 'cleanup') {\n                    this._cleanupDetailItems();\n                }\n                this._angularGroupItems(cmd);\n                this._angularGroupFooterItems(cmd);\n            },\n            _cleanupDetailItems: function () {\n                var that = this;\n                if (that._hasDetails()) {\n                    that.angular('cleanup', function () {\n                        return { elements: that.tbody.children('.k-detail-row') };\n                    });\n                    that.tbody.find('.k-detail-cell').empty();\n                }\n            },\n            _angularGroupItems: function (cmd) {\n                var that = this, container = that.tbody;\n                if (that.lockedContent) {\n                    container = that.lockedTable.find('tbody');\n                }\n                if (that._group) {\n                    that.angular(cmd, function () {\n                        return {\n                            elements: container.children('.k-grouping-row'),\n                            data: $.map(groupRows(that.dataSource.view()), function (dataItem) {\n                                return { dataItem: dataItem };\n                            })\n                        };\n                    });\n                }\n            },\n            _angularGroupFooterItems: function (cmd) {\n                var that = this, container = that.tbody;\n                if (that.lockedContent) {\n                    container = that.element;\n                }\n                if (that._group && that.groupFooterTemplate) {\n                    that.angular(cmd, function () {\n                        return {\n                            elements: container.find('.k-group-footer'),\n                            data: $.map(groupFooters(that.dataSource.view()), function (dataItem) {\n                                return { dataItem: dataItem };\n                            })\n                        };\n                    });\n                }\n            },\n            _renderContent: function (data, colspan, groups) {\n                var that = this, idx, length, html = '', isLocked = that.lockedContent != null, templates = {\n                        rowTemplate: that.rowTemplate,\n                        altRowTemplate: that.altRowTemplate,\n                        groupFooterTemplate: that.groupFooterTemplate\n                    };\n                colspan = isLocked ? colspan - visibleLeafColumns(visibleLockedColumns(that.columns)).length : colspan;\n                if (groups > 0) {\n                    colspan = isLocked ? colspan - groups : colspan;\n                    if (that.detailTemplate) {\n                        colspan++;\n                    }\n                    if (that.groupFooterTemplate) {\n                        that._groupAggregatesDefaultObject = that.dataSource.aggregates();\n                    }\n                    for (idx = 0, length = data.length; idx < length; idx++) {\n                        html += that._groupRowHtml(data[idx], colspan, 0, isLocked ? groupRowLockedContentBuilder : groupRowBuilder, templates, isLocked);\n                    }\n                } else {\n                    html += that._rowsHtml(data, templates);\n                }\n                that.tbody = appendContent(that.tbody, that.table, html, this.options.$angular);\n            },\n            _renderLockedContent: function (data, colspan, groups) {\n                var html = '', idx, length, templates = {\n                        rowTemplate: this.lockedRowTemplate,\n                        altRowTemplate: this.lockedAltRowTemplate,\n                        groupFooterTemplate: this.lockedGroupFooterTemplate\n                    };\n                if (this.lockedContent) {\n                    var table = this.lockedTable;\n                    if (groups > 0) {\n                        colspan = colspan - visibleColumns(leafColumns(nonLockedColumns(this.columns))).length;\n                        for (idx = 0, length = data.length; idx < length; idx++) {\n                            html += this._groupRowHtml(data[idx], colspan, 0, groupRowBuilder, templates);\n                        }\n                    } else {\n                        html = this._rowsHtml(data, templates);\n                    }\n                    appendContent(table.children('tbody'), table, html, this.options.$angular);\n                    this._syncLockedContentHeight();\n                }\n            },\n            _adjustRowsHeight: function (table1, table2) {\n                var rows = table1[0].rows, length = rows.length, idx, rows2 = table2[0].rows, containers = table1.add(table2), containersLength = containers.length, heights = [];\n                for (idx = 0; idx < length; idx++) {\n                    if (!rows2[idx]) {\n                        break;\n                    }\n                    if (rows[idx].style.height) {\n                        rows[idx].style.height = rows2[idx].style.height = '';\n                    }\n                }\n                for (idx = 0; idx < length; idx++) {\n                    if (!rows2[idx]) {\n                        break;\n                    }\n                    var offsetHeight1 = rows[idx].offsetHeight;\n                    var offsetHeight2 = rows2[idx].offsetHeight;\n                    var height = 0;\n                    if (offsetHeight1 > offsetHeight2) {\n                        height = offsetHeight1;\n                    } else if (offsetHeight1 < offsetHeight2) {\n                        height = offsetHeight2;\n                    }\n                    heights.push(height);\n                }\n                for (idx = 0; idx < containersLength; idx++) {\n                    containers[idx].style.display = 'none';\n                }\n                for (idx = 0; idx < length; idx++) {\n                    if (heights[idx]) {\n                        rows[idx].style.height = rows2[idx].style.height = heights[idx] + 1 + 'px';\n                    }\n                }\n                for (idx = 0; idx < containersLength; idx++) {\n                    containers[idx].style.display = '';\n                }\n            }\n        });\n        if (kendo.ExcelMixin) {\n            kendo.ExcelMixin.extend(Grid.prototype);\n        }\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Grid.prototype);\n            Grid.prototype._drawPDF_autoPageBreak = function (progress) {\n                var grid = this;\n                var result = new $.Deferred();\n                var dataSource = grid.dataSource;\n                var allPages = grid.options.pdf.allPages;\n                var origBody = grid.wrapper.find('table[role=\"grid\"] > tbody');\n                var cont = $('<div>').css({\n                    position: 'absolute',\n                    left: -10000,\n                    top: -10000\n                });\n                var clone = grid.wrapper.clone().css({\n                    height: 'auto',\n                    width: 'auto'\n                }).appendTo(cont);\n                clone.find('.k-grid-content').css({\n                    height: 'auto',\n                    width: 'auto',\n                    overflow: 'visible'\n                });\n                clone.find('table[role=\"grid\"]').css({\n                    height: 'auto',\n                    width: '100%',\n                    overflow: 'visible'\n                });\n                clone.find('.k-grid-pager, .k-grid-toolbar, .k-grouping-header').remove();\n                clone.find('.k-grid-header').css({ paddingRight: 0 });\n                this._initPDFProgress(progress);\n                var body = clone.find('table[role=\"grid\"] > tbody').empty();\n                var startingPage = dataSource.page();\n                function resolve() {\n                    if (allPages && startingPage !== undefined) {\n                        dataSource.one('change', draw);\n                        dataSource.page(startingPage);\n                    } else {\n                        grid.refresh();\n                        draw();\n                    }\n                }\n                function draw() {\n                    cont.appendTo(document.body);\n                    var options = $.extend({}, grid.options.pdf, {\n                        _destructive: true,\n                        progress: function (p) {\n                            progress.notify({\n                                page: p.page,\n                                pageNumber: p.pageNum,\n                                progress: 0.5 + p.pageNum / p.totalPages / 2,\n                                totalPages: p.totalPages\n                            });\n                        }\n                    });\n                    kendo.drawing.drawDOM(clone, options).always(function () {\n                        cont.remove();\n                    }).then(function (group) {\n                        result.resolve(group);\n                    }).fail(function (err) {\n                        result.reject(err);\n                    });\n                }\n                function renderPage() {\n                    var pageNum = dataSource.page();\n                    var totalPages = allPages ? dataSource.totalPages() : 1;\n                    body.append(origBody.find('tr'));\n                    if (pageNum < totalPages) {\n                        dataSource.page(pageNum + 1);\n                    } else {\n                        dataSource.unbind('change', renderPage);\n                        resolve();\n                    }\n                }\n                if (allPages) {\n                    dataSource.bind('change', renderPage);\n                    dataSource.page(1);\n                } else {\n                    renderPage();\n                }\n                return result.promise();\n            };\n            Grid.prototype._drawPDF = function (progress) {\n                var grid = this;\n                if (grid.options.pdf.paperSize && grid.options.pdf.paperSize != 'auto') {\n                    return grid._drawPDF_autoPageBreak(progress);\n                }\n                var result = new $.Deferred();\n                var dataSource = grid.dataSource;\n                var allPages = grid.options.pdf.allPages;\n                this._initPDFProgress(progress);\n                var doc = new kendo.drawing.Group();\n                var startingPage = dataSource.page();\n                function resolve() {\n                    if (allPages && startingPage !== undefined) {\n                        dataSource.unbind('change', exportPage);\n                        dataSource.one('change', function () {\n                            result.resolve(doc);\n                        });\n                        dataSource.page(startingPage);\n                    } else {\n                        result.resolve(doc);\n                    }\n                }\n                function exportPage() {\n                    grid._drawPDFShadow({ width: grid.wrapper.width() }, { avoidLinks: grid.options.pdf.avoidLinks }).done(function (group) {\n                        var pageNum = dataSource.page();\n                        var totalPages = allPages ? dataSource.totalPages() : 1;\n                        var args = {\n                            page: group,\n                            pageNumber: pageNum,\n                            progress: pageNum / totalPages,\n                            totalPages: totalPages\n                        };\n                        progress.notify(args);\n                        doc.append(args.page);\n                        if (pageNum < totalPages) {\n                            dataSource.page(pageNum + 1);\n                        } else {\n                            resolve();\n                        }\n                    }).fail(function (err) {\n                        result.reject(err);\n                    });\n                }\n                if (allPages) {\n                    dataSource.bind('change', exportPage);\n                    dataSource.page(1);\n                } else {\n                    exportPage();\n                }\n                return result.promise();\n            };\n            Grid.prototype._initPDFProgress = function (deferred) {\n                var loading = $('<div class=\\'k-loading-pdf-mask\\'><div class=\\'k-loading-color\\'/></div>');\n                loading.prepend(this.wrapper.clone().css({\n                    position: 'absolute',\n                    top: 0,\n                    left: 0\n                }));\n                this.wrapper.append(loading);\n                var pb = $('<div class=\\'k-loading-pdf-progress\\'>').appendTo(loading).kendoProgressBar({\n                    type: 'chunk',\n                    chunkCount: 10,\n                    min: 0,\n                    max: 1,\n                    value: 0\n                }).data('kendoProgressBar');\n                deferred.progress(function (e) {\n                    pb.value(e.progress);\n                }).always(function () {\n                    kendo.destroy(loading);\n                    loading.remove();\n                });\n            };\n        }\n        function syncTableHeight(table1, table2) {\n            table1 = table1[0];\n            table2 = table2[0];\n            if (table1.rows.length !== table2.rows.length) {\n                var lockedHeigth = table1.offsetHeight;\n                var tableHeigth = table2.offsetHeight;\n                var row;\n                var diff;\n                if (lockedHeigth > tableHeigth) {\n                    row = table2.rows[table2.rows.length - 1];\n                    if (filterRowRegExp.test(row.className)) {\n                        row = table2.rows[table2.rows.length - 2];\n                    }\n                    diff = lockedHeigth - tableHeigth;\n                } else {\n                    row = table1.rows[table1.rows.length - 1];\n                    if (filterRowRegExp.test(row.className)) {\n                        row = table1.rows[table1.rows.length - 2];\n                    }\n                    diff = tableHeigth - lockedHeigth;\n                }\n                row.style.height = row.offsetHeight + diff + 'px';\n            }\n        }\n        function adjustRowHeight(row1, row2) {\n            var height;\n            var offsetHeight1 = row1.offsetHeight;\n            var offsetHeight2 = row2.offsetHeight;\n            if (offsetHeight1 > offsetHeight2) {\n                height = offsetHeight1 + 'px';\n            } else if (offsetHeight1 < offsetHeight2) {\n                height = offsetHeight2 + 'px';\n            }\n            if (height) {\n                row1.style.height = row2.style.height = height;\n            }\n        }\n        function getCommand(commands, name) {\n            var idx, length, command;\n            if (typeof commands === STRING && commands === name) {\n                return commands;\n            }\n            if (isPlainObject(commands) && commands.name === name) {\n                return commands;\n            }\n            if (isArray(commands)) {\n                for (idx = 0, length = commands.length; idx < length; idx++) {\n                    command = commands[idx];\n                    if (typeof command === STRING && command === name || command.name === name) {\n                        return command;\n                    }\n                }\n            }\n            return null;\n        }\n        function focusTable(table, direct) {\n            var msie = browser.msie || browser.edge;\n            if (direct === true) {\n                table = $(table);\n                var scrollTop, scrollLeft;\n                scrollTop = table.parent().scrollTop();\n                scrollLeft = table.parent().scrollLeft();\n                if (msie) {\n                    try {\n                        table[0].setActive();\n                    } catch (e) {\n                        table[0].focus();\n                    }\n                } else {\n                    table[0].focus();\n                }\n                table.parent().scrollTop(scrollTop).scrollLeft(scrollLeft);\n            } else {\n                $(table).one('focusin', function (e) {\n                    e.preventDefault();\n                }).focus();\n            }\n        }\n        function isColumnEditable(column, model) {\n            if (!column.field || column.selectable) {\n                return false;\n            }\n            if (model.editable && !model.editable(column.field)) {\n                return false;\n            }\n            if (column.editable && !column.editable(model)) {\n                return false;\n            }\n            return true;\n        }\n        function isInputElement(element) {\n            return $(element).is(':button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon');\n        }\n        function tableClick(e) {\n            var currentTarget = $(e.currentTarget), isHeader = currentTarget.is('th'), table = this.table.add(this.lockedTable), headerTable = this.thead.parent().add($('>table', this.lockedHeader)), isInput = isInputElement(e.target), currentTable = currentTarget.closest('table')[0];\n            if (kendo.support.touch) {\n                return;\n            }\n            if (isInput && currentTarget.find(kendo.roleSelector('filtercell')).length) {\n                this._setCurrent(currentTarget);\n                return;\n            }\n            if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n                return;\n            }\n            if ($(e.target).is('a.k-i-expand, a.k-i-collapse')) {\n                return;\n            }\n            if (this.options.navigatable) {\n                this._setCurrent(currentTarget);\n            }\n            if (isHeader || !isInput) {\n                setTimeout(function () {\n                    if (!(isIE8 && $(kendo._activeElement()).hasClass('k-widget'))) {\n                        if (!isInputElement(kendo._activeElement())) {\n                            focusTable(currentTable, true);\n                        }\n                    }\n                });\n            }\n            if (isHeader) {\n                e.preventDefault();\n            }\n        }\n        function isInEdit(cell) {\n            return cell && (cell.hasClass('k-edit-cell') || cell.parent().hasClass('k-grid-edit-row'));\n        }\n        function groupRowBuilder(colspan, level, text) {\n            return '<tr role=\"row\" class=\"k-grouping-row\">' + groupCells(level) + '<td colspan=\"' + colspan + '\" aria-expanded=\"true\">' + '<p class=\"k-reset\">' + '<a class=\"k-icon k-i-collapse\" href=\"#\" tabindex=\"-1\" ' + ARIALABEL + '=\"' + COLLAPSE + '\"></a>' + text + '</p></td></tr>';\n        }\n        function groupRowLockedContentBuilder(colspan) {\n            return '<tr role=\"row\" class=\"k-grouping-row\">' + '<td colspan=\"' + colspan + '\" aria-expanded=\"true\">' + '<p class=\"k-reset\">&nbsp;</p></td></tr>';\n        }\n        ui.plugin(Grid);\n        ui.plugin(VirtualScrollable);\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}