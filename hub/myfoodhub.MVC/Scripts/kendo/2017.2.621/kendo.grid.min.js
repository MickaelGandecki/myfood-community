/** 
 * Kendo UI v2017.2.621 (http://www.telerik.com/kendo-ui)                                                                                                                                               
 * Copyright 2017 Telerik AD. All rights reserved.                                                                                                                                                      
 *                                                                                                                                                                                                      
 * Kendo UI commercial licenses may be obtained at                                                                                                                                                      
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  
 * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(e,define){define("util/text-metrics.min",["kendo.core.min"],e)}(function(){!function(e){function t(e){var t,r=[];for(t in e)r.push(t+e[t]);return r.sort().join("")}function r(e){var t,r=2166136261;for(t=0;t<e.length;++t)r+=(r<<1)+(r<<4)+(r<<7)+(r<<8)+(r<<24),r^=e.charCodeAt(t);return r>>>0}function o(){return{width:0,height:0,baseline:0}}function l(e,t,r){return s.current.measure(e,t,r)}var n,a,i,s;window.kendo.util=window.kendo.util||{},n=kendo.Class.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var r=this._map,o={key:e,value:t};r[e]=o,this._head?(this._tail.newer=o,o.older=this._tail,this._tail=o):this._head=this._tail=o,this._length>=this._size?(r[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++},get:function(e){var t=this._map[e];if(t)return t===this._head&&t!==this._tail&&(this._head=t.newer,this._head.older=null),t!==this._tail&&(t.older&&(t.older.newer=t.newer,t.newer.older=t.older),t.older=this._tail,t.newer=null,this._tail.newer=t,this._tail=t),t.value}}),a={baselineMarkerSize:1},"undefined"!=typeof document&&(i=document.createElement("div"),i.style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: nowrap!important;"),s=kendo.Class.extend({init:function(t){this._cache=new n(1e3),this.options=e.extend({},a,t)},measure:function(e,l,n){var a,s,d,c,u,h,p,f;if(!e)return o();if(a=t(l),s=r(e+a),d=this._cache.get(s))return d;c=o(),u=n||i,h=this._baselineMarker().cloneNode(!1);for(p in l)f=l[p],void 0!==f&&(u.style[p]=f);return u.textContent=e,u.appendChild(h),document.body.appendChild(u),(e+"").length&&(c.width=u.offsetWidth-this.options.baselineMarkerSize,c.height=u.offsetHeight,c.baseline=h.offsetTop+this.options.baselineMarkerSize),c.width>0&&c.height>0&&this._cache.put(s,c),u.parentNode.removeChild(u),c},_baselineMarker:function(){var e=document.createElement("div");return e.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;",e}}),s.current=new s,kendo.deepExtend(kendo.util,{LRUCache:n,TextMetrics:s,measureText:l,objectKey:t,hashKey:r})}(window.kendo.jQuery)},"function"==typeof define&&define.amd?define:function(e,t,r){(r||t)()}),function(e,define){define("kendo.grid.min",["kendo.data.min","kendo.columnsorter.min","kendo.editable.min","kendo.window.min","kendo.filtermenu.min","kendo.columnmenu.min","kendo.groupable.min","kendo.pager.min","kendo.selectable.min","kendo.sortable.min","kendo.reorderable.min","kendo.resizable.min","kendo.mobile.actionsheet.min","kendo.mobile.pane.min","kendo.ooxml.min","kendo.excel.min","kendo.progressbar.min","kendo.pdf.min"],e)}(function(){return function(e,t){function r(e){return Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function o(e){var t,r=" ";if(e){if(typeof e===_t)return e;for(t in e)r+=t+'="'+e[t]+'"'}return r}function l(t,r){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",r)}function n(t,r,o,l,n){var a,i=r;for(r=e(),n=n||1,a=0;a<n;a++)r=r.add(t.eq(i+a));"number"==typeof o?r[l?"insertBefore":"insertAfter"](t.eq(o)):r.appendTo(o)}function a(t,r,o){return e(t).add(r).find(o)}function i(e,t,r){var o,l,n,a;for(r=Te(r)?r:[r],o=0,l=r.length;o<l;o++)n=r[o],we(n)&&n.click&&(a=n.name||n.text,t.on(gt+Be,"a.k-grid-"+(a||"").replace(/\s/g,""),{commandName:a},Re(n.click,e)))}function s(e,t,r){return ye(e,function(e){var o,l;return e=typeof e===_t?{field:e}:e,p(e)&&!r||(e.attributes=j(e.attributes),e.footerAttributes=j(e.footerAttributes),e.headerAttributes=j(e.headerAttributes),o=!0),e.columns&&(e.columns=s(e.columns,t,o)),l=he.guid(),e.headerAttributes=Ce({id:l},e.headerAttributes),Ce({encoded:t,hidden:o},e)})}function d(e,t){var r=[];return c(e,t,r),r[r.length-1]}function c(e,t,r){var o,l;for(r=r||[],o=0;o<t.length;o++){if(e===t[o])return!0;if(t[o].columns){if(l=r.length,r.push(t[o]),c(e,t[o].columns,r))return!0;r.splice(l,r.length-l)}}return!1}function u(e,t){var r=t?K:j;e.hidden=!t,e.attributes=r(e.attributes),e.footerAttributes=r(e.footerAttributes),e.headerAttributes=r(e.headerAttributes)}function h(){return"none"!==this.style.display}function p(e){return f([e]).length>0}function f(e){return Se(e,function(e){var t=!e.hidden;return t&&e.columns&&(t=f(e.columns).length>0),t})}function g(t){return e(t).map(function(){return this.toArray()})}function m(e,t,r){var o=_(A(t)),l=_(F(t)),n=e.rowSpan;e.rowSpan=r?o>l?n-(o-l)||1:n+(l-o):o>l?n+(o-l):n-(l-o)||1}function k(t,r,o,l,n,a,i){var s,d,c=_(t),u=_([r]);c>u&&(s=Array(i+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>'),d=a.children(":not(.k-filter-row)"),e(Array(c-u+1).join("<tr>"+s+"</tr>")).insertAfter(d.last())),D(a,c-u),v(o,l,n,a)}function b(t,r,o){var l,n,a,i,s,d,c,u;for(o=o||0,a=r,r=E(r),i={},s=t.find(">tr:not(.k-filter-row)"),d=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},c=0,u=r.length;c<u;c++)l=w(r[c],a),i[l.row]||(i[l.row]=s.eq(l.row).find(".k-header").filter(d)),n=i[l.row].eq(l.cell),n.attr(he.attr("index"),o+c);return r.length}function _(e){var t,r,o=1,l=0;for(t=0;t<e.length;t++)e[t].columns&&(r=_(e[t].columns),r>l&&(l=r));return o+l}function v(t,r,o,l){var n,a,i=S(t[0],r),s=o.find(">tr:not(.k-filter-row):eq("+i.row+")>th.k-header"),d=e(),c=i.cell;for(n=0;n<t.length;n++)d=d.add(s.eq(c+n));for(l.find(">tr:not(.k-filter-row)").eq(i.row).append(d),a=[],n=0;n<t.length;n++)t[n].columns&&(a=a.concat(t[n].columns));a.length&&v(a,r,o,l)}function w(e,t,r,o){var l,n;for(r=r||0,o=o||{},o[r]=o[r]||0,n=0;n<t.length;n++){if(t[n]==e){l={cell:o[r],row:r};break}if(t[n].columns&&(l=w(e,t[n].columns,r+1,o)))break;o[r]++}return l}function C(e,t,r,o){var l,n=r.locked;do l=e[t],t+=o?1:-1;while(l&&t>-1&&t<e.length&&l!=r&&!l.columns&&l.locked==n);return l}function y(e,t,r,o){var l,n,a,i;return t.columns?(t=t.columns,t[o?0:t.length-1]):(l=d(t,e),n=l?l.columns:e,a=xe(t,n),0===a&&o?a++:a!=n.length-1||o?(a>0||0===a&&!o)&&(a+=o?-1:1):a--,i=xe(r,n),t=C(n,a,r,i>a),t&&t!=r&&t.columns?y(e,t,r,o):null)}function S(e,t,r,o){var l,n;for(r=r||0,o=o||{},o[r]=o[r]||0,n=0;n<t.length;n++){if(t[n]==e){l={cell:o[r],row:r};break}if(t[n].columns&&(l=S(e,t[n].columns,r+1,o)))break;t[n].hidden||o[r]++}return l}function T(e){var t=x(A(e));return t.concat(x(F(e)))}function x(e){var t,r=[],o=[];for(t=0;t<e.length;t++)r.push(e[t]),e[t].columns&&(o=o.concat(e[t].columns));return o.length&&(r=r.concat(x(o))),r}function H(e){var t,r,o=0;for(r=0;r<e.length;r++)t=e[r],t.columns?o+=H(t.columns):t.hidden&&o++;return o}function R(e){var t,r,o,l=0;for(r=0,o=e.length;r<o;r++)t=e[r].style.width,t&&t.indexOf("%")==-1&&(l+=parseInt(t,10));return l}function I(e,t){var r,o,l=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(o=0;o<l.length;o++)r=l[o].rowSpan,r>1&&(l[o].rowSpan=r-t||1)}function D(e,t){var r,o=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(r=0;r<o.length;r++)o[r].rowSpan+=t}function L(t){var r,o=t.find("tr:not(.k-filter-row)"),l=o.filter(function(){return!e(this).children().length}).remove().length,n=o.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(r=0;r<n.length;r++)n[r].rowSpan>1&&(n[r].rowSpan-=l);return o.length-l}function z(e,t,r,o,l){var n,a,i,s=[];for(n=0,i=e.length;n<i;n++)a=r[o]||[],a.push(t.eq(l+n)),r[o]=a,e[n].columns&&(s=s.concat(e[n].columns));s.length&&z(s,t,r,o+1,l+e.length)}function A(e){return Se(e,function(e){return e.locked})}function F(e){return Se(e,function(e){return!e.locked})}function q(e){return Se(e,function(e){return!e.locked&&p(e)})}function M(e){return Se(e,function(e){return e.locked&&p(e)})}function W(e){var t,r=[];for(t=0;t<e.length;t++)e[t].hidden||(e[t].columns?r=r.concat(W(e[t].columns)):r.push(e[t]));return r}function E(e){var t,r=[];for(t=0;t<e.length;t++)e[t].columns?r=r.concat(E(e[t].columns)):r.push(e[t]);return r}function P(r){var o,l=r.find(">tr:not(.k-filter-row)"),n=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},a=e();return l.length>1&&(a=l.find("th").filter(n).filter(function(){return this.rowSpan>1})),a=a.add(l.last().find("th").filter(n)),o=he.attr("index"),a.sort(function(r,l){var n,a;return r=e(r),l=e(l),n=r.attr(o),a=l.attr(o),n===t&&(n=e(r).index()),a===t&&(a=e(l).index()),n=parseInt(n,10),a=parseInt(a,10),n>a?1:n<a?-1:0}),a}function N(t){var r,o,l,n,a,i,s,d=t.closest("table"),c=e().add(t),u=t.closest("tr"),h=d.find("tr:not(.k-filter-row)"),p=h.index(u);if(p>0){for(r=h.eq(p-1),o=r.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!e(this).attr("rowspan")}),l=0,n=u.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),a=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1}),i=0;i<a.length;i++)l+=a[i].colSpan||1;for(n+=Math.max(l-1,0),l=0,i=0;i<o.length;i++)if(s=o.eq(i),l+=s.attr("colSpan")?s[0].colSpan:1,n>=i&&n<l){c=N(s).add(c);break}}return c}function B(t){var r,o,l,n,a,i,s,d=t.closest("thead"),c=e().add(t),u=t.closest("tr"),h=d.find("tr:not(.k-filter-row)"),p=h.index(u)+t[0].rowSpan,f=he.attr("colspan");if(p<=h.length-1){for(r=u.next(),o=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)"),o=o.filter(function(){return!this.rowSpan||1===this.rowSpan}),n=0,l=0;l<o.length;l++)n+=parseInt(o.eq(l).attr(f),10)||1;for(a=r.find("th:not(.k-group-cell,.k-hierarchy-cell)"),i=parseInt(t.attr(f),10)||1,l=0;l<i;)r=a.eq(l+n),c=c.add(B(r)),s=parseInt(r.attr(f),10),s>1&&(i-=s-1),l++}return c}function O(t,r,o,l){var n,a=t;return l&&t.empty(),ge?t[0].innerHTML=o:(n=document.createElement("div"),n.innerHTML="<table><tbody>"+o+"</tbody></table>",t=n.firstChild.firstChild,r[0].replaceChild(t,a[0]),t=e(t)),t}function j(e){e=e||{};var t=e.style;return t?(t=t.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"),t===e.style&&(t=t.replace(/(.*)?/i,"display:none;$1"))):t="display:none",Ce({},e,{style:t})}function K(e){e=e||{};var t=e.style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function V(t,r,o,l){var n,a=t.find(">colgroup"),i=ye(r,function(e){return n=e.width,n&&0!==parseInt(n,10)?he.format('<col style="width:{0}"/>',typeof n===_t?n:n+"px"):"<col />"});(o||a.find(".k-hierarchy-col").length)&&i.splice(0,0,'<col class="k-hierarchy-col" />'),a.length&&a.remove(),a=e(Array(l+1).join('<col class="k-group-col">')+i.join("")),a.is("colgroup")||(a=e("<colgroup/>").append(a)),t.prepend(a),Mt.msie&&8==Mt.version&&(t.css("display","inline-table"),window.setTimeout(function(){t.css("display","")},1))}function U(e,t){var r,o,l=0,n=e.find("th:not(.k-group-cell)");for(r=0,o=t.length;r<o;r++)t[r].locked&&(n.eq(r).insertBefore(n.eq(l)),n=e.find("th:not(.k-group-cell)"),l++)}function G(e){var t,r,o,l={};for(r=0,o=e.length;r<o;r++)t=e[r],l[t.value]=t.text;return l}function $(e,t,r,o){var l=r&&r.length&&we(r[0])&&"value"in r[0],n=l?G(r)[e]:e;return n=null!=n?n:"",t?he.format(t,n):o===!1?n:he.htmlEncode(n)}function Q(e,t,r){for(var o,l=0,n=e[l];n;){if(o=!!r||"none"!==n.style.display,o&&!Dt.test(n.className)&&--t<0){n.style.display=r?"":"none";break}n=e[++l]}}function J(t,r){for(var o,l,n=0,a=t.length;n<a;n+=1)l=t.eq(n),l.is(".k-grouping-row,.k-detail-row")?(o=l.children(":not(.k-group-cell):first,.k-detail-cell").last(),o.attr("colspan",parseInt(o.attr("colspan"),10)-1)):(l.hasClass("k-grid-edit-row")&&(o=l.children(".k-edit-container")[0])&&(o=e(o),o.attr("colspan",parseInt(o.attr("colspan"),10)-1),o.find("col").eq(r).remove(),l=o.find("tr:first")),Q(l[0].cells,r,!1))}function Y(e){var t,r,o=[];for(r=0;r<e.length&&(t=e[r],"field"in t&&"value"in t&&"items"in t);r++)o.push(t),t.hasSubgroups&&(o=o.concat(Y(t.items)));return o}function X(e){var t,r,o=[];for(r=0;r<e.length&&(t=e[r],"field"in t&&"value"in t&&"items"in t);r++)t.hasSubgroups&&(o=o.concat(X(t.items))),o.push(t.aggregates);return o}function Z(t,r){for(var o,l,n,a=0,i=t.length;a<i;a+=1)l=t.eq(a),l.is(".k-grouping-row,.k-detail-row")?(o=l.children(":not(.k-group-cell):first,.k-detail-cell").last(),o.attr("colspan",parseInt(o.attr("colspan"),10)+1)):(l.hasClass("k-grid-edit-row")&&(o=l.children(".k-edit-container")[0])&&(o=e(o),o.attr("colspan",parseInt(o.attr("colspan"),10)+1),V(o.find(">form>table"),f(n),!1,0),l=o.find("tr:first")),Q(l[0].cells,r,!0))}function ee(e,t,r){r=r||1;var o,l,n;for(l=0,n=e.length;l<n;l++)o=e.eq(l).children().last(),o.attr("colspan",parseInt(o.attr("colspan"),10)+r),o=t.eq(l).children().last(),o.attr("colspan",parseInt(o.attr("colspan"),10)-r)}function te(e){var t,r,o=0,l=e.find(">colgroup>col");for(t=0,r=l.length;t<r;t+=1)o+=parseInt(l[t].style.width,10);return o}function re(e,t){var r,o,l,n;e=e[0],t=t[0],e.rows.length!==t.rows.length&&(r=e.offsetHeight,o=t.offsetHeight,r>o?(l=t.rows[t.rows.length-1],Lt.test(l.className)&&(l=t.rows[t.rows.length-2]),n=r-o):(l=e.rows[e.rows.length-1],Lt.test(l.className)&&(l=e.rows[e.rows.length-2]),n=o-r),l.style.height=l.offsetHeight+n+"px")}function oe(e,t){var r,o=e.offsetHeight,l=t.offsetHeight;o>l?r=o+"px":o<l&&(r=l+"px"),r&&(e.style.height=t.style.height=r)}function le(e,t){var r,o,l;if(typeof e===_t&&e===t)return e;if(we(e)&&e.name===t)return e;if(Te(e))for(r=0,o=e.length;r<o;r++)if(l=e[r],typeof l===_t&&l===t||l.name===t)return l;return null}function ne(t,r){var o,l,n=Mt.msie||Mt.edge;if(r===!0){if(t=e(t),o=t.parent().scrollTop(),l=t.parent().scrollLeft(),n)try{t[0].setActive()}catch(a){t[0].focus()}else t[0].focus();t.parent().scrollTop(o).scrollLeft(l)}else e(t).one("focusin",function(e){e.preventDefault()}).focus()}function ae(e,t){return!(!e.field||e.selectable)&&(!(t.editable&&!t.editable(e.field))&&!(e.editable&&!e.editable(t)))}function ie(t){return e(t).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon")}function se(r){var o=e(r.currentTarget),l=o.is("th"),n=this.table.add(this.lockedTable),a=this.thead.parent().add(e(">table",this.lockedHeader)),i=ie(r.target),s=o.closest("table")[0];if(!he.support.touch)return i&&o.find(he.roleSelector("filtercell")).length?(this._setCurrent(o),t):(s!==n[0]&&s!==n[1]&&s!==a[0]&&s!==a[1]||e(r.target).is("a.k-i-expand, a.k-i-collapse")||(this.options.navigatable&&this._setCurrent(o),!l&&i||setTimeout(function(){Et&&e(he._activeElement()).hasClass("k-widget")||ie(he._activeElement())||ne(s,!0)}),l&&r.preventDefault()),t)}function de(e){return e&&(e.hasClass("k-edit-cell")||e.parent().hasClass("k-grid-edit-row"))}function ce(e,t,o){return'<tr role="row" class="k-grouping-row">'+r(t)+'<td colspan="'+e+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1" '+xt+'="'+St+'"></a>'+o+"</p></td></tr>"}function ue(e){return'<tr role="row" class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}var he=window.kendo,pe=he.ui,fe=he.data.DataSource,ge=he.support.tbodyInnerHtml,me=he._activeElement,ke=pe.Widget,be=he._outerWidth,_e=he._outerHeight,ve=he.keys,we=e.isPlainObject,Ce=e.extend,ye=e.map,Se=e.grep,Te=e.isArray,xe=e.inArray,He=Array.prototype.push,Re=e.proxy,Ie=he.isFunction,De=e.isEmptyObject,Le=Math,ze="progress",Ae="error",Fe=":not(.k-group-cell):not(.k-hierarchy-cell):visible",qe="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",Me="tr:not(.k-footer-template):visible",We=":not(.k-group-cell):not(.k-hierarchy-cell):visible",Ee="tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible",Pe=Me+":first>"+We+":first",Ne="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",Be=".kendoGrid",Oe="edit",je="beforeEdit",Ke="save",Ve="remove",Ue="detailInit",Ge="filterMenuInit",$e="columnMenuInit",Qe="filterMenuOpen",Je="columnMenuOpen",Ye="cellClose",Xe="change",Ze="columnHide",et="columnShow",tt="saveChanges",rt="dataBound",ot="detailExpand",lt="detailCollapse",nt="k-state-focused",at="k-state-selected",it="k-checkbox",st="input[data-role='checkbox']."+it,dt="k-grid-norecords",ct="columnResize",ut="columnReorder",ht="columnLock",pt="columnUnlock",ft="navigate",gt="click",mt="height",kt="tabIndex",bt="function",_t="string",vt="Are you sure you want to delete this record?",wt="No records available.",Ct="Delete",yt="Cancel",St="Collapse",Tt="Expand",xt="aria-label",Ht=/(\}|\#)/gi,Rt=/#/gi,It="[\\x20\\t\\r\\n\\f]",Dt=RegExp("(^|"+It+")(k-group-cell|k-hierarchy-cell)("+It+"|$)"),Lt=RegExp("(^|"+It+")(k-filter-row)("+It+"|$)"),zt='# if (iconClass) {#<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a># } else { #<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#">#=text#</a># } #',At='<input class="'+it+'" data-role="checkbox" aria-label="Select row" aria-checked="false" type="checkbox"><label class="k-checkbox-label k-no-text">&\\#8203;</label>',Ft='<input class="'+it+'" data-role="checkbox" aria-label="Select all rows" aria-checked="false" type="checkbox"><label class="k-checkbox-label k-no-text">&#8203;</label>',qt=!1,Mt=he.support.browser,Wt=Mt.msie&&7==Mt.version,Et=Mt.msie&&8==Mt.version,Pt=ke.extend({init:function(e,t){var r=this;ke.fn.init.call(r,e,t),r._refreshHandler=Re(r.refresh,r),r.setDataSource(t.dataSource),r.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(Xe,t._refreshHandler),t.dataSource=e,t.dataSource.bind(Xe,t._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0},destroy:function(){var e=this;ke.fn.destroy.call(e),e.dataSource.unbind(Xe,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(Be),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,r=this,o=he.support.scrollbar()+1,l=r.element;l.css({width:"auto",overflow:"hidden"}).css(qt?"padding-left":"padding-right",o),r.content=l.children().first(),t=r.wrapper=r.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+Be+" mousewheel"+Be,Re(r._wheelScroll,r)),he.support.kineticScrollNeeded&&(r.drag=new he.UserEvents(r.wrapper,{global:!0,start:function(e){e.sender.capture()},move:function(e){r.verticalScrollbar.scrollTop(r.verticalScrollbar.scrollTop()-e.y.delta),t.scrollLeft(t.scrollLeft()-e.x.delta),e.preventDefault()}})),r.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:o}).appendTo(l).bind("scroll"+Be,Re(r._scroll,r))},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.verticalScrollbar,r=t.scrollTop(),o=he.wheelDeltaY(e);!o||o>0&&0===r||o<0&&r+t[0].clientHeight==t[0].scrollHeight||(e.preventDefault(),this.verticalScrollbar.scrollTop(r+-o))}},_scroll:function(e){var t=this,r=!t.options.prefetch,o=e.currentTarget.scrollTop,l=t.dataSource,n=t.itemHeight,a=l.skip()||0,i=t._rangeStart||a,s=t.element.innerHeight(),d=!!(t._scrollbarTop&&t._scrollbarTop>o),c=Le.max(Le.floor(o/n),0),u=Le.max(c+Le.floor(s/n),0);t._scrollTop=o-i*n,t._scrollbarTop=o,t._scrolling=r,t._fetch(c,u,d)||(t.wrapper[0].scrollTop=t._scrollTop),r&&(t._scrollingTimeout&&clearTimeout(t._scrollingTimeout),t._scrollingTimeout=setTimeout(function(){t._scrolling=!1,t._page(t._rangeStart,t.dataSource.take())},100))},itemIndex:function(e){var t=this._rangeStart||this.dataSource.skip()||0;return t+e},position:function(e){var t,r=this._rangeStart||this.dataSource.skip()||0,o=this.dataSource.pageSize();return t=e>r?e-r+1:r-e-1,t>o?o:t},scrollIntoView:function(e){var t=this.wrapper[0],r=t.clientHeight,o=this._scrollTop||t.scrollTop,l=e[0].offsetTop,n=e[0].offsetHeight;o>l?this.verticalScrollbar[0].scrollTop-=r/2:l+n>=o+r&&(this.verticalScrollbar[0].scrollTop+=r/2)},_fetch:function(t,r,o){var l=this,n=l.dataSource,a=l.itemHeight,i=n.take(),s=l._rangeStart||n.skip()||0,d=Le.floor(t/i)*i,c=!1,u=.33;return t<s?(c=!0,s=Le.max(0,r-i),l._scrollTop=(t-s)*a,l._page(s,i)):r>=s+i&&!o?(c=!0,s=t,l._scrollTop=a,l._page(s,i)):!l._fetching&&l.options.prefetch&&(t<d+i-i*u&&t>i&&n.prefetch(d-i,i,e.noop),r>d+i*u&&n.prefetch(d+i,i,e.noop)),c},fetching:function(){return this._fetching},_page:function(e,t){var r=this,o=!r.options.prefetch,l=r.dataSource;clearTimeout(r._timeout),r._fetching=!0,r._rangeStart=e,l.inRange(e,t)?l.range(e,t):(o||he.ui.progress(r.wrapper.parent(),!0),r._timeout=setTimeout(function(){r._scrolling||(o&&he.ui.progress(r.wrapper.parent(),!0),l.range(e,t))},100))},repaintScrollbar:function(){var e,t=this,r="",o=25e4,l=t.dataSource,n=he.support.kineticScrollNeeded?0:he.support.scrollbar(),a=t.wrapper[0],i=t.itemHeight=t.options.itemHeight()||0,s=a.scrollWidth>a.offsetWidth?n:0,d=l.total()*i+s;for(e=0;e<Le.floor(d/o);e++)r+='<div style="width:1px;height:'+o+'px"></div>';d%o&&(r+='<div style="width:1px;height:'+d%o+'px"></div>'),t.verticalScrollbar.html(r),a.scrollTop=t._scrollTop},refresh:function(){var e=this,t=e.dataSource,r=e._rangeStart;he.ui.progress(e.wrapper.parent(),!1),clearTimeout(e._timeout),e.repaintScrollbar(),e.drag&&e.drag.cancel(),r&&!e._fetching&&(e._rangeStart=t.skip(),1===t.page()&&(e.verticalScrollbar[0].scrollTop=0)),e._fetching=!1}}),Nt={create:{text:"Add new record",imageClass:"k-i-plus",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-i-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-i-check",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-i-close",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-i-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-i-check",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-i-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-file-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-file-pdf",className:"k-grid-pdf",iconClass:"k-icon"}},Bt=he.ui.DataBoundWidget.extend({init:function(t,r,o){var l=this;r=Te(r)?{dataSource:r}:r,ke.fn.init.call(l,t,r),o&&(l._events=o),qt=he.support.isRtl(t),l._element(),l._aria(),l._columns(l.options.columns),l._dataSource(),l._tbody(),l._pageable(),l._thead(),l._groupable(),l._toolbar(),l._setContentHeight(),l._templates(),l._navigatable(),l._selectable(),l._clipboard(),l._details(),l._editable(),l._attachCustomCommandsEvent(),l._minScreenSupport(),l.options.autoBind?l.dataSource.fetch():(l._group=l._groups()>0,l._footer()),l.lockedContent&&(l.wrapper.addClass("k-grid-lockedcolumns"),l._resizeHandler=function(){l.resize()},e(window).on("resize"+Be,l._resizeHandler)),he.notify(l)},events:[Xe,"dataBinding","cancel",rt,ot,lt,Ue,Ge,Qe,$e,Je,Oe,je,Ke,Ve,tt,Ye,ct,ut,et,Ze,ht,pt,ft,"page","sort","filter","group"],setDataSource:function(e){var t=this,r=t.options.scrollable;t.options.dataSource=e,t._dataSource(),t._pageable(),t._thead(),r&&(r.virtual?t.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0):t.content.scrollLeft(0)),t.options.groupable&&t._groupable(),t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource),t.options.navigatable&&t._navigatable(),t.options.selectable&&t._selectable(),t.options.autoBind&&e.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,navigatable:!1,pageable:!1,persistSelection:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:yt,confirmation:vt,confirmDelete:Ct},commands:{create:Nt.create.text,cancel:Nt.cancel.text,save:Nt.save.text,destroy:Nt.destroy.text,edit:Nt.edit.text,update:Nt.update.text,canceledit:Nt.canceledit.text,excel:Nt.excel.text,pdf:Nt.pdf.text},noRecords:wt,expandCollapseColumnHeader:""}},destroy:function(){var t,r=this;r._angularItems("cleanup"),r._destroyColumnAttachments(),ke.fn.destroy.call(r),this._navigatableTables=null,r._resizeHandler&&e(window).off("resize"+Be,r._resizeHandler),r.pager&&r.pager.element&&r.pager.destroy(),r.pager=null,r.groupable&&r.groupable.element&&r.groupable.element.kendoGroupable("destroy"),r.groupable=null,r.options.reorderable&&r.wrapper.data("kendoReorderable").destroy(),r.selectable&&r.selectable.element&&(r.selectable.destroy(),r.clearArea(),r.options.persistSelection===!0&&(r._selectedIds=null),r.copyHandler&&(r.wrapper.off("keydown",r.copyHandler),r.unbind(r.copyHandler)),r.updateClipBoardState&&(r.unbind(r.updateClipBoardState),r.updateClipBoardState=null),r.clearAreaHandler&&r.wrapper.off("keyup",r.clearAreaHandler)),r.selectable=null,r.resizable&&(r.resizable.destroy(),r._resizeUserEvents&&(r._resizeHandleDocumentClickHandler&&e(document).off("click",r._resizeHandleDocumentClickHandler),r._resizeUserEvents.destroy(),r._resizeUserEvents=null),r.resizable=null),r.virtualScrollable&&r.virtualScrollable.element&&r.virtualScrollable.destroy(),r.virtualScrollable=null,r._destroyEditable(),r.dataSource&&(r.dataSource.unbind(Xe,r._refreshHandler).unbind(ze,r._progressHandler).unbind(Ae,r._errorHandler),r._refreshHandler=r._progressHandler=r._errorHandler=null),t=r.element.add(r.wrapper).add(r.table).add(r.thead).add(r.wrapper.find(">.k-grid-toolbar")),r.content&&(t=t.add(r.content).add(r.content.find(">.k-virtual-scrollable-wrap"))),r.lockedHeader&&r._removeLockedContainers(),r.pane&&r.pane.destroy(),r.minScreenResizeHandler&&e(window).off("resize",r.minScreenResizeHandler),r._draggableInstance&&r._draggableInstance.element&&r._draggableInstance.destroy(),r._draggableInstance=null,t.off(Be),he.destroy(r.wrapper),r.rowTemplate=r.altRowTemplate=r.lockedRowTemplate=r.lockedAltRowTemplate=r.detailTemplate=r.footerTemplate=r.groupFooterTemplate=r.lockedGroupFooterTemplate=r.noRecordsTemplate=null,r.scrollables=r.thead=r.tbody=r.element=r.table=r.content=r.footer=r.wrapper=r.lockedTable=r.lockedContent=r.lockedHeader=r.lockedFooter=r._groupableClickHandler=r._setContentWidthHandler=null},getOptions:function(){var r,o,l,n=this.options;return n.dataSource=null,r=Ce(!0,{},this.options),r.columns=he.deepExtend([],this.columns),o=this.dataSource,l=o.options.data&&o._data,o.options.data=null,r.dataSource=e.extend(!0,{},o.options),o.options.data=l,r.dataSource.data=l,r.dataSource.page=o.page(),r.dataSource.filter=o.filter(),r.dataSource.pageSize=o.pageSize(),r.dataSource.sort=o.sort(),r.dataSource.group=o.group(),r.dataSource.aggregate=o.aggregate(),r.dataSource.transport&&(r.dataSource.transport.dataSource=null),r.pageable&&r.pageable.pageSize&&(r.pageable.pageSize=o.pageSize()),r.$angular=t,r},setOptions:function(e){var t,r,o,l,n=this.getOptions();he.deepExtend(n,e),e.dataSource||(n.dataSource=this.dataSource),t=this.wrapper,r=this._events,o=this.element,this.destroy(),this.options=null,this._isMobile&&(l=t.closest(he.roleSelector("pane")).parent(),l.after(t),l.remove(),t.removeClass("k-grid-mobile")),t[0]!==o[0]&&(t.before(o),t.remove()),o.empty(),this.init(o,n,r),this._setEvents(n)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t){return t.children().filter(function(){var t=e(this);return!t.hasClass("k-grouping-row")&&!t.hasClass("k-detail-row")&&!t.hasClass("k-group-footer")})},dataItems:function(){var e,t,r,o=he.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(e=o.length,t=Array(2*e),r=e;--r>=0;)t[r]=t[r+e]=o[r];o=t}return o},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",function(){return{elements:t.thead.get()}}),t.thead.add(t.lockedHeader).find("th").each(function(){var t=e(this),r=t.data("kendoFilterMenu"),o=t.data("kendoColumnSorter"),l=t.data("kendoColumnMenu");r&&r.destroy(),o&&o.destroy(),l&&l.destroy()}))},_attachCustomCommandsEvent:function(){var e,t,r,o=this,l=E(o.columns||[]);for(t=0,r=l.length;t<r;t++)e=l[t].command,e&&i(o,o.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,r=t.element;r.is("table")||(r=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),r.length||(r=e("<table />").appendTo(t.element))),Wt&&r.attr("cellspacing",0),t.table=r.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,r){var o,l,n,a,i,s,d,c=this,u=c.options.columnResizeHandleWidth,h=c.options.scrollable,p=c.resizeHandle,f=this._groups();if(p&&c.lockedContent&&p.data("th")[0]!==r[0]&&(p.off(Be).remove(),p=null),p||(p=c.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(p)),qt)o=r.position().left,h&&(a=r.closest(".k-grid-header-wrap, .k-grid-header-locked"),i=Mt.msie?a.scrollLeft():0,s=Mt.webkit?a[0].scrollWidth-a[0].offsetWidth-a.scrollLeft():0,d=Mt.mozilla?a[0].scrollWidth-a[0].offsetWidth-(a[0].scrollWidth-a[0].offsetWidth-a.scrollLeft()):0,o-=s-d+i);else{for(o=r[0].offsetWidth,l=P(r.closest("thead")).filter(":visible"),n=0;n<l.length&&l[n]!=r[0];n++)o+=l[n].offsetWidth;f>0&&(o+=be(t.find(".k-group-cell:first"))*f),c._hasDetails()&&(o+=be(t.find(".k-hierarchy-cell:first")))}p.css({top:r.position().top,left:o-u,height:_e(r),width:3*u}).data("th",r).show(),p.off("dblclick"+Be).on("dblclick"+Be,function(){c._autoFitLeafColumn(r.data("index"))})},_positionColumnResizeHandle:function(){var t=this,r=t.options.columnResizeHandleWidth,o=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t.thead.add(o).on("mousemove"+Be,"th",function(o){function n(){var t,r=parseFloat(e(document.documentElement).css("zoom"));return isNaN(r)&&(r=1),t=parseFloat(e(document.body).css("zoom")),isNaN(t)&&(t=1),r*t}var a,i,s,d=e(this);d.hasClass("k-group-cell")||d.hasClass("k-hierarchy-cell")||(a=o.clientX/n(),i=e(window).scrollLeft(),s=d.offset().left+(qt?0:this.offsetWidth),a+i>s-r&&a+i<s+r?t._createResizeHandle(d.closest("div"),d):t.resizeHandle?t.resizeHandle.hide():l(t.wrapper,""))})},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._hideResizeHandle())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(Be).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t._resizeUserEvents=new he.UserEvents(r.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(r){var o=e(r.target);r.preventDefault(),o.addClass("k-column-active"),t._createResizeHandle(o.closest("div"),o),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=Re(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},_resizable:function(){var t,r,o,n,a,i,s,d,c=this,u=c.options,h=this._isMobile,p=he.support.mobileOS?0:he.support.scrollbar();u.resizable&&(t=u.scrollable?c.wrapper.find(".k-grid-header-wrap:first"):c.wrapper,h?c._positionColumnResizeHandleTouch(t):c._positionColumnResizeHandle(t),c.resizable&&c.resizable.destroy(),c.resizable=new pe.Resizable(t.add(c.lockedHeader),{handle:(u.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:_e(t.data("th"))+c.tbody.attr("clientHeight")})},start:function(t){var p,f,g,m;d=e(t.currentTarget).data("th"),h&&c._hideResizeHandle(),p=d.closest("table"),f=e.inArray(d[0],P(d.closest("thead")).filter(":visible")),i=p.parent().hasClass("k-grid-header-locked"),g=i?c.lockedTable:c.table,m=c.footer||e(),
c.footer&&c.lockedContent&&(m=c.footer.children(i?".k-grid-footer-locked":".k-grid-footer-wrap")),l(c.wrapper,"col-resize"),s=u.scrollable?p.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")").add(g.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")")).add(m.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")")):g.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")"),r=t.x.location,o=be(d),n=E(c.columns)[f].minResizableWidth||10,a=be(i?g.children("tbody"):c.tbody),Mt.webkit&&c.wrapper.addClass("k-grid-column-resizing")},resize:function(t){var l,h,f,g,m,k,b=qt?-1:1,_=o+t.x.location*b-r*b;u.scrollable?(i&&c.lockedFooter?l=c.lockedFooter.children("table"):c.footer&&(l=c.footer.find(">.k-grid-footer-wrap>table")),l&&l[0]||(l=e()),h=d.closest("table"),f=i?c.lockedTable:c.table,g=!1,m=c.wrapper.width()-p,k=_,i&&a-o+k>m&&(k=o+(m-a-2*p),k<0&&(k=_),g=!0),k>10&&k>=n&&(s.css("width",k),a&&(k=g?m-2*p:a+t.x.location*b-r*b,f.add(h).add(l).css("width",k),i||(c._footerWidth=k)))):_>10&&_>=n&&s.css("width",_)},resizeend:function(){var e,t,r,n=be(d);l(c.wrapper,""),Mt.webkit&&c.wrapper.removeClass("k-grid-column-resizing"),o!=n&&(t=c.lockedHeader?c.lockedHeader.find("thead:first tr:first").add(c.thead.find("tr:first")):d.parent(),r=d.attr(he.attr("index")),r||(r=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(d)),e=E(c.columns)[r],e.width=n,c.trigger(ct,{column:e,oldWidth:o,newWidth:n}),c._applyLockedContainersWidth(),c._syncLockedContentHeight(),c._syncLockedHeaderHeight()),c._hideResizeHandle(),d=null}}))},_draggable:function(){var t,r=this;r.options.reorderable&&(r._draggableInstance&&r._draggableInstance.destroy(),t=r.wrapper.children(".k-grid-header"),r._draggableInstance=r.wrapper.kendoDraggable({group:he.guid(),autoScroll:!0,filter:r.content?".k-grid-header:first "+Ne:"table:first>.k-grid-header "+Ne,dragstart:function(){t.children(".k-grid-header-wrap").unbind("scroll"+Be+"scrolling").bind("scroll"+Be+"scrolling",function(e){r.virtualScrollable?r.content.find(">.k-virtual-scrollable-wrap").scrollLeft(this.scrollLeft):r.scrollables.not(e.currentTarget).scrollLeft(this.scrollLeft)})},dragend:function(){t.children(".k-grid-header-wrap").unbind("scroll"+Be+"scrolling")},drag:function(){r._hideResizeHandle()},hint:function(t){var r=t.attr(he.attr("title"));return r&&(r=he.htmlEncode(r)),e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(r||t.attr(he.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-i-cancel" />')}}).data("kendoDraggable"))},_reorderable:function(){var t,r=this;r.options.reorderable&&(r.wrapper.data("kendoReorderable")&&r.wrapper.data("kendoReorderable").destroy(),t=function(e,t,o){var l=e[t],n=e[o],a=d(l,r.columns);return e=a?a.columns:r.columns,xe(n,e)},r.wrapper.kendoReorderable({draggable:r._draggableInstance,dragOverContainers:function(e,o){var l=T(r.columns);return l[e].lockable!==!1&&t(l,e,o)>-1},inSameContainer:function(o){return e(o.source).parent()[0]===e(o.target).parent()[0]&&t(T(r.columns),o.sourceIndex,o.targetIndex)>-1},change:function(e){var o=T(r.columns),l=o[e.oldIndex],n=t(o,e.oldIndex,e.newIndex);r.trigger(ut,{newIndex:n,oldIndex:xe(l,o),column:l}),r.reorderColumn(n,l,"before"===e.position)}}))},_reorderHeader:function(e,t,r){var o,l,i,s,d=this,c=w(e[0],d.columns),u=w(t,d.columns),h=[];for(o=0;o<e.length;o++)e[o].columns&&(h=h.concat(e[o].columns));l=a(d.lockedHeader,d.thead,"tr:eq("+c.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),i=A(e).length,s=A([t]).length,h.length?(i>0&&0===s?k(e,t,h,d.columns,d.lockedHeader.find("thead"),d.thead,this._groups()):0===i&&s>0&&k(e,t,h,d.columns,d.thead,d.lockedHeader.find("thead"),this._groups()),(t.columns||c.cell-u.cell>1||u.cell-c.cell>1)&&(t=y(d.columns,t,e[0],r),t&&d._reorderHeader(h,t,r))):i!==s&&m(l[c.cell],d.columns,i),n(l,c.cell,u.cell,r,e.length)},_reorderContent:function(t,r,o){var l,i,s,d,c=this,u=e(),h=t[0],p=f(t),g=xe(h,E(c.columns)),m=xe(r,E(c.columns)),k=xe(h,W(c.columns)),b=xe(r,W(c.columns)),_=A(c.columns).length,v=!!r.locked,w=c.footer||c.wrapper.find(".k-grid-footer"),C=l=b;for(r.hidden&&(v?(b=c.lockedTable.find("colgroup"),C=c.lockedHeader.find("colgroup"),l=e(c.lockedFooter).find(">table>colgroup")):(b=c.tbody.prev(),C=c.thead.prev(),l=w.find(".k-grid-footer-wrap").find(">table>colgroup"))),c._hasFilterRow()&&n(c.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),g,m,o,t.length),n(a(c.lockedHeader,c.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),k,C,o,p.length),c.options.scrollable&&n(a(c.lockedTable,c.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),k,b,o,p.length),w&&w.length&&(n(a(c.lockedFooter,w.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),k,l,o,p.length),n(w.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),g,m,o,t.length)),i=c.tbody.children(":not(.k-grouping-row,.k-detail-row)"),c.lockedTable&&(_>m?_<=g&&ee(c.lockedTable.find(">tbody>tr.k-grouping-row"),c.table.find(">tbody>tr.k-grouping-row"),t.length):_>g&&ee(c.table.find(">tbody>tr.k-grouping-row"),c.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),u=c.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")),s=0,d=i.length;s<d;s+=1)n(a(u[s],i[s],">td:not(.k-group-cell,.k-hierarchy-cell)"),g,m,o,t.length)},_autoFitLeafColumn:function(e){this.autoFitColumn(E(this.columns)[e])},autoFitColumn:function(t){var r,o,l,n,a,i,s,d,c,u,f,g,m,k,b,_,v,w,C,y=this,S=y.options,T=y.columns,H=y.lockedHeader?P(y.lockedHeader.find(">table>thead")).filter(h).length:0,R="col:not(.k-group-col):not(.k-hierarchy-col)",I="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if(t="number"==typeof t?T[t]:we(t)?Se(x(T),function(e){return e===t})[0]:Se(x(T),function(e){return e.field===t})[0],t&&p(t)){for(r=xe(t,E(T)),n=t.locked,l=n?y.lockedHeader.children("table"):y.thead.parent(),o=l.find("[data-index='"+r+"']"),d=n?y.lockedTable:y.table,c=y.footer||e(),y.footer&&y.lockedContent&&(c=y.footer.children(n?".k-grid-footer-locked":".k-grid-footer-wrap")),u=c.find("table").first(),y.lockedHeader&&!n&&(r-=H),f=0;f<T.length&&T[f]!==t;f++)T[f].hidden&&r--;if(S.scrollable?(a=l.find(R).eq(r).add(d.children("colgroup").find(R).eq(r)).add(u.find("colgroup").find(R).eq(r)),n||(i=d.parent(),s=i.scrollLeft())):a=d.children("colgroup").find(R).eq(r),g=l.add(d).add(u),m=be(o),a.width(""),g.css("table-layout","fixed"),a.width("auto"),g.addClass("k-autofitting"),g.css("table-layout",""),k=Math.ceil(Math.max(be(o),be(d.find("tr:not(.k-grouping-row)").eq(0).children(I).eq(r)),be(u.find("tr").eq(0).children(I).eq(r))))+1,a.width(k),t.width=k,S.scrollable){for(b=l.find("col"),v=0,w=0,C=b.length;w<C;w+=1){if(_=b[w].style.width,!_||_.indexOf("%")!=-1){v=0;break}v+=parseInt(_,10)}v&&g.each(function(){this.style.width=v+"px"})}Mt.msie&&8==Mt.version&&(g.css("display","inline-table"),setTimeout(function(){g.css("display","table")},1)),g.removeClass("k-autofitting"),s&&i.scrollLeft(s),y.trigger(ct,{column:t,oldWidth:m,newWidth:k}),y._applyLockedContainersWidth(),y._syncLockedContentHeight(),y._syncLockedHeaderHeight()}},reorderColumn:function(e,r,o){var l,n,a=this,i=d(r,a.columns),s=i?i.columns:a.columns,c=xe(r,s),u=s[e],h=!!u.locked,p=A(a.columns).length;c!==e&&(!r.locked&&h&&1==F(a.columns).length||r.locked&&!h&&1==p||(a._hideResizeHandle(),o===t&&(o=e<c),n=[r],a._reorderHeader(n,u,o),a.lockedHeader&&(L(a.thead),L(a.lockedHeader)),u.columns&&(u=E(u.columns),u=u[o?0:u.length-1]),r.columns&&(n=E(r.columns)),a._reorderContent(n,u,o),l=!!r.locked,l=l!=h,r.locked=h,s.splice(o?e:e+1,0,r),s.splice(c<e?c:c+1,1),a._templates(),a._updateColumnCellIndex(),a._updateTablesWidth(),a._applyLockedContainersWidth(),a._syncLockedHeaderHeight(),a._syncLockedContentHeight(),a._updateFirstColumnClass(),l&&(h?a.trigger(ht,{column:r}):a.trigger(pt,{column:r}))))},_updateColumnCellIndex:function(){var e,t=0;this.lockedHeader&&(e=this.lockedHeader.find("thead"),t=b(e,A(this.columns))),b(this.thead,F(this.columns),t)},lockColumn:function(e){var t,r=this.columns;e="number"==typeof e?r[e]:Se(r,function(t){return t.field===e})[0],!e||e.locked||e.hidden||(t=A(r).length-1,this.reorderColumn(t,e,!1))},unlockColumn:function(e){var t,r=this.columns;e="number"==typeof e?r[e]:Se(r,function(t){return t.field===e})[0],e&&e.locked&&!e.hidden&&(t=A(r).length,this.reorderColumn(t,e,!0))},cellIndex:function(t){var r=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(r=E(A(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+r},_modelForContainer:function(t){t=e(t),t.is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var r=t.attr(he.attr("uid"));return this.dataSource.getByUid(r)},_editable:function(){var t,r=this,o=r.selectable&&r.selectable.options.multiple,l=r.options.editable,n=function(){var t=me(),o=r._editContainer;!o||e.contains(o[0],t)||o[0]===t||e(t).closest(".k-animation-container").length||r.editable.end()&&r.closeCell()};l&&(this.wrapper.addClass("k-editable"),t=r._editMode(),"incell"===t?l.update!==!1&&r.wrapper.on(gt+Be,"tr:not(.k-grouping-row) > td",function(t){var l=e(this),n=r.lockedTable&&l.closest("table")[0]===r.lockedTable[0];l.hasClass("k-hierarchy-cell")||l.hasClass("k-detail-cell")||l.hasClass("k-group-cell")||l.hasClass("k-edit-cell")||l.has("a.k-grid-delete").length||l.has("button.k-grid-delete").length||l.closest("tbody")[0]!==r.tbody[0]&&!n||e(t.target).is(":input")||(r.editable?r.editable.end()&&(o&&e(me()).blur(),r.closeCell(),r.editCell(l)):r.editCell(l))}).on("focusin"+Be,function(){e.contains(this,me())||(clearTimeout(r.timer),r.timer=null)}).on("focusout"+Be,function(){r.timer=setTimeout(n,1)}):l.update!==!1&&r.wrapper.on(gt+Be,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(t){t.preventDefault(),r.editRow(e(this).closest("tr"))}),l.destroy!==!1?r.wrapper.on(gt+Be,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(t){t.preventDefault(),t.stopPropagation(),r.removeRow(e(this).closest("tr"))}):r.wrapper.on(gt+Be,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation(),r._confirmation()||e.preventDefault()}))},editCell:function(t){var r,o,l,n;if(t=e(t),r=this,o=E(r.columns)[r.cellIndex(t)],l=r._modelForContainer(t),r.closeCell(),l&&ae(o,l)&&!o.command){if(r.trigger(je,{model:l}))return;r._attachModelChange(l),r._editContainer=t,r.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:o.field,format:o.format,editor:o.editor,values:o.values},model:l,target:r,change:function(e){r.trigger(Ke,{values:e.values,container:t,model:l})&&e.preventDefault()}}).data("kendoEditable"),n=t.parent().addClass("k-grid-edit-row"),r.lockedContent&&oe(n[0],r._relatedRow(n).addClass("k-grid-edit-row")[0]),r.trigger(Oe,{container:t,model:l})}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),r=e[0].offsetWidth>t[0].clientWidth?he.support.scrollbar():0;this.lockedContent.height(t.height()-r)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){var e,t;this.lockedHeader&&(e=this.lockedHeader.children("table"),t=this.thead.parent(),this._adjustRowsHeight(e,t),re(e,t))},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(gt+Be,"a.k-grid-cancel",e._editCancelClickHandler),t.off(gt+Be,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView()}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editContainer.data("kendoWindow").bind("deactivate",t).close()),e._actionSheet&&(e._actionSheet.destroy(),e._actionSheet=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,r=e._modelForContainer(t);r&&r.unbind(Xe,e._modelChangeHandler)},closeCell:function(t){var r,o,l,n,a=this,i=a._editContainer;i&&(r=i.closest("tr").attr(he.attr("uid")),n=a.dataSource.getByUid(r),t&&a.trigger("cancel",{container:i,model:n})||(a.trigger(Ye,{type:t?"cancel":"save",model:n,container:i}),i.removeClass("k-edit-cell"),o=E(a.columns)[a.cellIndex(i)],l=i.parent().removeClass("k-grid-edit-row"),a._destroyEditable(),a._displayCell(i,o,n),i.hasClass("k-dirty-cell")&&e('<span class="k-dirty"/>').prependTo(i),a.trigger("itemChange",{item:l,data:n,ns:pe}),a.lockedContent&&oe(l.css("height","")[0],a._relatedRow(l).css("height","")[0])))},_displayCell:function(e,t,r){var o=this,l={storage:{},count:0},n=Ce({},he.Template,o.options.templateSettings),a=he.template(o._cellTmpl(t,l),n);l.count>0&&(a=Re(a,l.storage)),e.empty().html(a(r)),o.angular("compile",function(){return{elements:e,data:[{dataItem:r}]}})},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var r,o=this,l=o._editMode();"incell"!==l&&o.cancelRow(),t=e(t),o.lockedContent&&(t=t.add(o._relatedRow(t))),t=t.hide(),r=o._modelForContainer(t),r&&!o.trigger(Ve,{row:t,model:r})?(o.dataSource.remove(r),"inline"!==l&&"popup"!==l||o.dataSource.sync()):"incell"===l&&o._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(t){var r,o,l,n=this;t instanceof he.data.ObservableObject?r=t:(t=e(t),r=n._modelForContainer(t)),o=n._editMode(),n.cancelRow(),r&&(t=n.tbody.children("["+he.attr("uid")+"="+r.uid+"]"),n._attachModelChange(r),"popup"===o?n._createPopupEditor(r):"inline"===o?n._createInlineEditor(t,r):"incell"===o&&e(t).children(Fe).each(function(){var t=e(this),o=E(n.columns)[n.cellIndex(t)];if(r=n._modelForContainer(t),r&&(!r.editable||r.editable(o.field))&&o.field&&!o.selectable)return n.editCell(t),!1}),l=n.editView?n.editView.element:n._editContainer,l&&(this._editCancelClickHandler||(this._editCancelClickHandler=Re(this._editCancelClick,this)),l.on(gt+Be,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=Re(this._editUpdateClick,this)),l.on(gt+Be,"a.k-grid-update",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var r,o=this,l=o.options.navigatable,n=o.editable.options.model,a=o.editView?o.editView.element:o._editContainer;t.preventDefault(),t.stopPropagation(),o.trigger("cancel",{container:a,model:n})||(r=o.items().index(e(o.current()).parent()),o.cancelRow(),l&&(o._setCurrent(o.items().eq(r).children().filter(We).first()),ne(o.table,!0)))},_createPopupEditor:function(r){var o,l,n,a,i,s,d,c,u,h,p,f=this,g="<div "+he.attr("uid")+'="'+r.uid+'" class="k-popup-edit-form'+(f._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',m=[],k=E(f.columns),b=f.options.editable,_=b.template,v=we(b)?b.window:{},w=Ce({},he.Template,f.options.templateSettings);if(!f.trigger(je,{model:r})){if(v=v||{},_)for(typeof _===_t&&(_=window.unescape(_)),g+=he.template(_,w)(r),n=0,a=k.length;n<a;n++)o=k[n],o.command&&(c=le(o.command,"edit"),c&&(l=c));else for(n=0,a=k.length;n<a;n++)o=k[n],o.selectable||(o.command?o.command&&(c=le(o.command,"edit"),c&&(l=c)):(g+='<div class="k-edit-label"><label for="'+o.field+'">'+(o.title||o.field||"")+"</label></div>",ae(o,r)?(m.push({field:o.field,format:o.format,editor:o.editor,values:o.values}),g+="<div "+he.attr("container-for")+'="'+o.field+'" class="k-edit-field"></div>'):(h={storage:{},count:0},i=he.template(f._cellTmpl(o,h),w),h.count>0&&(i=Re(i,h.storage)),g+='<div class="k-edit-field">'+i(r)+"</div>")));l&&we(l)&&(l.text&&we(l.text)&&(s=l.text.update,d=l.text.cancel),l.attr&&(u=l.attr)),f._isMobile?(g+="</div></div>",f.editView=f.pane.append("<div data-"+he.ns+'role="view" data-'+he.ns+'use-native-scrolling="true" data-'+he.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+he.ns+'role="header" class="k-header">'+f._createButton({name:"update",text:s,attr:u})+(v.title||"Edit")+f._createButton({name:"canceledit",text:d,attr:u})+"</div>"+g+"</div>"),p=f._editContainer=f.editView.element.find(".k-popup-edit-form")):(g+='<div class="k-edit-buttons k-state-default">',g+=f._createButton({name:"update",text:s,attr:u})+f._createButton({name:"canceledit",text:d,attr:u}),g+="</div></div></div>",p=f._editContainer=e(g).appendTo(f.wrapper).eq(0).kendoWindow(Ce({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1,close:function(o){if(o.userTriggered){if(o.sender.element.focus(),f.trigger("cancel",{container:p,model:r}))return o.preventDefault(),t;var l=f.items().index(e(f.current()).parent());f.cancelRow(),f.options.navigatable&&(f._setCurrent(f.items().eq(l).children().filter(We).first()),ne(f.table,!0))}}},v))),f.editable=f._editContainer.kendoEditable({fields:m,model:r,clearContainer:!1,target:f}).data("kendoEditable"),f._isMobile&&p.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),f._openPopUpEditor(),f.trigger(Oe,{container:p,model:r})}},_openPopUpEditor:function(){this._isMobile?this.pane.navigate(this.editView,this._editAnimation):this._editContainer.data("kendoWindow").center().open()},_createInlineEditor:function(t,r){var o,l,n,a=this,i=[];a.trigger(je,{model:r})||(a.lockedContent&&(t=t.add(a._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(l=e(this),o=E(a.columns)[a.cellIndex(l)],!o.command&&ae(o,r))i.push({field:o.field,format:o.format,editor:o.editor,values:o.values}),l.attr(he.attr("container-for"),o.field),l.empty();else if(o.command&&(n=le(o.command,"edit"))){l.empty();var t,s,d;we(n)&&(n.text&&we(n.text)&&(t=n.text.update,s=n.text.cancel),n.attr&&(d=n.attr)),e(a._createButton({name:"update",text:t,attr:d})+a._createButton({name:"canceledit",text:s,attr:d})).appendTo(l)}}),a._editContainer=t,a.editable=new he.ui.Editable(t.addClass("k-grid-edit-row"),{target:a,fields:i,model:r,clearContainer:!1}),t.length>1&&(oe(t[0],t[1]),a._applyLockedContainersWidth()),a.trigger(Oe,{container:t,model:r}))},cancelRow:function(e){var t,r=this,o=r._editContainer;if(o){if(t=r._modelForContainer(o),e&&r.trigger("cancel",{container:o,model:t}))return;r._destroyEditable(),r.dataSource.cancelChanges(t),r._displayRow("popup"!==r._editMode()?o:r.tbody.find("["+he.attr("uid")+"="+t.uid+"]"))}},saveRow:function(){var t=this._editContainer,r=this._modelForContainer(t),o=e.Deferred();return t&&this.editable?!this.editable.end()||this.trigger(Ke,{container:t,model:r})?o.reject().promise():this.dataSource.sync():o.resolve().promise()},_displayRow:function(t){var r,o,l,n,a,i=this,s=i._modelForContainer(t),d=t.hasClass("k-state-selected"),c=t.hasClass("k-alt");s&&(i.lockedContent&&(r=e((c?i.lockedAltRowTemplate:i.lockedRowTemplate)(s)),i._relatedRow(t.last()).replaceWith(r)),i.angular("cleanup",function(){return{elements:t.get()}}),o=e((c?i.altRowTemplate:i.rowTemplate)(s)),t.replaceWith(o),i.trigger("itemChange",{item:o,data:s,ns:pe}),r&&r.length&&i.trigger("itemChange",{item:r,data:s,ns:pe}),n=o,a=[{dataItem:s}],r&&r.length&&(n=o.add(r),a.push({dataItem:s})),i.angular("compile",function(){return{elements:n.get(),data:a}}),d&&(i.options.selectable||e.grep(E(i.columns),function(e){return e.selectable}).length)&&i.select(o.add(r)),r&&oe(o[0],r[0]),l=o.next(),l.hasClass("k-detail-row")&&l.is(":visible")&&o.find(".k-hierarchy-cell .k-icon").removeClass("k-i-expand").addClass("k-i-collapse"))},_showMessage:function(t,r){var o,l,n,a=this;return a._isMobile?(o=he.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>'),l=e(o(t)).appendTo(a.view.element),n=a._actionSheet=new he.mobile.ui.ActionSheet(l,{cancel:t.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(t){var o=e(t.currentTarget).parent();o.hasClass("km-actionsheet-cancel")||a._removeRow(r)},popup:a._actionSheetPopupOptions}),n.open(r),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,r=t.options.editable,o=r===!0||typeof r===_t?t.options.messages.editable.confirmation:r.confirmation;return we(r)&&typeof r.mode===_t&&typeof o!==_t&&o!==!1&&(o=t.options.messages.editable.confirmation),o===!1||null==o||(typeof o===bt&&(o=o(t._modelForContainer(e))),t._showMessage({confirmDelete:r.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:r.cancelDelete||t.options.messages.editable.cancelDelete,title:o===!0?t.options.messages.editable.confirmation:o},e))},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var e=this;(e.editable&&e.editable.end()||!e.editable)&&!e.trigger(tt)&&e.dataSource.sync()},addRow:function(){var e,t,r,o,l,n,a=this,i=a.dataSource,s=a._editMode(),d=a.options.editable.createAt||"",c=i.pageSize(),u=i.view()||[];(a.editable&&a.editable.end()||!a.editable)&&("incell"!=s&&a.cancelRow(),e=i.indexOf(u[0]),"bottom"==d.toLowerCase()&&(e+=u.length,c&&!i.options.serverPaging&&c<=u.length&&(e-=1)),e<0&&(e=i.page()>i.totalPages()?(i.page()-1)*c:0),t=i.insert(e,{}),r=t.uid,o=a.lockedContent?a.lockedTable:a.table,l=o.find("tr["+he.attr("uid")+"="+r+"]"),n=l.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(a._firstEditableColumnIndex(l)),"inline"===s&&l.length?a.editRow(l):"popup"===s?a.editRow(t):n.length&&a.editCell(n),"bottom"==d.toLowerCase()&&a.lockedContent&&(a.lockedContent[0].scrollTop=a.content[0].scrollTop=a.table[0].offsetHeight))},_firstEditableColumnIndex:function(e){var t,r,o,l=this,n=E(l.columns),a=l._modelForContainer(e);for(r=0,o=n.length;r<o;r++)if(t=n[r],a&&(!a.editable||a.editable(t.field))&&!t.command&&t.field&&t.hidden!==!0)return r;return-1},_toolbar:function(){var t,r=this,o=r.wrapper,l=r.options.toolbar,n=r.options.editable;l&&(t=r.wrapper.find(".k-grid-toolbar"),t.length||(Ie(l)||(l=typeof l===_t?l:r._toolbarTmpl(l).replace(Rt,"\\#"),l=Re(he.template(l),r)),t=e('<div class="k-header k-grid-toolbar" />').html(l({})).prependTo(o),r.angular("compile",function(){return{elements:t.get()}})),n&&n.create!==!1&&t.on(gt+Be,".k-grid-add",function(e){e.preventDefault(),r.addRow()}).on(gt+Be,".k-grid-cancel-changes",function(e){e.preventDefault(),r.cancelChanges()}).on(gt+Be,".k-grid-save-changes",function(e){e.preventDefault(),r.saveChanges()}),t.on(gt+Be,".k-grid-excel",function(e){e.preventDefault(),r.saveAsExcel()}),t.on(gt+Be,".k-grid-pdf",function(e){e.preventDefault(),r.saveAsPDF()}))},_toolbarTmpl:function(e){var t,r,o=this,l="";if(Te(e))for(t=0,r=e.length;t<r;t++)l+=o._createButton(e[t]);return l},_createButton:function(e){var r,l=e.template||zt,n=typeof e===_t?e:e.name||e.text,a=Nt[n]?Nt[n].className:"k-grid-"+(n||"").replace(/\s/g,""),i={className:a,text:n,imageClass:"",attr:"",iconClass:""},s=this.options.messages.commands;if(!(n||we(e)&&e.template))throw Error("Custom commands should have name specified");return we(e)?(e=Ce(!0,{},e),e.className&&xe(i.className,e.className.split(" "))<0?e.className+=" "+i.className:e.className===t&&(e.className=i.className),"edit"===n&&we(e.text)&&(e=Ce(!0,{},e),e.text=e.text.edit),e.attr&&(we(e.attr)&&(e.attr=o(e.attr)),typeof e.attr===_t&&(r=e.attr.match(/class="(.+?)"/),r&&xe(r[1],e.className.split(" "))<0&&(e.className+=" "+r[1]))),i=Ce(!0,i,Nt[n],{text:s[n]},e)):i=Ce(!0,i,Nt[n],{text:s[n]}),he.template(l)(i)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(gt+Be,t._groupableClickHandler):t._groupableClickHandler=function(r){var o=e(this),l=o.closest("tr");o.hasClass("k-i-collapse")?t.collapseGroup(l):t.expandGroup(l),r.preventDefault(),r.stopPropagation()},t._isLocked()?t.lockedTable.on(gt+Be,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",t._groupableClickHandler):t.table.on(gt+Be,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,r=t.wrapper,o=t.options.groupable,l=Ne+"["+he.attr("field")+"]",n=t.content?".k-grid-header:first "+l:"table:first>.k-grid-header "+l;o&&o.enabled!==!1&&(r.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(r),t.groupable&&t.groupable.destroy(),t.groupable=new pe.Groupable(r,Ce({},o,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:n,filter:n,allowDrag:t.options.reorderable,change:function(e){t.trigger("group",{groups:e.groups})&&e.preventDefault()}})))},_continuousItems:function(t,r){var o,l,n,a,i,s,d,c;if(this.lockedContent){for(o=this,l=o.table.add(o.lockedTable),n=e(t,l[0]),a=e(t,l[1]),i=r?A(o.columns).length:1,s=r?o.columns.length-i:1,d=[],c=0;c<n.length;c+=i)He.apply(d,n.slice(c,c+i)),He.apply(d,a.splice(0,s));return d}},_selectable:function(){var r,o,l,n,a=this,i=[],s=a._isLocked(),d=a.options.selectable,c=a.dataSource.options;if(d){if(a.selectable&&a.selectable.destroy(),a.options.persistSelection===!0){if(!c.schema||!c.schema.model||!c.schema.model.id)throw Error("Selection persistence requires a data source with a model that has e defined id");a._selectedIds={}}d=he.ui.Selectable.parseOptions(d),r=d.multiple,o=d.cell,a._hasDetails()&&(i[i.length]=".k-detail-row"),(a.options.groupable||a._hasFooters())&&(i[i.length]=".k-grouping-row,.k-group-footer"),i=i.join(","),""!==i&&(i=":not("+i+")"),l=a.table,s&&(l=l.add(a.lockedTable)),n=">"+(o?qe:"tbody>tr"+i),a.selectable=new he.ui.Selectable(l,{filter:n,aria:!0,multiple:r,change:function(){a.options.persistSelection&&!o&&a._persistSelectedRows(),a.trigger(Xe)},useAllItems:s&&r&&o,relatedTarget:function(t){var r,l,n,i;if(!o&&s){for(l=e(),n=0,i=t.length;n<i;n++)r=a._relatedRow(t[n]),xe(r[0],t)<0&&(l=l.add(r));return l}},continuousItems:function(){return a._continuousItems(n,o)}}),a.options.navigatable&&l.on("keydown"+Be,function(n){var i=a.current(),d=n.target;if(n.keyCode===ve.SPACEBAR&&!n.shiftKey&&e.inArray(d,l)>-1&&!i.is(".k-edit-cell,.k-header")&&i.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(n.preventDefault(),n.stopPropagation(),i=o?i:i.parent(),s&&!o&&(i=i.add(a._relatedRow(i))),r)if(n.ctrlKey){if(i.hasClass(at))return i.removeClass(at),a.trigger(Xe),t}else a.selectable.clear();else a.selectable.clear();o||(a.selectable._lastActive=i),a.selectable.value(i)}else!o&&(n.shiftKey&&n.keyCode==ve.LEFT||n.shiftKey&&n.keyCode==ve.RIGHT||n.shiftKey&&n.keyCode==ve.UP||n.shiftKey&&n.keyCode==ve.DOWN||n.keyCode===ve.SPACEBAR&&n.shiftKey)&&(n.preventDefault(),n.stopPropagation(),i=i.parent(),s&&(i=i.add(a._relatedRow(i))),r?(a.selectable._lastActive||(a.selectable._lastActive=i),a.selectable.selectRange(a.selectable._firstSelectee(),i)):(a.selectable.clear(),a.selectable.value(i)))})}},_clipboard:function(){var e,t=this.options,r=t.selectable;r&&t.allowCopy&&(e=this,t.navigatable||e.table.add(e.lockedTable).attr("tabindex",0).on("mousedown"+Be+" keydown"+Be,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}).on("mousedown"+Be,Me+">"+We,Re(se,e)),e.copyHandler=Re(e.copySelection,e),e.updateClipBoardState=function(){e.areaClipBoard&&e.areaClipBoard.val(e.getTSV()).focus().select()},e.bind("change",e.updateClipBoardState),e.wrapper.on("keydown",e.copyHandler),e.clearAreaHandler=Re(e.clearArea,e),e.wrapper.on("keyup",e.clearAreaHandler))},copySelection:function(t){t instanceof jQuery.Event&&!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&""+window.getSelection()||document.selection&&document.selection.createRange().text||(this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper)),this.areaClipBoard.val(this.getTSV()).focus().select())},getTSV:function(){var t,r,o,l,n,a,i=this,s=i.select(),d="\t",c=i.options.allowCopy,u=!0;return e.isPlainObject(c)&&c.delimeter&&(d=c.delimeter),t="",s.length&&(s.eq(0).is("tr")&&(s=s.find("td:not(.k-group-cell)")),u&&s.filter(":visible"),r=[],o=this.columns.length,l=i._isLocked()&&A(i.columns).length,n=!0,e.each(s,function(t,a){var s,d,c,h;a=e(a),s=a.closest("tr"),d=s.index(),c=a.index(),u&&(c-=a.prevAll(":hidden").length),l&&n&&(n=e.contains(i.lockedTable[0],a[0])),i._groups()&&n&&(c-=i._groups()),c=n?c:c+l,o>c&&(o=c),h=a.text(),r[d]||(r[d]=[]),r[d][c]=h}),a=r.length,r=e.each(r,function(e,t){t&&(r[e]=t.slice(o),a>e&&(a=e))}),e.each(r.slice(a),function(e,r){t+=r?r.join(d)+"\r\n":"\r\n"})),t},clearArea:function(t){var r;this.areaClipBoard&&t&&t.target===this.areaClipBoard[0]&&(r=this.options.navigatable?e(this.current()).closest("table"):this.table,ne(r,!0)),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_minScreenSupport:function(){var t=this.hideMinScreenCols();t&&(this.minScreenResizeHandler=Re(this.hideMinScreenCols,this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,r){var o,l,n,a=!1;for(o=0;o<e.length;o++)l=e[o],n=l.minScreenWidth,n!==t&&null!==n&&(a=!0,n>r?this.hideColumn(l):this.showColumn(l)),!l.hidden&&l.columns&&(a=this._iterateMinScreenCols(l.columns,r)||a);return a},_relatedRow:function(t){var r,o,l=this.lockedTable;return t=e(t),l?(r=t.closest(this.table.add(this.lockedTable)),o=r.find(">tbody>tr").index(t),r=r[0]===this.table[0]?l:this.table,r.find(">tbody>tr").eq(o)):t},clearSelection:function(){var t=this;t.selectable&&t.selectable.clear(),e.grep(E(t.columns),function(e){return e.selectable}).length&&t._deselectCheckRows(t.select()),t.options.persistSelection&&t._persistSelectedRows(),t.trigger(Xe)},select:function(r){var o=this,l=o.selectable;return r=o.table.add(o.lockedTable).find(r),r.length?(l&&!l.options.multiple&&(l.clear(),r=r.first()),o._isLocked()&&(r=r.add(r.map(function(){return o._relatedRow(this)}))),l?l.value(r):(r.each(function(){e(this).addClass(at).find(st).prop("checked",!0).attr("aria-label","Deselect row").attr("aria-checked",!0)}),o.select().length===o.items().length&&o._toggleHeaderCheckState(!0),o.options.persistSelection&&o._persistSelectedRows(),o.trigger(Xe)),t):l?l.value():o.items().filter("."+at)},_toggleHeaderCheckState:function(e){var t=this;e?t.thead.add(t.lockedHeader).find("tr "+st).prop("checked",!0).attr("aria-checked",!0).attr("aria-label","Deselect all rows"):t.thead.add(t.lockedHeader).find("tr "+st).prop("checked",!1).attr("aria-checked",!1).attr("aria-label","Select all rows")},_deselectCheckRows:function(t){var r=this;t=r.table.add(r.lockedTable).find(t),t.each(function(){e(this).removeClass(at).find(st).attr("aria-checked",!1).prop("checked",!1).attr("aria-label","Select row")}),r._toggleHeaderCheckState(!1),r.options.persistSelection&&r._persistSelectedRows(),r.trigger(Xe)},_persistSelectedRows:function(){
var e,t,r,o=this,l=o.items(),n=o.dataSource.options,a=n.schema.model.id,i={};for(o.select().each(function(){t=o.dataItem(this),i[t[a]]=!0}),r=0;r<l.length;r++)t=o.dataItem(l[r]),e=t[a],i[e]?o._selectedIds[e]=!0:delete o._selectedIds[e]},selectedKeyNames:function(){var e,t=this,r=[];for(e in t._selectedIds)r.push(e);return r.sort(),r},_updateCurrentAttr:function(t,r){var o=e(t).data("headerId");e(t).removeClass(nt).closest("table").removeAttr("aria-activedescendant"),o?(o=o.replace(this._cellId,""),e(t).attr("id",o)):e(t).removeAttr("id"),r.data("headerId",r.attr("id")).attr("id",this._cellId).addClass(nt).closest("table").attr("aria-activedescendant",this._cellId),this._current=r},_scrollCurrent:function(){var t,r,o,l,n,a,i=this._current,s=this.options.scrollable;i&&s&&(t=i.parent(),r=t.closest("table").parent(),o=r.is(".k-grid-content-locked,.k-grid-header-locked"),l=r.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"),n=e(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0],l&&(s.virtual?(a=Math.max(xe(t[0],this._items(t.parent())),0),this._rowVirtualIndex=this.virtualScrollable.itemIndex(a),this.virtualScrollable.scrollIntoView(t)):this._scrollTo(this._relatedRow(t)[0],n)),this.lockedContent&&(this.lockedContent[0].scrollTop=n.scrollTop),o||this._scrollTo(i[0],n))},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,r){var o=this._current;return t=e(t),t.length&&(o&&o[0]===t[0]||(this._updateCurrentAttr(o,t),this._scrollCurrent(),r||this.trigger(ft,{element:t}))),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(nt),this._current=null)},_scrollTo:function(t,r){var o,l=t.tagName.toLowerCase(),n="td"===l||"th"===l,a=t[n?"offsetLeft":"offsetTop"],i=t[n?"offsetWidth":"offsetHeight"],s=r[n?"scrollLeft":"scrollTop"],d=r[n?"clientWidth":"clientHeight"],c=a+i,u=0,h=0,p=0;qt&&n&&(o=e(t).closest("table")[0],Mt.msie?h=o.offsetLeft:Mt.mozilla&&(p=o.offsetLeft-he.support.scrollbar())),s=Math.abs(s+h-p),u=s>a?a:c>s+d?i<=d?c-d:a:s,u=Math.abs(u+h)+p,r[n?"scrollLeft":"scrollTop"]=u},_navigatable:function(){var t,r,o,l=this;l.options.navigatable&&(t=l.table.add(l.lockedTable),r=l.thead.parent().add(e(">table",l.lockedHeader)),o=t,l.options.scrollable&&(o=o.add(r),r.attr(kt,-1)),this._navigatableTables=o,o.off("mousedown"+Be+" focus"+Be+" focusout"+Be+" keydown"+Be),r.on("keydown"+Be,Re(l._openHeaderMenu,l)).find("a.k-link").attr("tabIndex",-1),t.attr(kt,Le.max(t.attr(kt)||0,0)).on("mousedown"+Be+" keydown"+Be,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),o.on(he.support.touch?"touchstart"+Be:"mousedown"+Be,Me+">"+We,Re(se,l)).on("focus"+Be,Re(l._tableFocus,l)).on("focusout"+Be,Re(l._tableBlur,l)).on("keydown"+Be,Re(l._tableKeyDown,l)))},_openHeaderMenu:function(e){e.altKey&&e.keyCode==ve.DOWN&&(this.current().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())},_setTabIndex:function(e){this._navigatableTables.attr(kt,-1),e.attr(kt,0)},_tableFocus:function(t){var r,o;he.support.touch||(r=this.current(),o=e(t.currentTarget),r&&r.is(":visible")?r.addClass(nt):this._setCurrent(o.find(Pe)),this._setTabIndex(o))},_tableBlur:function(){var e=this.current();e&&e.removeClass(nt)},_tableKeyDown:function(r){var o,l=this.current(),n=this.virtualScrollable&&this.virtualScrollable.fetching(),a=e(r.target),i=!r.isDefaultPrevented()&&!a.is(":button,a,:input,a>.k-icon");return n?(r.preventDefault(),t):(l=l?l:e(this.lockedTable).add(this.table).find(Pe),l.length&&(o=!1,i&&r.keyCode==ve.UP&&(o=this._moveUp(l,r.shiftKey)),i&&r.keyCode==ve.DOWN&&(o=this._moveDown(l,r.shiftKey)),i&&r.keyCode==(qt?ve.LEFT:ve.RIGHT)&&(o=this._moveRight(l,r.altKey,r.shiftKey,r.currentTarget)),i&&r.keyCode==(qt?ve.RIGHT:ve.LEFT)&&(o=this._moveLeft(l,r.altKey,r.shiftKey,r.currentTarget)),i&&r.keyCode==ve.PAGEDOWN&&(o=this._handlePageDown()),i&&r.keyCode==ve.PAGEUP&&(o=this._handlePageUp()),r.keyCode!=ve.ENTER&&r.keyCode!=ve.F2||(o=this._handleEnterKey(l,r.currentTarget,a)),r.keyCode==ve.ESC&&(o=this._handleEscKey(l,r.currentTarget)),r.keyCode==ve.TAB&&(o=this._handleTabKey(l,r.currentTarget,r.shiftKey)),o&&(r.preventDefault(),r.stopPropagation())),t)},_moveLeft:function(t,r,o,l){var n,a,i=t.parent(),s=i.parent();return r?this.collapseRow(i):(a=s.find(Me).index(i),n=this._prevHorizontalCell(s,t,a),n[0]||(o?this.lockedTable?(n=this._relatedRow(i),e.contains(this.lockedTable[0],i[0])&&(n=n.prevAll(Ee+":first")),n=n.children(Fe+":last")):n=this._tabNext(t,l,!0):(s=this._horizontalContainer(s),n=this._prevHorizontalCell(s,t,a),n[0]!==t[0]&&ne(s.parent(),!0))),this._setCurrent(n)),!0},_moveRight:function(t,r,o,l){var n,a,i=t.parent(),s=i.parent();return r?this.expandRow(i):(a=s.find(Me).index(i),n=this._nextHorizontalCell(s,t,a),n[0]||(o?this.lockedTable?(n=this._relatedRow(i),e.contains(this.table[0],i[0])&&(n=n.nextAll(Ee+":first")),n=n.children(Fe+":first")):n=this._tabNext(t,l,!1):(s=this._horizontalContainer(s,!0),n=this._nextHorizontalCell(s,t,a),n[0]!==t[0]&&ne(s.parent(),!0))),this._setCurrent(n)),!0},_moveUp:function(e,t){var r,o=e.parent().parent();return t?(r=e.parent(),r=r.prevAll(Ee+":first"),r=e.parent().is(Ee)?r.children().eq(e.index()):r.children(Fe+":last")):(r=this._prevVerticalCell(o,e),r[0]||(o=this._verticalContainer(o,!0),r=this._prevVerticalCell(o,e),r[0]&&ne(o.parent(),!0))),this._setCurrent(r),!0},_moveDown:function(e,t){var r,o=e.parent().parent();return t?(r=e.parent(),r=r.nextAll(Ee+":first"),r=e.parent().is(Ee)?r.children().eq(e.index()):r.children(Fe+":first")):(r=this._nextVerticalCell(o,e),r[0]||(o=this._verticalContainer(o),r=this._nextVerticalCell(o,e),r[0]&&ne(o.parent(),!0))),this._setCurrent(r),!0},_handlePageDown:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()+1),!0)},_handlePageUp:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()-1),!0)},_handleTabKey:function(t,r,o){var l,n=this.options.editable&&"incell"==this._editMode();return!(!n||t.is("th"))&&(l=e(me()).closest(".k-edit-cell"),l[0]&&l[0]!==t[0]&&(t=l),l=this._tabNext(t,r,o),!!l.length&&(this._handleEditing(t,l,l.closest("table")),!0))},_handleEscKey:function(t,r){var o,l=me(),n="incell"==this._editMode();return de(t)?(n?this.closeCell(!0):(o=e(t).parent().index(),l&&l.blur(),this.cancelRow(!0),o>=0&&this._setCurrent(this.items().eq(o).children(We).first())),Mt.msie&&Mt.version<9&&document.body.focus(),ne(r,!0),!0):!!t.has(l).length&&(ne(r,!0),!0)},_toggleCurrent:function(e,t){var r=e.parent();return r.is(".k-grouping-row")?(r.find(".k-icon:first").click(),!0):!(t||!r.is(".k-master-row"))&&(r.find(".k-icon:first").click(),!0)},_handleEnterKey:function(t,r,o){var l,n=this.options.editable&&this.options.editable.update!==!1,a=o.closest("[role=gridcell]");return o.is("table")||e.contains(t[0],o[0])||(t=a),t.is("th")?(t.find(".k-link").click(),!0):!!this._toggleCurrent(t,n)||(l=t.find(":kendoFocusable:first"),l[0]&&!t.hasClass("k-edit-cell")&&t.hasClass("k-state-focused")?(l.focus(),!0):!(!n||o.is(":button,.k-button,textarea"))&&(a[0]||(a=t),this._handleEditing(a,!1,r),!0))},_nextHorizontalCell:function(e,t,r){var o,l,n,a=t.nextAll(Fe);return a.length||(o=e.find(Me),l=o.index(t.parent()),l!=-1)?a.first():t.hasClass("k-header")?(n=[],z([A(this.columns)[0]],B(o.eq(0).children().first()),n,0,0),n[r]?n[r][0]:t):t.parent().hasClass("k-filter-row")?o.last().children(Fe).first():o.eq(r).children(Fe).first()},_prevHorizontalCell:function(e,t,r){var o,l,n,a,i=t.prevAll(Fe);return i.length||(o=e.find(Me),l=o.index(t.parent()),l!=-1)?i.first():t.hasClass("k-header")?(n=[],a=A(this.columns),z([a[a.length-1]],B(o.eq(0).children().last()),n,0,0),n[r]?n[r][0]:t):t.parent().hasClass("k-filter-row")?o.last().children(Fe).last():o.eq(r).children(Fe).last()},_currentDataIndex:function(e,r){var o,l=r.attr("data-index");return l?(o=A(this.columns).length,o&&!e.closest("div").hasClass("k-grid-content-locked")[0]?l-o:l):t},_prevVerticalCell:function(t,r){var o,l=r.parent(),n=t.children(Me),a=n.index(l),i=this._currentDataIndex(t,r);if(i||r.hasClass("k-header"))return o=N(r),o.eq(o.length-2);if(i=l.children(Fe).index(r),l.hasClass("k-filter-row"))return P(t).eq(i);if(a==-1){if(l=t.find(".k-filter-row"),!l[0])return P(t).eq(i)}else l=0===a?e():n.eq(a-1);return o=l.children(Fe),o.eq(o.length>i?i:0)},_nextVerticalCell:function(e,r){var o,l=r.parent(),n=e.children(Me),a=n.index(l),i=this._currentDataIndex(e,r);return a!=-1&&i===t&&r.hasClass("k-header")?B(r).eq(1):(i=i?parseInt(i,10):l.children(Fe).index(r),l=n.eq(a==-1?0:a+r[0].rowSpan),o=l.children(Fe),o.eq(o.length>i?i:0))},_verticalContainer:function(e,t){var r=e.parent(),o=this._navigatableTables.length,l=Math.floor(o/2),n=xe(r[0],this._navigatableTables);return t&&(l*=-1),n+=l,(n>=0||n<o)&&(r=this._navigatableTables.eq(n)),r.find(t?"thead":"tbody")},_horizontalContainer:function(e,t){var r,o,l=this._navigatableTables.length;return l<=2?e:(r=e.parent(),o=xe(r[0],this._navigatableTables),o+=t?1:-1,!t||2!=o&&o!=l?!t&&(1==o||o<0)?e:this._navigatableTables.eq(o).find("thead, tbody"):e)},_tabNext:function(e,t,r){var o=!0,l=r?e.prevAll(Fe+":first"):e.nextAll(":visible:first");return l.length||(l=e.parent(),this.lockedTable&&(o=r&&t==this.lockedTable[0]||!r&&t==this.table[0],l=this._relatedRow(l)),o&&(l=l[r?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")),l=l.children(Fe+(r?":last":":first"))),l},_handleEditing:function(r,o,l){var n,a,i=this,s=e(me()),d=i._editMode(),c=Mt.msie,u=c&&Mt.version<9,h=i._editContainer,p=i.options.editable&&i.options.editable.update!==!1;if(l=e(l),a="incell"==d?r.hasClass("k-edit-cell"):r.parent().hasClass("k-grid-edit-row"),i.editable){if(e.contains(h[0],s[0])&&(Mt.opera||u?s.blur().change().triggerHandler("blur"):(s.blur(),c&&s.blur())),!i.editable)return ne(l),t;if(!i.editable.end())return i._setCurrent("incell"==d?h:h.children().filter(Fe).first()),n=h.find(":kendoFocusable:first")[0],n&&n.focus(),t;"incell"==d?i.closeCell():(i.saveRow(),a=!0)}o&&i._setCurrent(o),u&&document.body.focus(),ne(l,!0),p&&(!a&&!o||o)&&("incell"==d?i.editCell(i.current()):i.editRow(i.current().parent()))},_wrapper:function(){var e=this,t=e.table,r=e.options.height,o=e.element;o.is("div")||(o=o.wrap("<div/>").parent()),e.wrapper=o.addClass("k-grid k-widget k-display-block"),r&&(e.wrapper.css(mt,r),t.css(mt,"auto")),e._initMobile()},_initMobile:function(){var t,r=this.options,o=this;this._isMobile=r.mobile===!0&&he.support.mobileOS||"phone"===r.mobile||"tablet"===r.mobile,this._isMobile&&(t=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+he.ns+'stretch="true" data-'+he.ns+'role="view" data-'+he.ns+'init-widgets="false"></div>').parent(),this.pane=he.mobile.ui.Pane.wrap(t),this.view=this.pane.view(),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"},r.height&&this.pane.element.parent().css(mt,r.height),this._editAnimation="slide",this.view.bind("show",function(){o._isLocked()&&(o._updateTablesWidth(),o._applyLockedContainersWidth(),o._syncLockedContentHeight(),o._syncLockedHeaderHeight(),o._syncLockedFooterHeight())}))},_tbody:function(){var t,r=this,o=r.table;t=o.find(">tbody"),t.length||(t=e("<tbody/>").appendTo(o)),r.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,r,o,l,n=this,a=n.options,i=a.scrollable,s=i!==!0&&i.virtual&&!n.virtualScrollable,d=!he.support.kineticScrollNeeded||s?he.support.scrollbar():0;i&&(t=n.wrapper.children(".k-grid-header"),t[0]||(t=e('<div class="k-grid-header" />').insertBefore(n.table)),t.css(qt?"padding-left":"padding-right",i.virtual?d+1:d),r=e('<table role="grid" />'),Wt&&r.attr("cellspacing",0),r.width(n.table[0].style.width),r.append(n.thead),t.empty().append(e('<div class="k-grid-header-wrap k-auto-scrollable" />').append(r)),n.content=n.table.parent(),n.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")&&(n.content=n.content.parent()),n.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(n.content=n.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()),s&&(n.virtualScrollable=new Pt(n.content,{dataSource:n.dataSource,itemHeight:function(){return n._averageRowHeight()}})),n.scrollables=t.children(".k-grid-header-wrap").add(n.content),o=n.wrapper.find(".k-grid-footer"),o.length&&(n.scrollables=n.scrollables.add(o.children(".k-grid-footer-wrap"))),i.virtual?n.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+Be).bind("scroll"+Be,function(){n.scrollables.scrollLeft(this.scrollLeft),n.lockedContent&&(n.lockedContent[0].scrollTop=this.scrollTop)}):(n.content.unbind("scroll"+Be).bind("scroll"+Be,function(e){n.scrollables.not(e.currentTarget).scrollLeft(this.scrollLeft),n.lockedContent&&e.currentTarget==n.content[0]&&(n.lockedContent[0].scrollTop=this.scrollTop)}),l=n.content.data("kendoTouchScroller"),l&&l.destroy(),l=he.touchScroller(n.content),l&&l.movable&&(n.touchScroller=l,l.movable.bind("change",function(e){n.scrollables.scrollLeft(-e.sender.x),n.lockedContent&&n.lockedContent.scrollTop(-e.sender.y)}),n.one(rt,function(e){e.sender.wrapper.addClass("k-grid-backface")}))))},_renderNoRecordsContent:function(){var t,r=this;r.options.noRecords&&(t=r.table.parent().children("."+dt),t.length&&(r.angular("cleanup",function(){return{elements:t.get()}}),t.remove()),r.dataSource&&r.dataSource.view().length||(t=e(r.noRecordsTemplate({})).insertAfter(r.table),r.angular("compile",function(){return{elements:t.get(),data:[{}]}})))},_setContentWidth:function(t){var r,o=this,l="k-grid-content-expander",n='<div class="'+l+'"></div>',a=o.resizable;o.options.scrollable&&o.wrapper.is(":visible")&&(r=o.table.parent().children("."+l),o._setContentWidthHandler=Re(o._setContentWidth,o),o.dataSource&&o.dataSource.view().length?r[0]&&(r.remove(),a&&a.unbind("resize",o._setContentWidthHandler)):(r[0]||(r=e(n).appendTo(o.table.parent()),a&&a.bind("resize",o._setContentWidthHandler)),o.thead&&(r.width(o.thead.width()),isNaN(parseFloat(t,10))||o.content.scrollLeft(t))),o._applyLockedContainersWidth(),o.lockedHeader&&0===o.table[0].clientWidth&&(o.table[0].style.width="1px"))},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),r=t.parent(),o=this.wrapper[0].clientWidth,l=this._groups(),n=he.support.scrollbar(),a=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),i=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=R(a),d=R(i);l>0&&(s+=be(this.lockedHeader.find(".k-group-cell:first"))*l),s>=o&&(s=o-3*n),this.lockedHeader.add(this.lockedContent).width(s),r[0].style.width=r.parent().width()-s-2+"px",t.add(this.table).width(d),this.virtualScrollable&&(o-=n),this.content[0].style.width=o-s-2+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(s),e=this.footer.find(".k-grid-footer-wrap"),e[0].style.width=r[0].clientWidth+"px",e.children().first().width(d))}},_setContentHeight:function(){var e,t=this,r=t.options,o=t.wrapper.innerHeight(),l=t.wrapper.children(".k-grid-header"),n=he.support.scrollbar();r.scrollable&&t.wrapper.is(":visible")&&(o-=_e(l),t.pager&&(o-=_e(t.pager.element)),r.groupable&&(o-=_e(t.wrapper.children(".k-grouping-header"))),r.toolbar&&(o-=_e(t.wrapper.children(".k-grid-toolbar"))),t.footerTemplate&&(o-=_e(t.wrapper.children(".k-grid-footer"))),e=function(e){var t,r;return!!e[0].style.height||(t=e.height(),e.height("auto"),r=e.height(),t!=r?(e.height(""),!0):(e.height(""),!1))},e(t.wrapper)&&(o>2*n?(t.lockedContent&&(n=t.table[0].offsetWidth>t.table.parent()[0].clientWidth?n:0,t.lockedContent.height(o-n)),t.content.height(o)):t.content.height(2*n+1)))},_averageRowHeight:function(){var e,t=this,r=t._items(t.tbody).length,o=t._rowHeight;return 0===r?o:(t._rowHeight||(t._rowHeight=o=_e(t.table)/r,t._sum=o,t._measures=1),e=_e(t.table)/r,o!==e&&(t._measures++,t._sum+=e,t._rowHeight=t._sum/t._measures),o)},_dataSource:function(){var e,r=this,o=r.options,l=o.dataSource;l=Te(l)?{data:l}:l,we(l)&&(Ce(l,{table:r.table,fields:r.columns}),e=o.pageable,we(e)&&e.pageSize!==t&&(l.pageSize=e.pageSize)),r.dataSource&&r._refreshHandler?r.dataSource.unbind(Xe,r._refreshHandler).unbind(ze,r._progressHandler).unbind(Ae,r._errorHandler):(r._refreshHandler=Re(r.refresh,r),r._progressHandler=Re(r._requestStart,r),r._errorHandler=Re(r._error,r)),r.dataSource=fe.create(l).bind(Xe,r._refreshHandler).bind(ze,r._progressHandler).bind(Ae,r._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var r,o,l,n,a,i,s,d,c,u,h=this,p=h.tbody,f=t.model,g=h.tbody.find("tr["+he.attr("uid")+"="+f.uid+"]"),m=g.hasClass("k-alt"),k=h._items(p).index(g),b=h.lockedContent;if(b&&(r=h._relatedRow(g)),g.add(r).children(".k-edit-cell").length&&!h.options.rowTemplate)g.add(r).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){o=e(this),l=E(h.columns)[h.cellIndex(o)],l.field===t.field&&(o.hasClass("k-edit-cell")?o.addClass("k-dirty-cell"):(h._displayCell(o,l,f),e('<span class="k-dirty"/>').prependTo(o)))});else if(!g.hasClass("k-grid-edit-row")){for(i=e().add(g),b&&(n=(m?h.lockedAltRowTemplate:h.lockedRowTemplate)(f),i=i.add(r),r.replaceWith(n)),h.angular("cleanup",function(){return{elements:i.get()}}),n=(m?h.altRowTemplate:h.rowTemplate)(f),g.replaceWith(n),n=h._items(p).eq(k),u=[{dataItem:f}],b&&(g=g.add(r),r=h._relatedRow(n)[0],oe(n[0],r),n=n.add(r),u.push({dataItem:f})),h.angular("compile",function(){return{elements:n.get(),data:u}}),a=h.options.selectable,a&&g.hasClass("k-state-selected")&&h.select(n),d=i.children(":not(.k-group-cell,.k-hierarchy-cell)"),s=n.children(":not(.k-group-cell,.k-hierarchy-cell)"),k=0,c=h.columns.length;k<c;k++)l=h.columns[k],o=s.eq(k),a&&d.eq(k).hasClass("k-state-selected")&&o.addClass("k-state-selected"),l.field===t.field&&e('<span class="k-dirty"/>').prependTo(o);h.trigger("itemChange",{item:n,data:f,ns:pe})}},_pageable:function(){var t,r=this,o=r.options.pageable;o&&(t=r.wrapper.children("div.k-grid-pager"),t.length||(t=e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(r.wrapper)),r.pager&&r.pager.destroy(),r.pager="object"==typeof o&&o instanceof he.ui.Pager?o:new he.ui.Pager(t,Ce({},o,{dataSource:r.dataSource})),r.pager.bind("pageChange",function(e){r.trigger("page",{page:e.index})&&e.preventDefault()}))},_footer:function(){var t,r,o,l=this,n=l.dataSource.aggregates(),a="",i=l.footerTemplate,s=l.options,d=l.footer||l.wrapper.find(".k-grid-footer");i?(a=e(l._wrapFooter(i(n))),d.length?(r=a,l.angular("cleanup",function(){return{elements:d.get()}}),d.replaceWith(r),d=l.footer=r):d=l.footer=s.scrollable?s.pageable?a.insertBefore(l.wrapper.children("div.k-grid-pager")):a.appendTo(l.wrapper):a.insertBefore(l.tbody),l.angular("compile",function(){return{elements:d.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:ye(l.columns,function(e){return{column:e,aggregate:n[e.field]}})}})):d&&!l.footer&&(l.footer=d),d.length&&(s.scrollable&&(t=d.attr("tabindex",-1).children(".k-grid-footer-wrap"),l.scrollables=e(l.scrollables.filter(function(){return!e(this).is(".k-grid-footer-wrap")}).toArray()).add(t)),l._footerWidth&&d.find("table").css("width",l._footerWidth),t&&(o=l.content.scrollLeft(),s.scrollable!==!0&&s.scrollable.virtual&&(o=l.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()),t.scrollLeft(o))),l.lockedContent&&(l._appendLockedColumnFooter(),l._applyLockedContainersWidth(),l._syncLockedFooterHeight())},_wrapFooter:function(t){var r=this,o="",l=he.support.mobileOS?0:he.support.scrollbar();return r.options.scrollable?(o=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(Wt?' cellspacing="0"':"")+"><tbody>"+t+"</tbody></table></div></div>"),r._appendCols(o.find("table")),o.css(qt?"padding-left":"padding-right",l),o):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,r,o,l,n,a,i,s,d,c=this,u=E(c.columns),h=c.options,p=h.columnMenu,f=Se(c.columns,function(e){return e.columns!==t}).length>0,g=this._isMobile,m=function(e){c.trigger($e,{field:e.field,container:e.container})},k=function(e){c.trigger(Je,{field:e.field,container:e.container})},b=function(e){ne(e.closest("table"),!0)},_=function(e){c.trigger("sort",{sort:e.sort})&&e.preventDefault()},v=function(e){c.trigger("filter",{filter:e.filter,field:e.field})&&e.preventDefault()},w=h.$angular;if(p)for("boolean"==typeof p&&(p={}),a=P(c.thead),i=0,s=a.length;i<s;i++)r=u[i],d=a.eq(i),r.command||!r.field&&!d.attr("data-"+he.ns+"field")||(e=d.data("kendoColumnMenu"),e&&e.destroy(),l=r.sortable!==!1&&p.sortable!==!1&&h.sortable!==!1&&Ce({},h.sortable,{compare:(r.sortable||{}).compare}),n=!(!h.filterable||r.filterable===!1||p.filterable===!1)&&Ce({pane:c.pane},h.filterable,r.filterable),r.filterable&&r.filterable.dataSource&&(n.forceUnique=!1,n.checkSource=r.filterable.dataSource),n&&(n.format=r.format),o={dataSource:c.dataSource,values:r.values,columns:p.columns,sortable:l,filterable:n,messages:p.messages,owner:c,closeCallback:b,init:m,open:k,pane:c.pane,sort:_,filtering:v,filter:g?":not(.k-column-active)":"",lockedColumns:!f&&r.lockable!==!1&&A(u).length>0},w&&(o.$angular=w),d.kendoColumnMenu(o))},_headerCells:function(){return this.thead.find("th").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var e,t,r,o,l,n,a,i=this,s=E(i.columns),d=function(e){i.trigger(Ge,{field:e.field,container:e.container})},c=function(e){ne(e.closest("table"),!0)},u=function(e){i.trigger("filter",{filter:e.filter,field:e.field})&&e.preventDefault()},h=function(e){i.trigger(Qe,{field:e.field,container:e.container})},p=i.options.filterable;if(p&&typeof p.mode==_t&&p.mode.indexOf("menu")==-1&&(p=!1),p&&!i.options.columnMenu)for(t=P(i.thead),o=0,l=t.length;o<l;o++)r=t.eq(o),s[o].filterable===!1||s[o].command||!s[o].field&&!r.attr("data-"+he.ns+"field")||(e=r.data("kendoFilterMenu"),e&&e.destroy(),e=r.data("kendoFilterMultiCheck"),e&&e.destroy(),n=s[o].filterable,a=Ce({},p,n,{dataSource:i.dataSource,values:s[o].values,format:s[o].format,closeCallback:c,title:s[o].title||s[o].field,init:d,open:h,pane:i.pane,change:u}),n&&n.messages&&(a.messages=Ce(!0,{},p.messages,n.messages)),n&&n.dataSource&&(a.forceUnique=!1,a.checkSource=n.dataSource),n&&n.multi?r.kendoFilterMultiCheck(a):r.kendoFilterMenu(a))},_filterRow:function(){var t,r,o,l,n,a,i,s,d,c,u,h,p,f,g,m=this;if(m._hasFilterRow())for(r=m.options.$angular,o=E(m.columns),l=m.options.filterable,n=m.thead.find(".k-filter-row"),a=function(e){m.trigger("filter",{filter:e.filter,field:e.field})&&e.preventDefault()},this._updateHeader(this.dataSource.group().length),i=0;i<o.length;i++)if(d=o[i],c=m.options.filterable.operators,u=!1,h=e("<th/>"),p=d.field,d.hidden&&h.hide(),n.append(h),p&&d.filterable!==!1){if(f=d.filterable&&d.filterable.cell||{},s=m.options.dataSource,s instanceof fe&&(s=m.options.dataSource.options),g=Ce(!0,{},l.messages),d.filterable&&Ce(!0,g,d.filterable.messages),f.enabled===!1){h.html("&nbsp;");continue}f.dataSource&&(s=f.dataSource,u=!0),d.filterable&&d.filterable.operators&&(c=d.filterable.operators),t={column:d,dataSource:m.dataSource,suggestDataSource:s,customDataSource:u,field:p,messages:g,values:d.values,template:f.template,delay:f.delay,inputWidth:f.inputWidth,suggestionOperator:f.suggestionOperator,minLength:f.minLength,dataTextField:f.dataTextField,operator:f.operator,operators:c,showOperators:f.showOperators,change:a},r&&(t.$angular=r),e("<span/>").attr(he.attr("field"),p).appendTo(h).kendoFilterCell(t)}else h.html("&nbsp;")},_sortable:function(){var e,t,r,o,l,n,a=this,i=E(a.columns),s=a.options.sortable,d=function(e){a.trigger("sort",{sort:e.sort})&&e.preventDefault()};if(s){for(o=P(a.thead),l=0,n=o.length;l<n;l++)e=i[l],e.sortable!==!1&&!e.command&&e.field&&(r=o.eq(l),t=r.data("kendoColumnSorter"),t&&t.destroy(),r.attr("data-"+he.ns+"field",e.field).kendoColumnSorter(Ce({},s,e.sortable,{dataSource:a.dataSource,aria:!0,filter:":not(.k-column-active)",change:d})));o=null}},_columns:function(t){var r,o,l,n=this,a=n.table,i=a.find("col"),d=n.options.dataSource;if(t=t.length?t:ye(a.find("th"),function(t,r){t=e(t);var o=t.attr(he.attr("sortable")),l=t.attr(he.attr("filterable")),n=t.attr(he.attr("type")),a=t.attr(he.attr("groupable")),s=t.attr(he.attr("field")),d=t.attr(he.attr("title")),c=t.attr(he.attr("menu"));return s||(s=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:s,type:n,title:d,sortable:"false"!==o,filterable:"false"!==l,groupable:"false"!==a,menu:c,template:t.attr(he.attr("template")),width:i.eq(r).css("width")}}),r=!(n.table.find("tbody tr").length>0&&(!d||!d.transport)),n.options.scrollable){if(l=t,o=A(t),t=F(t),o.length>0&&0===t.length)throw Error("There should be at least one non locked column");U(n.element.find("tr:has(th):first"),l),t=o.concat(t)}n.columns=s(t,r),e.grep(E(n.columns),function(e){return e.selectable}).length&&(n.options.persistSelection&&(n._selectedIds={}),n.wrapper.on(gt+Be,"tbody > tr "+st,Re(n._checkboxClick,n)),n.wrapper.on(gt+Be,"thead > tr "+st,Re(n._headerCheckboxClick,n)))},_headerCheckboxClick:function(t){var r=this,o=e(t.target),l=o.prop("checked"),n=o.closest(".k-grid.k-widget").getKendoGrid();r===n&&(l?r.select(n.items()):r.clearSelection())},_checkboxClick:function(t){var r=this,o=e(t.target).closest("tr"),l=!o.hasClass(at);r===o.closest(".k-grid.k-widget").getKendoGrid()&&(l?r.select(o):r._deselectCheckRows(o))},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t,l,n){var a,i,s,d,c=this,u=Ce({},he.Template,c.options.templateSettings),h=t.length,p={storage:{},count:0},f=c._hasDetails(),g=[],m=c._groups(),k=c.options.navigatable;if(!e){for(e="<tr",l&&g.push("k-alt"),f&&g.push("k-master-row"),g.length&&(e+=' class="'+g.join(" ")+'"'),h&&(e+=" "+he.attr("uid")+'="#='+he.expr("uid",u.paramName)+'#"'),e+=" role='row'>",m>0&&!n&&(e+=r(m)),f&&(e+='<td class="k-hierarchy-cell"><a class="k-icon k-i-expand" href="\\#" '+xt+'="'+Tt+'" tabindex="-1"></a></td>'),a=0;a<h;a++)s=t[a],i=s.template,d=typeof i,e+="<td"+o(s.attributes),k&&(e+=" aria-describedby='"+s.headerAttributes.id+"'"),e+=" role='gridcell'>",e+=c._cellTmpl(s,p),e+="</td>";e+="</tr>"}return e=he.template(e,u),p.count>0?Re(e,p.storage):e},_headerCellText:function(e){var t=this,r=Ce({},he.Template,t.options.templateSettings),o=e.headerTemplate,l=typeof o,n=e.title||e.field||"";return l===bt?n=he.template(o,r)({}):l===_t&&(n=o),n},_cellTmpl:function(e,t){var r,o,l=this,n=Ce({},he.Template,l.options.templateSettings),a=e.template,i=n.paramName,s=e.field,d="",c=e.format,u=typeof a,h=e.values;if(e.command){if(Te(e.command)){for(r=0,o=e.command.length;r<o;r++)d+=e.command[r].visible?he.format("#= {0}(data)? '{1}':'' #",e.command[r].visible,l._createButton(e.command[r]).replace(Rt,"\\#")):l._createButton(e.command[r]).replace(Rt,"\\#");return d}return l._createButton(e.command).replace(Rt,"\\#")}return e.selectable?At:(u===bt?(t.storage["tmpl"+t.count]=a,d+="#=this.tmpl"+t.count+"("+i+")#",t.count++):u===_t?d+=a:h&&h.length&&we(h[0])&&"value"in h[0]&&s?(d+="#var v ="+he.stringify(G(h)).replace(Rt,"\\#")+"#",d+="#var f = v[",n.useWithBlock||(d+=i+"."),d+=s+"]#",d+="${f != null ? f : ''}"):(d+=e.encoded?"#:":"#=",c&&(d+='kendo.format("'+c.replace(Ht,"\\$1")+'",'),s?(s=he.expr(s,i),d+=s+"==null?'':"+s):d+="''",c&&(d+=")"),d+="#"),d)},_templates:function(){var t=this,r=t.options,o=t.dataSource,l=o.group(),n=t.footer||t.wrapper.find(".k-grid-footer"),a=o.aggregate(),i=E(t.columns),s=E(A(t.columns)),d=r.scrollable?E(F(t.columns)):i;if(r.scrollable&&s.length){if(r.rowTemplate||r.altRowTemplate)throw Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(r.rowTemplate,d,!1,!0),t.altRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,d,!0,!0),t.lockedRowTemplate=t._tmpl(r.rowTemplate,s),t.lockedAltRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,s,!0)}else t.rowTemplate=t._tmpl(r.rowTemplate,d),t.altRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,d,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(r.detailTemplate||"")),(t._group&&!De(a)||!De(a)&&!n.length||Se(i,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(i,a,"footerTemplate","k-footer-template")),l&&Se(i,function(e){return e.groupFooterTemplate}).length&&(a=e.map(l,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(d,a,"groupFooterTemplate","k-group-footer",s.length),r.scrollable&&s.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(s,a,"groupFooterTemplate","k-group-footer"))),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t,r,o,l='<div class="{0}">{1}</div>',n='<div class="k-grid-norecords-template"{1}>{0}</div>',a=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"",i={storage:{},count:0},s=e.extend({},he.Template,this.options.templateSettings),d=s.paramName,c="";return t=this.options.noRecords.template?this.options.noRecords.template:he.format(n,this.options.messages.noRecords,a),r=typeof t,"function"===r?(i.storage["tmpl"+i.count]=t,c+="#=this.tmpl"+i.count+"("+d+")#",i.count++):"string"===r&&(c+=t),o=he.template(he.format(l,dt,c),s),i.count>0&&(o=e.proxy(o,i.storage)),o},_footerTmpl:function(e,t,l,n,a){var i,s,d,c,u,h=this,p=Ce({},he.Template,h.options.templateSettings),f=p.paramName,g="",m={},k=0,b={},_=h._groups(),v=h.dataSource._emptyAggregates(t);for(g+='<tr class="'+n+'">',_>0&&!a&&(g+=r(_)),h._hasDetails()&&(g+='<td class="k-hierarchy-cell">&nbsp;</td>'),i=0,s=e.length;i<s;i++)u=e[i],d=u[l],c=typeof d,g+="<td"+o(u.footerAttributes)+">",d?(c!==bt&&(b=v[u.field]?Ce({},p,{paramName:f+"['"+u.field+"']"}):{},d=he.template(d,b)),m["tmpl"+k]=d,g+="#=this.tmpl"+k+"("+f+")#",k++):g+="&nbsp;",g+="</td>";return g+="</tr>",g=he.template(g,p),k>0?Re(g,m):g},_detailTmpl:function(e){var t=this,o="",l=Ce({},he.Template,t.options.templateSettings),n=l.paramName,a={},i=0,s=t._groups(),d=f(E(t.columns)).length,c=typeof e;return o+='<tr class="k-detail-row">',s>0&&(o+=r(s)),o+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(d?' colspan="'+d+'"':"")+">",c===bt?(a["tmpl"+i]=e,o+="#=this.tmpl"+i+"("+n+")#",i++):o+=e,o+="</td></tr>",o=he.template(o,l),i>0?Re(o,a):o},_hasDetails:function(){var e=this;return null!==e.options.detailTemplate||(e._events[Ue]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,r=t&&typeof t.mode==_t&&t.mode.indexOf("row")!=-1,o=this.columns,l=e.grep(o,function(e){return e.filterable===!1});return o.length&&l.length==o.length&&(r=!1),r},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&A(t.columns).length)throw Error("Having both detail template and locked columns is not supported");t.table.on(gt+Be,".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse",function(r){var o,l,n=e(this),a=n.hasClass("k-i-expand"),i=n.closest("tr.k-master-row"),s=t.detailTemplate,d=t._hasDetails(),c=a?St:Tt;return n.toggleClass("k-i-expand",!a).toggleClass("k-i-collapse",a).attr(xt,c),o=i.next(),d&&!o.hasClass("k-detail-row")&&(l=t.dataItem(i),o=e(s(l)).addClass(i.hasClass("k-alt")?"k-alt":"").insertAfter(i),t.angular("compile",function(){return{elements:o.get(),data:[{dataItem:l}]}}),t.trigger(Ue,{masterRow:i,detailRow:o,data:l,detailCell:o.find(".k-detail-cell")})),t.trigger(a?ot:lt,{masterRow:i,detailRow:o}),o.toggle(a),t._current&&t._current.attr("aria-expanded",a),r.preventDefault(),!1})},dataItem:function(t){if(t=e(t)[0],!t)return null;var r,o,l=this.tbody.children(),n=/k-grouping-row|k-detail-row|k-group-footer/,a=t.sectionRowIndex;for(o=a,r=0;r<a;r++)n.test(l[r].className)&&o--;return this._data[o]},expandRow:function(t){e(t).find("> td .k-i-expand").click()},collapseRow:function(t){e(t).find("> td .k-i-collapse").click()},_createHeaderCells:function(e,r){
var l,n,a,i,s,d,c=this,u="",h=E(c.columns);for(l=0,i=e.length;l<i;l++)n=e[l].column||e[l],a=c._headerCellText(n),s="",d=xe(n,h),n.selectable?(u+="<th scope='col'"+o(n.headerAttributes),r&&!e[l].colSpan&&(u+=" rowspan='"+r+"'"),d>-1&&(u+=he.attr("index")+"='"+d+"'"),a=n.headerTemplate?a:Ft,u+=">"+a+"</th>"):n.command?(u+="<th scope='col'"+o(n.headerAttributes),r&&!e[l].colSpan&&(u+=" rowspan='"+r+"'"),d>-1&&(u+=he.attr("index")+"='"+d+"'"),u+=">"+a+"</th>"):(n.field&&(s=he.attr("field")+"='"+n.field+"' "),u+="<th scope='col' role='columnheader' "+s,u+=" aria-haspopup='true'",r&&!e[l].colSpan&&(u+=" rowspan='"+r+"'"),e[l].colSpan>1&&(u+='colspan="'+(e[l].colSpan-H(n.columns))+'" ',u+=he.attr("colspan")+"='"+e[l].colSpan+"'"),n.title&&(u+=he.attr("title")+'="'+n.title.replace('"',"&quot;").replace(/'/g,"'")+'" '),n.groupable!==t&&(u+=he.attr("groupable")+"='"+n.groupable+"' "),n.aggregates&&n.aggregates.length&&(u+=he.attr("aggregates")+"='"+n.aggregates+"'"),d>-1&&(u+=he.attr("index")+"='"+d+"'"),u+=o(n.headerAttributes),u+=">"+a+"</th>");return u},_appendLockedColumnContent:function(){var t,r,o,l,n,a=this.columns,i=this.table.find("colgroup"),s=i.find("col:not(.k-group-col,.k-hierarchy-col)"),d=e(),c=0,u=0;for(t=0,r=a.length;t<r;t++)if(a[t].locked)if(p(a[t])){for(l=1,a[t].columns&&(l=E(a[t].columns).length-H(a[t].columns)),l=l||1,n=0;n<l;n++)d=d.add(s.eq(t+u+n-c));u+=l-1}else c++;o=e('<div class="k-grid-content-locked"><table'+(Wt?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>"),i.detach(),o.find("colgroup").append(d),i.insertBefore(this.table.find("tbody")),this.lockedContent=o.insertBefore(this.content),this.lockedTable=o.children("table")},_appendLockedColumnFooter:function(){var t,r,o=this,l=o.footer,n=l.find(".k-footer-template>td"),a=l.find(".k-grid-footer-wrap>table>colgroup>col"),i=e('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),s=o._groups(),d=e(),c=e();for(d=d.add(n.filter(".k-group-cell")),t=0,r=E(A(o.columns)).length;t<r;t++)d=d.add(n.eq(t+s));for(c=c.add(a.filter(".k-group-col")),t=0,r=f(E(M(o.columns))).length;t<r;t++)c=c.add(a.eq(t+s));d.appendTo(i.find("tr")),c.appendTo(i.find("colgroup")),o.lockedFooter=i.prependTo(l)},_appendLockedColumnHeader:function(t){var r,o,l,n,a,i,s,d,c,u,h,f=this,m=this.columns,k=[],b=0,_=e(),v=f._hasFilterRow(),w=0,C=e(),y=0,S=e(),T=f.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),x=f.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),R=f.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),D=0;for(r=0,l=m.length;r<l;r++){if(m[r].locked){if(s=x.eq(r),y=E(m[r].columns||[]).length,p(m[r])){for(d=null,m[r].columns&&(d=y-H(m[r].columns)),d=d||1,c=0;c<d;c++)_=_.add(T.eq(r+D+c-b));D+=d-1}for(z([m[r]],B(s),k,0,0),y=y||1,u=0;u<y;u++)C=C.add(R.eq(w+u));w+=y}m[r].columns&&(b+=H(m[r].columns)),p(m[r])||b++}if(k.length){for(o='<div class="k-grid-header-locked" style="width:1px"><table'+(Wt?' cellspacing="0"':"")+"><colgroup/><thead>",o+=Array(k.length+1).join("<tr></tr>"),o+=(v?'<tr class="k-filter-row" />':"")+"</thead></table></div>",i=e(o),T=i.find("colgroup"),T.append(f.thead.prev().find("col.k-group-col").add(_)),n=i.find("thead tr:not(.k-filter-row)"),r=0,l=k.length;r<l;r++)S=g(k[r]),n.eq(r).append(f.thead.find("tr:eq("+r+") .k-group-cell").add(S));return h=L(this.thead),k.length<h&&I(i,h-k.length),a=i.find(".k-filter-row"),a.append(f.thead.find(".k-filter-row .k-group-cell").add(C)),this.lockedHeader=i.prependTo(t),this.thead.find(".k-group-cell").remove(),!0}return!1},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);he.destroy(e),e.off(Be).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,r,o,l,n,a,i,s=this,d=s.columns,c=s._hasDetails()&&d.length,u=s._hasFilterRow(),h="",p=s.table.find(">thead"),f=s.element.find("thead:first").length>0;if(p.length||(p=e("<thead/>").insertBefore(s.tbody)),s.lockedHeader&&s.thead?(r=s.thead.find("tr:has(th):not(.k-filter-row)").html(""),r.remove(),r=e(),s._removeLockedContainers()):r=s.element.find(f?"thead:first tr:has(th):not(.k-filter-row)":"tr:has(th):first"),!r.length&&(r=p.children().first(),!r.length)){for(o=[{rowSpan:1,cells:[],index:0}],s._prepareColumns(o,d),t=0;t<o.length;t++)h+="<tr>",c&&(h+='<th class="k-hierarchy-cell" scope="col">'+s.options.messages.expandCollapseColumnHeader+"</th>"),h+=s._createHeaderCells(o[t].cells,o[t].rowSpan),h+="</tr>";r=e(h)}u&&(l=e("<tr/>"),l.addClass("k-filter-row"),(c||r.find(".k-hierarchy-cell").length)&&l.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),n=(s.thead||p).find(".k-filter-row"),n.length&&(he.destroy(n),n.remove()),p.append(l)),r.children().length?c&&!r.find(".k-hierarchy-cell")[0]&&r.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'):(h="",c&&(h+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),h+=s._createHeaderCells(d),r.html(h)),r.attr("role","row").find("th").addClass("k-header"),s.options.scrollable||p.addClass("k-grid-header"),r.find("script").remove().end().prependTo(p),s.thead&&s._destroyColumnAttachments(),this.angular("cleanup",function(){return{elements:p.find("th").get()}}),this.angular("compile",function(){return{elements:p.find("th").get(),data:ye(d,function(e){return{column:e}})}}),s.thead=p.attr("role","rowgroup"),s._sortable(),s._filterable(),s._filterRow(),s._scrollable(),s._updateCols(),s._columnMenu(),i=this.options.scrollable&&A(this.columns).length,i&&(a=s._appendLockedColumnHeader(s.thead.closest(".k-grid-header")),s._appendLockedColumnContent(),s.lockedContent.bind("DOMMouseScroll"+Be+" mousewheel"+Be,Re(s._wheelScroll,s))),s._updateColumnCellIndex(),s._updateFirstColumnClass(),s._resizable(),s._draggable(),s._reorderable(),s._updateHeader(s._groups()),i&&(a&&s._syncLockedHeaderHeight(),s._applyLockedContainersWidth()),s.groupable&&s._attachGroupable()},_retrieveFirstColumn:function(t,r){var o,l=e();if(r.length&&t[0]){for(o=t[0];o.columns&&o.columns.length;)o=o.columns[0],r=r.filter(":not(:first())");l=l.add(r)}return l},_updateFirstColumnClass:function(){var t,r,o=this,l=o.columns||[],n=o._hasDetails()&&l.length;n||o._groups()||(t=o.thead.find(">tr:not(.k-filter-row):not(:first)"),l=F(l),r=o._retrieveFirstColumn(l,t),o._isLocked()&&(t=o.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),l=A(o.columns),r=r.add(o._retrieveFirstColumn(l,t))),r.each(function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))},_prepareColumns:function(e,t,r,o){var l,n,a=o||e[e.length-1],i=e[a.index+1],s=0;for(l=0;l<t.length;l++)n={column:t[l],colSpan:0},a.cells.push(n),t[l].columns&&t[l].columns.length&&(i||(i={rowSpan:0,cells:[],index:e.length},e.push(i)),n.colSpan=t[l].columns.length,this._prepareColumns(e,t[l].columns,n,i),s+=n.colSpan-1,a.rowSpan=e.length-a.index);r&&(r.colSpan+=s)},_wheelScroll:function(e){var t,r,o;e.ctrlKey||(t=this.content,this.options.scrollable.virtual&&(t=this.virtualScrollable.verticalScrollbar),r=t.scrollTop(),o=he.wheelDeltaY(e),o&&(t[0].scrollHeight>t[0].clientHeight&&(t[0].scrollTop<t[0].scrollHeight-t[0].clientHeight&&o<0||t[0].scrollTop>0&&o>0)&&e.preventDefault(),t.scrollTop(r+-o)))},_isLocked:function(){return null!=this.lockedHeader},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);this._isLocked()?V(e,W(q(this.columns)),this._hasDetails(),0):V(e,W(f(this.columns)),this._hasDetails(),0)},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&(e=e||this.lockedHeader.find("table").add(this.lockedTable),V(e,W(M(this.columns)),this._hasDetails(),this._groups()))},_appendCols:function(e,t){t?V(e,W(q(this.columns)),this._hasDetails(),0):V(e,W(f(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,r,o=this;e=e.toJSON(),r=!(o.table.find("tbody tr").length>0&&(!o.dataSource||!o.dataSource.transport));for(t in e)o.columns.push({field:t,encoded:r,headerAttributes:{id:he.guid()}});o._thead(),o._templates()}},_rowsHtml:function(e,t){var r,o,l=this,n="",a=t.rowTemplate,i=t.altRowTemplate;for(r=0,o=e.length;r<o;r++)n+=r%2?i(e[r]):a(e[r]),l._data.push(e[r]);return n},_groupRowHtml:function(e,t,r,o,l,n){var a,i,s,d,c=this,u="",h=e.field,p=Se(E(c.columns),function(e){return e.field==h})[0]||{},f=p.groupHeaderTemplate,g=(p.title||h)+": "+$(e.value,p.format,p.values,p.encoded),m=c._groupAggregatesDefaultObject||{},k=e.items,b=Ce({},m,e.aggregates),_=Ce({},{field:e.field,value:e.value,items:k,aggregates:b},e.aggregates[e.field]),v=l.groupFooterTemplate;if(f&&(g=typeof f===bt?f(_):he.template(f)(_)),u+=o(t,r,g),e.hasSubgroups)for(a=0,i=k.length;a<i;a++)u+=c._groupRowHtml(k[a],n?t:t-1,r+1,o,l,n);else u+=c._rowsHtml(k,l);if(v){s={};for(d in b)s[d]=Ce({},b[d],{group:{field:e.field,value:e.value,items:k}});u+=v(s)}return u},collapseGroup:function(t){var r,o,l,n,a,i,s,d,c,u;for(t=e(t),o=this.options.groupable,l=o.showFooter,n=l?0:1,i=e(),this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?i=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(i=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),r=t.find(".k-group-cell").length,t.find(".k-i-collapse").addClass("k-i-expand").removeClass("k-i-collapse"),t.find("td[aria-expanded='true']:first").attr("aria-expanded",!1).find("a").attr(xt,Tt),t=t.nextAll("tr"),u=[],s=0,d=t.length;s<d&&(c=t.eq(s),a=c.find(".k-group-cell").length,c.hasClass("k-grouping-row")?n++:c.hasClass("k-group-footer")&&n--,!(a<=r||c.hasClass("k-group-footer")&&n<0));s++)i.length&&u.push(i[s]),u.push(c[0]);e(u).hide()},expandGroup:function(t){t=e(t);var r,o,l,n,a,i=this,s=i.options.groupable.showFooter,d=e(),c=[],u=1;for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?d=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(d=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),r=t.find(".k-group-cell").length,t.find(".k-i-expand").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td[aria-expanded='false']:first").attr("aria-expanded",!0).find("a").attr(xt,St),t=t.nextAll("tr"),n=0,a=t.length;n<a&&(o=t.eq(n),l=o.find(".k-group-cell").length,!(l<=r));n++)l!=r+1||o.hasClass("k-detail-row")||(o.show(),d.eq(n).show(),o.hasClass("k-grouping-row")&&o.find(".k-icon").hasClass("k-i-collapse")&&i.expandGroup(o),o.hasClass("k-master-row")&&o.find(".k-icon").hasClass("k-i-collapse")&&(o.next().show(),d.eq(n+1).show())),o.hasClass("k-grouping-row")&&(s&&c.push(o.is(":visible")),u++),o.hasClass("k-group-footer")&&(s&&o.toggle(c.pop()),1==u?(o.show(),d.eq(n).show()):u--)},_updateHeader:function(t){var r=this,o=r._isLocked()?r.lockedHeader.find("thead"):r.thead,l=o.find("tr.k-filter-row").find("th.k-group-cell").length,n=o.find("tr:first").find("th.k-group-cell").length,a=o.children("tr:not(:first)").filter(function(){return!e(this).children(":visible").length});t>n?(e(Array(t-n+1).join('<th class="k-group-cell k-header" scope="col">'+r.options.messages.expandCollapseColumnHeader+"</th>")).prependTo(o.children("tr:not(.k-filter-row)")),r.element.is(":visible")&&a.find("th.k-group-cell").hide()):t<n&&o.find("tr").each(function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()}),t>l&&e(Array(t-l+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(o.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,r=this;r._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",r.wrapper).add(r.thead.parent()).add(r.table),r._footerWidth=te(t.eq(0)),t.width(r._footerWidth),t=e(">.k-grid-footer>.k-grid-footer-locked>table",r.wrapper).add(r.lockedHeader.find(">table")).add(r.lockedTable),t.width(te(t.eq(0))))},hideColumn:function(r){var o,l,n,i,s,d,c,g,m,k,b=this,_=0,v=b.footer||b.wrapper.find(".k-grid-footer"),w=b.columns,C=b.lockedHeader?P(b.lockedHeader.find(">table>thead")).filter(h).length:0;if(r="number"==typeof r?w[r]:we(r)?Se(x(w),function(e){return e===r})[0]:Se(x(w),function(e){return e.field===r})[0],r&&p(r)){if(r.columns&&r.columns.length){for(d=S(r,w),u(r,!1),Q(a(e(">table>thead",b.lockedHeader),b.thead,">tr:eq("+d.row+")>th"),d.cell,!1),n=0;n<r.columns.length;n++)this.hideColumn(r.columns[n]);return b.trigger(Ze,{column:r}),t}if(m=xe(r,f(E(w))),u(r,!1),b._setParentsVisibility(r,!1),b._templates(),b._updateCols(),b._updateLockedCols(),k=b.thead,c=m,b.lockedHeader&&C>m?k=b.lockedHeader.find(">table>thead"):c-=C,o=P(k).filter(h).eq(c),o[0].style.display="none",Q(a(e(">table>thead",b.lockedHeader),b.thead,">tr.k-filter-row>th"),m,!1),v[0]&&(b._updateCols(v.find(">.k-grid-footer-wrap>table")),b._updateLockedCols(v.find(">.k-grid-footer-locked>table")),Q(v.find(".k-footer-template>td"),m,!1)),b.lockedTable&&C>m?J(b.lockedTable.find(">tbody>tr"),m):J(b.tbody.children(),m-C),b.lockedTable)b._updateTablesWidth(),b._applyLockedContainersWidth(),b._syncLockedContentHeight(),b._syncLockedHeaderHeight(),b._syncLockedFooterHeight();else{for(i=b.thead.prev().find("col"),n=0,g=i.length;n<g;n+=1){if(s=i[n].style.width,!s||s.indexOf("%")!=-1){_=0;break}_+=parseInt(s,10)}l=e(">.k-grid-header table:first,>.k-grid-footer table:first",b.wrapper).add(b.table),b._footerWidth=null,_&&(l.each(function(){this.style.width=_+"px"}),b._footerWidth=_),Mt.msie&&8==Mt.version&&(l.css("display","inline-table"),setTimeout(function(){l.css("display","table")},1))}b._updateFirstColumnClass(),b.trigger(Ze,{column:r})}},_setParentsVisibility:function(t,r){var o,l,n,i,s,d=this.columns,h=[],p=r?function(e){return f(e.columns).length&&e.hidden}:function(e){return!f(e.columns).length&&!e.hidden};if(c(t,d,h)&&h.length)for(o=h.length-1;o>=0;o--)l=h[o],n=w(l,d),i=a(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+n.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(n.cell),p(l)&&(u(l,r),i[0].style.display=r?"":"none"),i.filter("["+he.attr("colspan")+"]").length&&(s=parseInt(i.attr(he.attr("colspan")),10),i[0].colSpan=s-H(l.columns)||1)},showColumn:function(r){var o,l,n,i,s,d,c,h,f,g,m,k=this,b=k.columns,_=k.footer||k.wrapper.find(".k-grid-footer"),v=k.lockedHeader?P(k.lockedHeader.find(">table>thead")).length:0;if(r="number"==typeof r?b[r]:we(r)?Se(x(b),function(e){return e===r})[0]:Se(x(b),function(e){return e.field===r})[0],r&&!p(r)){if(r.columns&&r.columns.length){for(c=w(r,b),u(r,!0),Q(a(e(">table>thead",k.lockedHeader),k.thead,">tr:eq("+c.row+")>th"),c.cell,!0),o=0;o<r.columns.length;o++)this.showColumn(r.columns[o]);return k.trigger(et,{column:r}),t}if(g=xe(r,E(b)),u(r,!0),k._setParentsVisibility(r,!0),k._templates(),k._updateCols(),k._updateLockedCols(),m=k.thead,d=g,k.lockedHeader&&v>g?m=k.lockedHeader.find(">table>thead"):d-=v,n=P(m).eq(d),n[0].style.display="",Q(a(e(">table>thead",k.lockedHeader),k.thead,">tr.k-filter-row>th"),g,!0),_[0]&&(k._updateCols(_.find(">.k-grid-footer-wrap>table")),k._updateLockedCols(_.find(">.k-grid-footer-locked>table")),Q(_.find(".k-footer-template>td"),g,!0)),k.lockedTable&&v>g?Z(k.lockedTable.find(">tbody>tr"),g):Z(k.tbody.children(),g-v),k.lockedTable)k._updateTablesWidth(),k._applyLockedContainersWidth(),k._syncLockedContentHeight(),k._syncLockedHeaderHeight();else if(i=e(">.k-grid-header table:first,>.k-grid-footer table:first",k.wrapper).add(k.table),r.width){for(s=0,f=k.thead.prev().find("col"),o=0,l=f.length;o<l;o+=1){if(h=f[o].style.width,h.indexOf("%")>-1){s=0;break}s+=parseInt(h,10)}k._footerWidth=null,s&&(i.each(function(){this.style.width=s+"px"}),k._footerWidth=s)}else i.width("");k._updateFirstColumnClass(),k.trigger(et,{column:r})}},_progress:function(e){var t=this.element;this._editContainer&&"popup"===this._editMode()?t=this._editContainer:this.lockedContent?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),he.ui.progress(t,e)},_resize:function(e,t){this._syncLockedContentHeight(),this._syncLockedHeaderHeight(),this.content&&(this._setContentWidth(),this._setContentHeight()),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar())},_isActiveInTable:function(){var t=me();return!!t&&(this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t)))},refresh:function(t){var r,o=this,l=o.dataSource.view(),n=o.options.navigatable,a=e(o.current()),i=!1,s=!!e.grep(E(o.columns),function(e){return e.selectable}).length,d=(o.dataSource.group()||[]).length,c=d+W(f(o.columns)).length;t&&"itemchange"===t.action&&o.editable||(t&&"remove"===t.action&&o.editable&&o.editable.options.model&&xe(o.editable.options.model,t.items)>-1&&o.editable.options.model.unbind(Xe,o._modelChangeHandler),t=t||{},o.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(o._angularItems("cleanup"),n&&(o._isActiveInTable()||o._editContainer&&o._editContainer.data("kendoWindow"))&&(i=a.is("th"),r=Math.max(o.cellIndex(a),0)),o._destroyEditable(),o._progress(!1),o._hideResizeHandle(),o._data=[],o.columns.length||(o._autoColumns(o._firstDataItem(l[0],d)),c=d+o.columns.length),o._group=d>0||o._group,o._group&&(o._templates(),o._updateCols(),o._updateLockedCols(),o._updateHeader(d),o._group=d>0),o._renderContent(l,c,d),o._renderLockedContent(l,c,d),o._footer(),o._renderNoRecordsContent(),o._setContentHeight(),o._setContentWidth(o.content&&o.content.scrollLeft()),o.lockedTable&&(o.options.scrollable.virtual?o.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):o.touchScroller?o.touchScroller.movable.trigger("change"):(o.wrapper.one("scroll",function(e){e.stopPropagation()}),o.content.trigger("scroll"))),o._restoreCurrent(r,i),o.touchScroller&&o.touchScroller.contentResized(),o.selectable&&o.selectable.resetTouchEvents(),o._muteAngularRebind(function(){o._angularItems("compile")}),s&&o._toggleHeaderCheckState(!1),o.options.persistSelection&&(o.selectable&&!he.ui.Selectable.parseOptions(o.options.selectable).cell||s)&&o._restoreSelection(),o.trigger(rt)))},_restoreCurrent:function(r,o){var l,n,a;r===t||r<0||(this._removeCurrent(),o?this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(r)):(l=0,this._rowVirtualIndex?l=this.virtualScrollable.position(this._rowVirtualIndex):r=0,n=e(),this.lockedTable&&(n=this.lockedTable.find(">tbody>tr").eq(l)),n=n.add(this.tbody.children().eq(l)),a=n.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(r),this._setCurrent(a)),this._current&&ne(this._current.closest("table")[0],!0))},_restoreSelection:function(){var e,t=this,r=t.items();e=Se(r,function(e){var r=t.dataItem(e)[t.dataSource.options.schema.model.id];if(t._selectedIds[r])return e}),t.select(e)},_angularItems:function(e){he.ui.DataBoundWidget.fn._angularItems.call(this,e),"cleanup"===e&&this._cleanupDetailItems(),this._angularGroupItems(e),this._angularGroupFooterItems(e)},_cleanupDetailItems:function(){var e=this;e._hasDetails()&&(e.angular("cleanup",function(){return{elements:e.tbody.children(".k-detail-row")}}),e.tbody.find(".k-detail-cell").empty())},_angularGroupItems:function(t){var r=this,o=r.tbody;r.lockedContent&&(o=r.lockedTable.find("tbody")),r._group&&r.angular(t,function(){return{elements:o.children(".k-grouping-row"),data:e.map(Y(r.dataSource.view()),function(e){return{dataItem:e}})}})},_angularGroupFooterItems:function(t){var r=this,o=r.tbody;r.lockedContent&&(o=r.element),r._group&&r.groupFooterTemplate&&r.angular(t,function(){return{elements:o.find(".k-group-footer"),data:e.map(X(r.dataSource.view()),function(e){return{dataItem:e}})}})},_renderContent:function(e,t,r){var o,l,n=this,a="",i=null!=n.lockedContent,s={rowTemplate:n.rowTemplate,altRowTemplate:n.altRowTemplate,groupFooterTemplate:n.groupFooterTemplate};if(t=i?t-W(M(n.columns)).length:t,r>0)for(t=i?t-r:t,n.detailTemplate&&t++,n.groupFooterTemplate&&(n._groupAggregatesDefaultObject=n.dataSource.aggregates()),o=0,l=e.length;o<l;o++)a+=n._groupRowHtml(e[o],t,0,i?ue:ce,s,i);else a+=n._rowsHtml(e,s);n.tbody=O(n.tbody,n.table,a,this.options.$angular)},_renderLockedContent:function(e,t,r){var o,l,n,a="",i={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};if(this.lockedContent){if(n=this.lockedTable,r>0)for(t-=f(E(F(this.columns))).length,o=0,l=e.length;o<l;o++)a+=this._groupRowHtml(e[o],t,0,ce,i);else a=this._rowsHtml(e,i);O(n.children("tbody"),n,a,this.options.$angular),this._syncLockedContentHeight()}},_adjustRowsHeight:function(e,t){var r,o,l,n,a=e[0].rows,i=a.length,s=t[0].rows,d=e.add(t),c=d.length,u=[];for(r=0;r<i&&s[r];r++)a[r].style.height&&(a[r].style.height=s[r].style.height="");for(r=0;r<i&&s[r];r++)o=a[r].offsetHeight,l=s[r].offsetHeight,n=0,o>l?n=o:o<l&&(n=l),u.push(n);for(r=0;r<c;r++)d[r].style.display="none";for(r=0;r<i;r++)u[r]&&(a[r].style.height=s[r].style.height=u[r]+1+"px");for(r=0;r<c;r++)d[r].style.display=""}});he.ExcelMixin&&he.ExcelMixin.extend(Bt.prototype),he.PDFMixin&&(he.PDFMixin.extend(Bt.prototype),Bt.prototype._drawPDF_autoPageBreak=function(r){function o(){u&&i!==t?(c.one("change",l),c.page(i)):(s.refresh(),l())}function l(){p.appendTo(document.body);var t=e.extend({},s.options.pdf,{_destructive:!0,progress:function(e){r.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});he.drawing.drawDOM(f,t).always(function(){p.remove()}).then(function(e){d.resolve(e)}).fail(function(e){d.reject(e)})}function n(){var e=c.page(),t=u?c.totalPages():1;a.append(h.find("tr")),e<t?c.page(e+1):(c.unbind("change",n),o())}var a,i,s=this,d=new e.Deferred,c=s.dataSource,u=s.options.pdf.allPages,h=s.wrapper.find('table[role="grid"] > tbody'),p=e("<div>").css({position:"absolute",left:-1e4,top:-1e4}),f=s.wrapper.clone().css({height:"auto",width:"auto"}).appendTo(p);return f.find(".k-grid-content").css({height:"auto",width:"auto",overflow:"visible"}),f.find('table[role="grid"]').css({height:"auto",width:"100%",overflow:"visible"}),f.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove(),f.find(".k-grid-header").css({paddingRight:0}),this._initPDFProgress(r),a=f.find('table[role="grid"] > tbody').empty(),i=c.page(),u?(c.bind("change",n),c.page(1)):n(),d.promise()},Bt.prototype._drawPDF=function(r){function o(){i&&d!==t?(a.unbind("change",l),a.one("change",function(){n.resolve(s)}),a.page(d)):n.resolve(s)}function l(){c._drawPDFShadow({width:c.wrapper.width()},{avoidLinks:c.options.pdf.avoidLinks}).done(function(e){var t=a.page(),l=i?a.totalPages():1,n={page:e,pageNumber:t,progress:t/l,totalPages:l};r.notify(n),s.append(n.page),t<l?a.page(t+1):o()}).fail(function(e){n.reject(e)})}var n,a,i,s,d,c=this;return c.options.pdf.paperSize&&"auto"!=c.options.pdf.paperSize?c._drawPDF_autoPageBreak(r):(n=new e.Deferred,a=c.dataSource,i=c.options.pdf.allPages,this._initPDFProgress(r),s=new he.drawing.Group,d=a.page(),i?(a.bind("change",l),a.page(1)):l(),n.promise())},Bt.prototype._initPDFProgress=function(t){var r,o=e("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>");o.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0})),this.wrapper.append(o),r=e("<div class='k-loading-pdf-progress'>").appendTo(o).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar"),t.progress(function(e){r.value(e.progress)}).always(function(){he.destroy(o),o.remove()})}),pe.plugin(Bt),pe.plugin(Pt)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t,r){(r||t)()});
//# sourceMappingURL=kendo.grid.min.js.map
